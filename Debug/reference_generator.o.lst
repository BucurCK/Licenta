   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "reference_generator.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .comm CCU8_CC8_CR1_CR1_Value,4,4
  20              	 .global interrupt_counter_ref_gen
  21              	 .section .bss.interrupt_counter_ref_gen,"aw",%nobits
  22              	 .align 2
  25              	interrupt_counter_ref_gen:
  26 0000 00000000 	 .space 4
  27              	 .global ref_gen_status
  28              	 .section .bss.ref_gen_status,"aw",%nobits
  31              	ref_gen_status:
  32 0000 00       	 .space 1
  33              	 .comm high_level,4,4
  34              	 .comm high_level_time,4,4
  35              	 .comm rise_time,4,4
  36              	 .comm rise_increment,4,4
  37              	 .comm fall_time,4,4
  38              	 .comm fall_decrement,4,4
  39              	 .comm low_level,4,4
  40              	 .comm low_level_time,4,4
  41              	 .global repeat_motion
  42              	 .section .data.repeat_motion,"aw",%progbits
  45              	repeat_motion:
  46 0000 01       	 .byte 1
  47              	 .global time_rise_input_s
  48              	 .section .bss.time_rise_input_s,"aw",%nobits
  49              	 .align 2
  52              	time_rise_input_s:
  53 0000 00000000 	 .space 4
  54              	 .global time_fall_input_s
  55              	 .section .bss.time_fall_input_s,"aw",%nobits
  56              	 .align 2
  59              	time_fall_input_s:
  60 0000 00000000 	 .space 4
  61              	 .global time_high_input_s
  62              	 .section .bss.time_high_input_s,"aw",%nobits
  63              	 .align 2
  66              	time_high_input_s:
  67 0000 00000000 	 .space 4
  68              	 .global time_low_input_s
  69              	 .section .bss.time_low_input_s,"aw",%nobits
  70              	 .align 2
  73              	time_low_input_s:
  74 0000 00000000 	 .space 4
  75              	 .global current_input
  76              	 .section .bss.current_input,"aw",%nobits
  77              	 .align 2
  80              	current_input:
  81 0000 00000000 	 .space 4
  82              	 .global voltage_input
  83              	 .section .bss.voltage_input,"aw",%nobits
  84              	 .align 2
  87              	voltage_input:
  88 0000 00000000 	 .space 4
  89              	 .global rpm_input
  90              	 .section .bss.rpm_input,"aw",%nobits
  91              	 .align 2
  94              	rpm_input:
  95 0000 00000000 	 .space 4
  96              	 .global rotation_input
  97              	 .section .bss.rotation_input,"aw",%nobits
  98              	 .align 2
 101              	rotation_input:
 102 0000 00000000 	 .space 4
 103              	 .global reference
 104              	 .section .bss.reference,"aw",%nobits
 105              	 .align 2
 108              	reference:
 109 0000 00000000 	 .space 4
 110              	 .global reference_old
 111              	 .section .bss.reference_old,"aw",%nobits
 112              	 .align 2
 115              	reference_old:
 116 0000 00000000 	 .space 4
 117              	 .global ref_type_select
 118              	 .section .bss.ref_type_select,"aw",%nobits
 121              	ref_type_select:
 122 0000 00       	 .space 1
 123              	 .section .text.reference_generator_compute,"ax",%progbits
 124              	 .align 2
 125              	 .global reference_generator_compute
 126              	 .thumb
 127              	 .thumb_func
 129              	reference_generator_compute:
 130              	.LFB196:
 131              	 .file 1 "../reference_generator.c"
   1:../reference_generator.c **** #include <stdint.h>
   2:../reference_generator.c **** #include <stdbool.h>
   3:../reference_generator.c **** #include "reference_generator.h"
   4:../reference_generator.c **** #include "driver_adc.h"
   5:../reference_generator.c **** #include "pi_regulator.h"
   6:../reference_generator.c **** #include "state_machine.h"
   7:../reference_generator.c **** #include "transform.h"
   8:../reference_generator.c **** #include <math.h>
   9:../reference_generator.c **** 
  10:../reference_generator.c **** // For reference Time = [ms] | high_level = motor counts
  11:../reference_generator.c **** uint32_t interrupt_counter_ref_gen = 0;
  12:../reference_generator.c **** 
  13:../reference_generator.c **** status_ref_gen ref_gen_status = 0; // 0 - disabled, 1 - rise, 2 - high, 3 - fall, 4 - low
  14:../reference_generator.c **** 
  15:../reference_generator.c **** int32_t high_level;		 // final reference
  16:../reference_generator.c **** int32_t high_level_time; // time to hold final reference
  17:../reference_generator.c **** 
  18:../reference_generator.c **** int32_t rise_time; // time to get to final reference
  19:../reference_generator.c **** float_t rise_increment;
  20:../reference_generator.c **** 
  21:../reference_generator.c **** int32_t fall_time; // time to get to initial reference
  22:../reference_generator.c **** float_t fall_decrement;
  23:../reference_generator.c **** 
  24:../reference_generator.c **** int32_t low_level;		// initial reference = 0
  25:../reference_generator.c **** int32_t low_level_time; // time to hold initial reference
  26:../reference_generator.c **** 
  27:../reference_generator.c **** uint8_t repeat_motion = 1; // 0 = NO | 1 = YES
  28:../reference_generator.c **** 
  29:../reference_generator.c **** float_t time_rise_input_s = 0;
  30:../reference_generator.c **** float_t time_fall_input_s = 0;
  31:../reference_generator.c **** float_t time_high_input_s = 0;
  32:../reference_generator.c **** float_t time_low_input_s = 0;
  33:../reference_generator.c **** 
  34:../reference_generator.c **** float_t current_input = 0; // 1[A] ~= 820[i.u]
  35:../reference_generator.c **** float_t voltage_input = 0;
  36:../reference_generator.c **** float_t rpm_input = 0;		// rpm_min = 30 = 1[iu/ms] | use increments of 30 for use of computation
  37:../reference_generator.c **** float_t rotation_input = 0; // number of full rotation | 1[rot] = 2000[iu]
  38:../reference_generator.c **** 
  39:../reference_generator.c **** float_t reference = 0;
  40:../reference_generator.c **** float_t reference_old = 0;
  41:../reference_generator.c **** 
  42:../reference_generator.c **** ref_type ref_type_select = 0;
  43:../reference_generator.c **** 
  44:../reference_generator.c **** void reference_generator_compute(void)
  45:../reference_generator.c **** {
 132              	 .loc 1 45 0
 133              	 .cfi_startproc
 134              	 
 135              	 
 136              	 
 137 0000 80B4     	 push {r7}
 138              	.LCFI0:
 139              	 .cfi_def_cfa_offset 4
 140              	 .cfi_offset 7,-4
 141 0002 00AF     	 add r7,sp,#0
 142              	.LCFI1:
 143              	 .cfi_def_cfa_register 7
  46:../reference_generator.c **** 	// Compute human data inputs into machine outputs
  47:../reference_generator.c **** 	switch (ref_type_select)
 144              	 .loc 1 47 0
 145 0004 B14B     	 ldr r3,.L14
 146 0006 1B78     	 ldrb r3,[r3]
 147 0008 032B     	 cmp r3,#3
 148 000a 00F20B81 	 bhi .L13
 149 000e 01A2     	 adr r2,.L4
 150 0010 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 151              	 .p2align 2
 152              	.L4:
 153 0014 25000000 	 .word .L3+1
 154 0018 A9000000 	 .word .L5+1
 155 001c 2D010000 	 .word .L6+1
 156 0020 A9010000 	 .word .L7+1
 157              	 .p2align 1
 158              	.L3:
  48:../reference_generator.c **** 	{
  49:../reference_generator.c **** 	case (REF_POS):
  50:../reference_generator.c **** 		high_level = rotation_input * ROTATION_IU;
 159              	 .loc 1 50 0
 160 0024 AA4B     	 ldr r3,.L14+4
 161 0026 D3ED007A 	 flds s15,[r3]
 162 002a 9FEDAA7A 	 flds s14,.L14+8
 163 002e 67EE877A 	 fmuls s15,s15,s14
 164 0032 FDEEE77A 	 ftosizs s15,s15
 165 0036 17EE902A 	 fmrs r2,s15
 166 003a A74B     	 ldr r3,.L14+12
 167 003c 1A60     	 str r2,[r3]
  51:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 168              	 .loc 1 51 0
 169 003e A74B     	 ldr r3,.L14+16
 170 0040 D3ED007A 	 flds s15,[r3]
 171 0044 9FEDA67A 	 flds s14,.L14+20
 172 0048 67EE877A 	 fmuls s15,s15,s14
 173 004c FDEEE77A 	 ftosizs s15,s15
 174 0050 17EE902A 	 fmrs r2,s15
 175 0054 A34B     	 ldr r3,.L14+24
 176 0056 1A60     	 str r2,[r3]
  52:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 177              	 .loc 1 52 0
 178 0058 A34B     	 ldr r3,.L14+28
 179 005a D3ED007A 	 flds s15,[r3]
 180 005e 9FEDA07A 	 flds s14,.L14+20
 181 0062 67EE877A 	 fmuls s15,s15,s14
 182 0066 FDEEE77A 	 ftosizs s15,s15
 183 006a 17EE902A 	 fmrs r2,s15
 184 006e 9F4B     	 ldr r3,.L14+32
 185 0070 1A60     	 str r2,[r3]
  53:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 186              	 .loc 1 53 0
 187 0072 9F4B     	 ldr r3,.L14+36
 188 0074 D3ED007A 	 flds s15,[r3]
 189 0078 9FED997A 	 flds s14,.L14+20
 190 007c 67EE877A 	 fmuls s15,s15,s14
 191 0080 FDEEE77A 	 ftosizs s15,s15
 192 0084 17EE902A 	 fmrs r2,s15
 193 0088 9A4B     	 ldr r3,.L14+40
 194 008a 1A60     	 str r2,[r3]
  54:../reference_generator.c **** 		fall_time = time_fall_input_s * SECOND;
 195              	 .loc 1 54 0
 196 008c 9A4B     	 ldr r3,.L14+44
 197 008e D3ED007A 	 flds s15,[r3]
 198 0092 9FED937A 	 flds s14,.L14+20
 199 0096 67EE877A 	 fmuls s15,s15,s14
 200 009a FDEEE77A 	 ftosizs s15,s15
 201 009e 17EE902A 	 fmrs r2,s15
 202 00a2 964B     	 ldr r3,.L14+48
 203 00a4 1A60     	 str r2,[r3]
  55:../reference_generator.c **** 
  56:../reference_generator.c **** //		high_level = 1 * ROTATION_IU;
  57:../reference_generator.c **** //		high_level_time = 0.1 * SECOND;
  58:../reference_generator.c **** //		low_level_time = 0.1 * SECOND;
  59:../reference_generator.c **** //		rise_time = 0.2 * SECOND;
  60:../reference_generator.c **** //		fall_time = 0.2 * SECOND;
  61:../reference_generator.c **** 
  62:../reference_generator.c **** 		break;
 204              	 .loc 1 62 0
 205 00a6 BEE0     	 b .L8
 206              	.L5:
  63:../reference_generator.c **** 	case (REF_SPD):
  64:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 207              	 .loc 1 64 0
 208 00a8 914B     	 ldr r3,.L14+36
 209 00aa D3ED007A 	 flds s15,[r3]
 210 00ae 9FED8C7A 	 flds s14,.L14+20
 211 00b2 67EE877A 	 fmuls s15,s15,s14
 212 00b6 FDEEE77A 	 ftosizs s15,s15
 213 00ba 17EE902A 	 fmrs r2,s15
 214 00be 8D4B     	 ldr r3,.L14+40
 215 00c0 1A60     	 str r2,[r3]
  65:../reference_generator.c **** 		fall_time = time_high_input_s * SECOND;
 216              	 .loc 1 65 0
 217 00c2 864B     	 ldr r3,.L14+16
 218 00c4 D3ED007A 	 flds s15,[r3]
 219 00c8 9FED857A 	 flds s14,.L14+20
 220 00cc 67EE877A 	 fmuls s15,s15,s14
 221 00d0 FDEEE77A 	 ftosizs s15,s15
 222 00d4 17EE902A 	 fmrs r2,s15
 223 00d8 884B     	 ldr r3,.L14+48
 224 00da 1A60     	 str r2,[r3]
  66:../reference_generator.c **** 		high_level = rpm_input / (MINUTE / ROTATION_IU);
 225              	 .loc 1 66 0
 226 00dc 884B     	 ldr r3,.L14+52
 227 00de D3ED007A 	 flds s15,[r3]
 228 00e2 B2EE0E7A 	 fconsts s14,#46
 229 00e6 C7EE877A 	 fdivs s15,s15,s14
 230 00ea FDEEE77A 	 ftosizs s15,s15
 231 00ee 17EE902A 	 fmrs r2,s15
 232 00f2 794B     	 ldr r3,.L14+12
 233 00f4 1A60     	 str r2,[r3]
  67:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 234              	 .loc 1 67 0
 235 00f6 794B     	 ldr r3,.L14+16
 236 00f8 D3ED007A 	 flds s15,[r3]
 237 00fc 9FED787A 	 flds s14,.L14+20
 238 0100 67EE877A 	 fmuls s15,s15,s14
 239 0104 FDEEE77A 	 ftosizs s15,s15
 240 0108 17EE902A 	 fmrs r2,s15
 241 010c 754B     	 ldr r3,.L14+24
 242 010e 1A60     	 str r2,[r3]
  68:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 243              	 .loc 1 68 0
 244 0110 754B     	 ldr r3,.L14+28
 245 0112 D3ED007A 	 flds s15,[r3]
 246 0116 9FED727A 	 flds s14,.L14+20
 247 011a 67EE877A 	 fmuls s15,s15,s14
 248 011e FDEEE77A 	 ftosizs s15,s15
 249 0122 17EE902A 	 fmrs r2,s15
 250 0126 714B     	 ldr r3,.L14+32
 251 0128 1A60     	 str r2,[r3]
  69:../reference_generator.c **** 
  70:../reference_generator.c **** //		rise_time = 0.5 * SECOND;
  71:../reference_generator.c **** //		fall_time = 0.5 * SECOND;
  72:../reference_generator.c **** ////		high_level = rpm_input / (MINUTE / ROTATION_IU);
  73:../reference_generator.c **** //		high_level_time = 0.5 * SECOND;
  74:../reference_generator.c **** //		low_level_time = 0.5 * SECOND;
  75:../reference_generator.c **** 		break;
 252              	 .loc 1 75 0
 253 012a 7CE0     	 b .L8
 254              	.L6:
  76:../reference_generator.c **** 	case (REF_I):
  77:../reference_generator.c **** 		high_level = current_input;
 255              	 .loc 1 77 0
 256 012c 754B     	 ldr r3,.L14+56
 257 012e D3ED007A 	 flds s15,[r3]
 258 0132 FDEEE77A 	 ftosizs s15,s15
 259 0136 17EE902A 	 fmrs r2,s15
 260 013a 674B     	 ldr r3,.L14+12
 261 013c 1A60     	 str r2,[r3]
  78:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 262              	 .loc 1 78 0
 263 013e 674B     	 ldr r3,.L14+16
 264 0140 D3ED007A 	 flds s15,[r3]
 265 0144 9FED667A 	 flds s14,.L14+20
 266 0148 67EE877A 	 fmuls s15,s15,s14
 267 014c FDEEE77A 	 ftosizs s15,s15
 268 0150 17EE902A 	 fmrs r2,s15
 269 0154 634B     	 ldr r3,.L14+24
 270 0156 1A60     	 str r2,[r3]
  79:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 271              	 .loc 1 79 0
 272 0158 634B     	 ldr r3,.L14+28
 273 015a D3ED007A 	 flds s15,[r3]
 274 015e 9FED607A 	 flds s14,.L14+20
 275 0162 67EE877A 	 fmuls s15,s15,s14
 276 0166 FDEEE77A 	 ftosizs s15,s15
 277 016a 17EE902A 	 fmrs r2,s15
 278 016e 5F4B     	 ldr r3,.L14+32
 279 0170 1A60     	 str r2,[r3]
  80:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 280              	 .loc 1 80 0
 281 0172 5F4B     	 ldr r3,.L14+36
 282 0174 D3ED007A 	 flds s15,[r3]
 283 0178 9FED597A 	 flds s14,.L14+20
 284 017c 67EE877A 	 fmuls s15,s15,s14
 285 0180 FDEEE77A 	 ftosizs s15,s15
 286 0184 17EE902A 	 fmrs r2,s15
 287 0188 5A4B     	 ldr r3,.L14+40
 288 018a 1A60     	 str r2,[r3]
  81:../reference_generator.c **** 		fall_time = time_fall_input_s * SECOND;
 289              	 .loc 1 81 0
 290 018c 5A4B     	 ldr r3,.L14+44
 291 018e D3ED007A 	 flds s15,[r3]
 292 0192 9FED537A 	 flds s14,.L14+20
 293 0196 67EE877A 	 fmuls s15,s15,s14
 294 019a FDEEE77A 	 ftosizs s15,s15
 295 019e 17EE902A 	 fmrs r2,s15
 296 01a2 564B     	 ldr r3,.L14+48
 297 01a4 1A60     	 str r2,[r3]
  82:../reference_generator.c **** 
  83:../reference_generator.c **** //		high_level = 500;
  84:../reference_generator.c **** //		high_level_time = 0.5 * SECOND;
  85:../reference_generator.c **** //		low_level_time = 0.5 * SECOND;
  86:../reference_generator.c **** //		rise_time = 0.01 * SECOND;
  87:../reference_generator.c **** //		fall_time = 0.01 * SECOND;
  88:../reference_generator.c **** 		break;
 298              	 .loc 1 88 0
 299 01a6 3EE0     	 b .L8
 300              	.L7:
  89:../reference_generator.c **** 	case (REF_U):
  90:../reference_generator.c **** 		high_level = voltage_input;
 301              	 .loc 1 90 0
 302 01a8 574B     	 ldr r3,.L14+60
 303 01aa D3ED007A 	 flds s15,[r3]
 304 01ae FDEEE77A 	 ftosizs s15,s15
 305 01b2 17EE902A 	 fmrs r2,s15
 306 01b6 484B     	 ldr r3,.L14+12
 307 01b8 1A60     	 str r2,[r3]
  91:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 308              	 .loc 1 91 0
 309 01ba 484B     	 ldr r3,.L14+16
 310 01bc D3ED007A 	 flds s15,[r3]
 311 01c0 9FED477A 	 flds s14,.L14+20
 312 01c4 67EE877A 	 fmuls s15,s15,s14
 313 01c8 FDEEE77A 	 ftosizs s15,s15
 314 01cc 17EE902A 	 fmrs r2,s15
 315 01d0 444B     	 ldr r3,.L14+24
 316 01d2 1A60     	 str r2,[r3]
  92:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 317              	 .loc 1 92 0
 318 01d4 444B     	 ldr r3,.L14+28
 319 01d6 D3ED007A 	 flds s15,[r3]
 320 01da 9FED417A 	 flds s14,.L14+20
 321 01de 67EE877A 	 fmuls s15,s15,s14
 322 01e2 FDEEE77A 	 ftosizs s15,s15
 323 01e6 17EE902A 	 fmrs r2,s15
 324 01ea 404B     	 ldr r3,.L14+32
 325 01ec 1A60     	 str r2,[r3]
  93:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 326              	 .loc 1 93 0
 327 01ee 404B     	 ldr r3,.L14+36
 328 01f0 D3ED007A 	 flds s15,[r3]
 329 01f4 9FED3A7A 	 flds s14,.L14+20
 330 01f8 67EE877A 	 fmuls s15,s15,s14
 331 01fc FDEEE77A 	 ftosizs s15,s15
 332 0200 17EE902A 	 fmrs r2,s15
 333 0204 3B4B     	 ldr r3,.L14+40
 334 0206 1A60     	 str r2,[r3]
  94:../reference_generator.c **** 		fall_time = time_fall_input_s * SECOND;
 335              	 .loc 1 94 0
 336 0208 3B4B     	 ldr r3,.L14+44
 337 020a D3ED007A 	 flds s15,[r3]
 338 020e 9FED347A 	 flds s14,.L14+20
 339 0212 67EE877A 	 fmuls s15,s15,s14
 340 0216 FDEEE77A 	 ftosizs s15,s15
 341 021a 17EE902A 	 fmrs r2,s15
 342 021e 374B     	 ldr r3,.L14+48
 343 0220 1A60     	 str r2,[r3]
  95:../reference_generator.c **** 
  96:../reference_generator.c **** //		high_level = 2000;
  97:../reference_generator.c **** //		high_level_time = 5 * SECOND;
  98:../reference_generator.c **** //		low_level_time = 0 * SECOND;
  99:../reference_generator.c **** //		rise_time = 0 * SECOND;
 100:../reference_generator.c **** //		fall_time = 0 * SECOND;
 101:../reference_generator.c **** 		break;
 344              	 .loc 1 101 0
 345 0222 00E0     	 b .L8
 346              	.L13:
 102:../reference_generator.c **** 	default:
 103:../reference_generator.c **** 		break;
 347              	 .loc 1 103 0
 348 0224 00BF     	 nop
 349              	.L8:
 104:../reference_generator.c **** 	}
 105:../reference_generator.c **** 
 106:../reference_generator.c **** 	//No rise time
 107:../reference_generator.c **** 	if (0 == rise_time)
 350              	 .loc 1 107 0
 351 0226 334B     	 ldr r3,.L14+40
 352 0228 1B68     	 ldr r3,[r3]
 353 022a 002B     	 cmp r3,#0
 354 022c 09D1     	 bne .L9
 108:../reference_generator.c **** 	{
 109:../reference_generator.c **** 		rise_increment = high_level;
 355              	 .loc 1 109 0
 356 022e 2A4B     	 ldr r3,.L14+12
 357 0230 1B68     	 ldr r3,[r3]
 358 0232 07EE903A 	 fmsr s15,r3
 359 0236 F8EEE77A 	 fsitos s15,s15
 360 023a 344B     	 ldr r3,.L14+64
 361 023c C3ED007A 	 fsts s15,[r3]
 362 0240 10E0     	 b .L10
 363              	.L9:
 110:../reference_generator.c **** 	}
 111:../reference_generator.c **** 	else
 112:../reference_generator.c **** 	{
 113:../reference_generator.c **** 		rise_increment = (float_t)high_level / rise_time;
 364              	 .loc 1 113 0
 365 0242 254B     	 ldr r3,.L14+12
 366 0244 1B68     	 ldr r3,[r3]
 367 0246 07EE903A 	 fmsr s15,r3
 368 024a B8EEE77A 	 fsitos s14,s15
 369 024e 294B     	 ldr r3,.L14+40
 370 0250 1B68     	 ldr r3,[r3]
 371 0252 07EE903A 	 fmsr s15,r3
 372 0256 F8EEE77A 	 fsitos s15,s15
 373 025a C7EE277A 	 fdivs s15,s14,s15
 374 025e 2B4B     	 ldr r3,.L14+64
 375 0260 C3ED007A 	 fsts s15,[r3]
 376              	.L10:
 114:../reference_generator.c **** 	}
 115:../reference_generator.c **** 
 116:../reference_generator.c **** 	//No fall time
 117:../reference_generator.c **** 	if (0 == fall_time)
 377              	 .loc 1 117 0
 378 0264 254B     	 ldr r3,.L14+48
 379 0266 1B68     	 ldr r3,[r3]
 380 0268 002B     	 cmp r3,#0
 381 026a 09D1     	 bne .L11
 118:../reference_generator.c **** 	{
 119:../reference_generator.c **** 		fall_decrement = high_level;
 382              	 .loc 1 119 0
 383 026c 1A4B     	 ldr r3,.L14+12
 384 026e 1B68     	 ldr r3,[r3]
 385 0270 07EE903A 	 fmsr s15,r3
 386 0274 F8EEE77A 	 fsitos s15,s15
 387 0278 254B     	 ldr r3,.L14+68
 388 027a C3ED007A 	 fsts s15,[r3]
 389 027e 10E0     	 b .L12
 390              	.L11:
 120:../reference_generator.c **** 	}
 121:../reference_generator.c **** 	else
 122:../reference_generator.c **** 	{
 123:../reference_generator.c **** 		fall_decrement = (float_t)high_level / fall_time;
 391              	 .loc 1 123 0
 392 0280 154B     	 ldr r3,.L14+12
 393 0282 1B68     	 ldr r3,[r3]
 394 0284 07EE903A 	 fmsr s15,r3
 395 0288 B8EEE77A 	 fsitos s14,s15
 396 028c 1B4B     	 ldr r3,.L14+48
 397 028e 1B68     	 ldr r3,[r3]
 398 0290 07EE903A 	 fmsr s15,r3
 399 0294 F8EEE77A 	 fsitos s15,s15
 400 0298 C7EE277A 	 fdivs s15,s14,s15
 401 029c 1C4B     	 ldr r3,.L14+68
 402 029e C3ED007A 	 fsts s15,[r3]
 403              	.L12:
 124:../reference_generator.c **** 	}
 125:../reference_generator.c **** 
 126:../reference_generator.c **** 	reference = 0;
 404              	 .loc 1 126 0
 405 02a2 1C4B     	 ldr r3,.L14+72
 406 02a4 4FF00002 	 mov r2,#0
 407 02a8 1A60     	 str r2,[r3]
 127:../reference_generator.c **** 	reference_old = 0;
 408              	 .loc 1 127 0
 409 02aa 1B4B     	 ldr r3,.L14+76
 410 02ac 4FF00002 	 mov r2,#0
 411 02b0 1A60     	 str r2,[r3]
 412              	.LBB6:
 413              	.LBB7:
 414              	 .file 2 "C:/GitHub/Stepper_drive/Libraries/CMSIS/Include/cmsis_gcc.h"
   1:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /**************************************************************************//**
   2:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @version  V5.1.0
   5:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @date     20. December 2018
   6:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  ******************************************************************************/
   7:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /*
   8:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  10:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  12:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  16:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  18:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * limitations under the License.
  23:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
  24:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  25:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  28:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* ignore some GCC warnings */
  29:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic push
  30:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  34:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef __has_builtin
  36:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  38:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  39:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __ASM
  41:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __ASM                                  __asm
  42:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  43:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __INLINE
  44:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __INLINE                               inline
  45:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  46:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  49:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif                                           
  52:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  55:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __USED
  56:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  58:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __WEAK
  59:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  61:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED
  62:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  64:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  67:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  70:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  78:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  86:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  94:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 102:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 110:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __ALIGNED
 111:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 113:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __RESTRICT
 114:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 116:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 117:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 118:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   @{
 122:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 123:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 124:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /**
 125:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 129:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** {
 131:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** }
 133:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 134:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 135:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /**
 136:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 140:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 141:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** {
 142:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 415              	 .loc 2 142 0
 416              	
 417 02b2 72B6     	 cpsid i
 418              	
 419              	 .thumb
 420              	.LBE7:
 421              	.LBE6:
 128:../reference_generator.c **** 
 129:../reference_generator.c **** 	__disable_irq();
 130:../reference_generator.c **** 	interrupt_counter_ref_gen = 0;
 422              	 .loc 1 130 0
 423 02b4 194B     	 ldr r3,.L14+80
 424 02b6 0022     	 movs r2,#0
 425 02b8 1A60     	 str r2,[r3]
 426              	.LBB8:
 427              	.LBB9:
 131:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** }
 428              	 .loc 2 131 0
 429              	
 430 02ba 62B6     	 cpsie i
 431              	
 432              	 .thumb
 433              	.LBE9:
 434              	.LBE8:
 131:../reference_generator.c **** 	__enable_irq();
 132:../reference_generator.c **** 	ref_gen_status = STATUS_1_RISE;
 435              	 .loc 1 132 0
 436 02bc 184B     	 ldr r3,.L14+84
 437 02be 0122     	 movs r2,#1
 438 02c0 1A70     	 strb r2,[r3]
 133:../reference_generator.c **** }
 439              	 .loc 1 133 0
 440 02c2 BD46     	 mov sp,r7
 441              	.LCFI2:
 442              	 .cfi_def_cfa_register 13
 443              	 
 444 02c4 5DF8047B 	 ldr r7,[sp],#4
 445              	.LCFI3:
 446              	 .cfi_restore 7
 447              	 .cfi_def_cfa_offset 0
 448 02c8 7047     	 bx lr
 449              	.L15:
 450 02ca 00BF     	 .align 2
 451              	.L14:
 452 02cc 00000000 	 .word ref_type_select
 453 02d0 00000000 	 .word rotation_input
 454 02d4 00007A45 	 .word 1165623296
 455 02d8 00000000 	 .word high_level
 456 02dc 00000000 	 .word time_high_input_s
 457 02e0 00007A44 	 .word 1148846080
 458 02e4 00000000 	 .word high_level_time
 459 02e8 00000000 	 .word time_low_input_s
 460 02ec 00000000 	 .word low_level_time
 461 02f0 00000000 	 .word time_rise_input_s
 462 02f4 00000000 	 .word rise_time
 463 02f8 00000000 	 .word time_fall_input_s
 464 02fc 00000000 	 .word fall_time
 465 0300 00000000 	 .word rpm_input
 466 0304 00000000 	 .word current_input
 467 0308 00000000 	 .word voltage_input
 468 030c 00000000 	 .word rise_increment
 469 0310 00000000 	 .word fall_decrement
 470 0314 00000000 	 .word reference
 471 0318 00000000 	 .word reference_old
 472 031c 00000000 	 .word interrupt_counter_ref_gen
 473 0320 00000000 	 .word ref_gen_status
 474              	 .cfi_endproc
 475              	.LFE196:
 477              	 .section .text.reference_generator,"ax",%progbits
 478              	 .align 2
 479              	 .global reference_generator
 480              	 .thumb
 481              	 .thumb_func
 483              	reference_generator:
 484              	.LFB197:
 134:../reference_generator.c **** 
 135:../reference_generator.c **** void reference_generator(void)
 136:../reference_generator.c **** {
 485              	 .loc 1 136 0
 486              	 .cfi_startproc
 487              	 
 488              	 
 489              	 
 490 0000 80B4     	 push {r7}
 491              	.LCFI4:
 492              	 .cfi_def_cfa_offset 4
 493              	 .cfi_offset 7,-4
 494 0002 00AF     	 add r7,sp,#0
 495              	.LCFI5:
 496              	 .cfi_def_cfa_register 7
 137:../reference_generator.c **** 	switch (ref_gen_status)
 497              	 .loc 1 137 0
 498 0004 4F4B     	 ldr r3,.L38
 499 0006 1B78     	 ldrb r3,[r3]
 500 0008 013B     	 subs r3,r3,#1
 501 000a 032B     	 cmp r3,#3
 502 000c 70D8     	 bhi .L36
 503 000e 01A2     	 adr r2,.L19
 504 0010 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 505              	 .p2align 2
 506              	.L19:
 507 0014 25000000 	 .word .L18+1
 508 0018 57000000 	 .word .L20+1
 509 001c 75000000 	 .word .L21+1
 510 0020 A7000000 	 .word .L22+1
 511              	 .p2align 1
 512              	.L18:
 138:../reference_generator.c **** 	{
 139:../reference_generator.c **** 	case (STATUS_1_RISE):
 140:../reference_generator.c **** 		if (interrupt_counter_ref_gen >= rise_time)
 513              	 .loc 1 140 0
 514 0024 484B     	 ldr r3,.L38+4
 515 0026 1B68     	 ldr r3,[r3]
 516 0028 1A46     	 mov r2,r3
 517 002a 484B     	 ldr r3,.L38+8
 518 002c 1B68     	 ldr r3,[r3]
 519 002e 9A42     	 cmp r2,r3
 520 0030 05D8     	 bhi .L23
 141:../reference_generator.c **** 		{
 142:../reference_generator.c **** 			ref_gen_status = STATUS_2_HIGH_LEVEL;
 521              	 .loc 1 142 0
 522 0032 444B     	 ldr r3,.L38
 523 0034 0222     	 movs r2,#2
 524 0036 1A70     	 strb r2,[r3]
 143:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 525              	 .loc 1 143 0
 526 0038 444B     	 ldr r3,.L38+8
 527 003a 0022     	 movs r2,#0
 528 003c 1A60     	 str r2,[r3]
 529              	.L23:
 144:../reference_generator.c **** 		}
 145:../reference_generator.c **** 		reference += rise_increment;
 530              	 .loc 1 145 0
 531 003e 444B     	 ldr r3,.L38+12
 532 0040 93ED007A 	 flds s14,[r3]
 533 0044 434B     	 ldr r3,.L38+16
 534 0046 D3ED007A 	 flds s15,[r3]
 535 004a 77EE277A 	 fadds s15,s14,s15
 536 004e 404B     	 ldr r3,.L38+12
 537 0050 C3ED007A 	 fsts s15,[r3]
 146:../reference_generator.c **** 
 147:../reference_generator.c **** 		break;
 538              	 .loc 1 147 0
 539 0054 4DE0     	 b .L24
 540              	.L20:
 148:../reference_generator.c **** 
 149:../reference_generator.c **** 	case (STATUS_2_HIGH_LEVEL):
 150:../reference_generator.c **** 		if (interrupt_counter_ref_gen >= high_level_time)
 541              	 .loc 1 150 0
 542 0056 404B     	 ldr r3,.L38+20
 543 0058 1B68     	 ldr r3,[r3]
 544 005a 1A46     	 mov r2,r3
 545 005c 3B4B     	 ldr r3,.L38+8
 546 005e 1B68     	 ldr r3,[r3]
 547 0060 9A42     	 cmp r2,r3
 548 0062 06D8     	 bhi .L25
 151:../reference_generator.c **** 		{
 152:../reference_generator.c **** 			ref_gen_status = STATUS_3_FALL;
 549              	 .loc 1 152 0
 550 0064 374B     	 ldr r3,.L38
 551 0066 0322     	 movs r2,#3
 552 0068 1A70     	 strb r2,[r3]
 153:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 553              	 .loc 1 153 0
 554 006a 384B     	 ldr r3,.L38+8
 555 006c 0022     	 movs r2,#0
 556 006e 1A60     	 str r2,[r3]
 154:../reference_generator.c **** 		}
 155:../reference_generator.c **** 		break;
 557              	 .loc 1 155 0
 558 0070 3FE0     	 b .L24
 559              	.L25:
 560 0072 3EE0     	 b .L24
 561              	.L21:
 156:../reference_generator.c **** 
 157:../reference_generator.c **** 	case (STATUS_3_FALL):
 158:../reference_generator.c **** 	{
 159:../reference_generator.c **** 		if (interrupt_counter_ref_gen >= fall_time)
 562              	 .loc 1 159 0
 563 0074 394B     	 ldr r3,.L38+24
 564 0076 1B68     	 ldr r3,[r3]
 565 0078 1A46     	 mov r2,r3
 566 007a 344B     	 ldr r3,.L38+8
 567 007c 1B68     	 ldr r3,[r3]
 568 007e 9A42     	 cmp r2,r3
 569 0080 05D8     	 bhi .L26
 160:../reference_generator.c **** 		{
 161:../reference_generator.c **** 			ref_gen_status = STATUS_4_LOW_LEVEL;
 570              	 .loc 1 161 0
 571 0082 304B     	 ldr r3,.L38
 572 0084 0422     	 movs r2,#4
 573 0086 1A70     	 strb r2,[r3]
 162:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 574              	 .loc 1 162 0
 575 0088 304B     	 ldr r3,.L38+8
 576 008a 0022     	 movs r2,#0
 577 008c 1A60     	 str r2,[r3]
 578              	.L26:
 163:../reference_generator.c **** 		}
 164:../reference_generator.c **** 		reference -= fall_decrement;
 579              	 .loc 1 164 0
 580 008e 304B     	 ldr r3,.L38+12
 581 0090 93ED007A 	 flds s14,[r3]
 582 0094 324B     	 ldr r3,.L38+28
 583 0096 D3ED007A 	 flds s15,[r3]
 584 009a 77EE677A 	 fsubs s15,s14,s15
 585 009e 2C4B     	 ldr r3,.L38+12
 586 00a0 C3ED007A 	 fsts s15,[r3]
 165:../reference_generator.c **** 	}
 166:../reference_generator.c **** 	break;
 587              	 .loc 1 166 0
 588 00a4 25E0     	 b .L24
 589              	.L22:
 167:../reference_generator.c **** 
 168:../reference_generator.c **** 	case (STATUS_4_LOW_LEVEL):
 169:../reference_generator.c **** 		if ((interrupt_counter_ref_gen >= low_level_time) && (repeat_motion == 0))
 590              	 .loc 1 169 0
 591 00a6 2F4B     	 ldr r3,.L38+32
 592 00a8 1B68     	 ldr r3,[r3]
 593 00aa 1A46     	 mov r2,r3
 594 00ac 274B     	 ldr r3,.L38+8
 595 00ae 1B68     	 ldr r3,[r3]
 596 00b0 9A42     	 cmp r2,r3
 597 00b2 0AD8     	 bhi .L27
 598              	 .loc 1 169 0 is_stmt 0 discriminator 1
 599 00b4 2C4B     	 ldr r3,.L38+36
 600 00b6 1B78     	 ldrb r3,[r3]
 601 00b8 002B     	 cmp r3,#0
 602 00ba 06D1     	 bne .L27
 170:../reference_generator.c **** 		{
 171:../reference_generator.c **** 			ref_gen_status = STATUS_0_DISABLED;
 603              	 .loc 1 171 0 is_stmt 1
 604 00bc 214B     	 ldr r3,.L38
 605 00be 0022     	 movs r2,#0
 606 00c0 1A70     	 strb r2,[r3]
 172:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 607              	 .loc 1 172 0
 608 00c2 224B     	 ldr r3,.L38+8
 609 00c4 0022     	 movs r2,#0
 610 00c6 1A60     	 str r2,[r3]
 611 00c8 11E0     	 b .L28
 612              	.L27:
 173:../reference_generator.c **** 		}
 174:../reference_generator.c **** 		else if ((interrupt_counter_ref_gen >= low_level_time) && (repeat_motion == 1))
 613              	 .loc 1 174 0
 614 00ca 264B     	 ldr r3,.L38+32
 615 00cc 1B68     	 ldr r3,[r3]
 616 00ce 1A46     	 mov r2,r3
 617 00d0 1E4B     	 ldr r3,.L38+8
 618 00d2 1B68     	 ldr r3,[r3]
 619 00d4 9A42     	 cmp r2,r3
 620 00d6 0AD8     	 bhi .L28
 621              	 .loc 1 174 0 is_stmt 0 discriminator 1
 622 00d8 234B     	 ldr r3,.L38+36
 623 00da 1B78     	 ldrb r3,[r3]
 624 00dc 012B     	 cmp r3,#1
 625 00de 06D1     	 bne .L28
 175:../reference_generator.c **** 		{
 176:../reference_generator.c **** 			ref_gen_status = STATUS_1_RISE;
 626              	 .loc 1 176 0 is_stmt 1
 627 00e0 184B     	 ldr r3,.L38
 628 00e2 0122     	 movs r2,#1
 629 00e4 1A70     	 strb r2,[r3]
 177:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 630              	 .loc 1 177 0
 631 00e6 194B     	 ldr r3,.L38+8
 632 00e8 0022     	 movs r2,#0
 633 00ea 1A60     	 str r2,[r3]
 178:../reference_generator.c **** 		}
 179:../reference_generator.c **** 		break;
 634              	 .loc 1 179 0
 635 00ec 01E0     	 b .L24
 636              	.L28:
 637 00ee 00E0     	 b .L24
 638              	.L36:
 180:../reference_generator.c **** 
 181:../reference_generator.c **** 	default:
 182:../reference_generator.c **** 		break;
 639              	 .loc 1 182 0
 640 00f0 00BF     	 nop
 641              	.L24:
 183:../reference_generator.c **** 	}
 184:../reference_generator.c **** 
 185:../reference_generator.c **** 	switch (ref_type_select)
 642              	 .loc 1 185 0
 643 00f2 1E4B     	 ldr r3,.L38+40
 644 00f4 1B78     	 ldrb r3,[r3]
 645 00f6 032B     	 cmp r3,#3
 646 00f8 1ED8     	 bhi .L37
 647 00fa 01A2     	 adr r2,.L31
 648 00fc 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 649              	 .p2align 2
 650              	.L31:
 651 0100 11010000 	 .word .L30+1
 652 0104 1B010000 	 .word .L32+1
 653 0108 25010000 	 .word .L33+1
 654 010c 2F010000 	 .word .L34+1
 655              	 .p2align 1
 656              	.L30:
 186:../reference_generator.c **** 	{
 187:../reference_generator.c **** 	case (REF_POS):
 188:../reference_generator.c **** 		pos_ref = reference;
 657              	 .loc 1 188 0
 658 0110 0F4B     	 ldr r3,.L38+12
 659 0112 1B68     	 ldr r3,[r3]
 660 0114 164A     	 ldr r2,.L38+44
 661 0116 1360     	 str r3,[r2]
 189:../reference_generator.c **** 		break;
 662              	 .loc 1 189 0
 663 0118 0FE0     	 b .L16
 664              	.L32:
 190:../reference_generator.c **** 	case (REF_SPD):
 191:../reference_generator.c **** 		spd_ref = reference;
 665              	 .loc 1 191 0
 666 011a 0D4B     	 ldr r3,.L38+12
 667 011c 1B68     	 ldr r3,[r3]
 668 011e 154A     	 ldr r2,.L38+48
 669 0120 1360     	 str r3,[r2]
 192:../reference_generator.c **** 		break;
 670              	 .loc 1 192 0
 671 0122 0AE0     	 b .L16
 672              	.L33:
 193:../reference_generator.c **** 	case (REF_I):
 194:../reference_generator.c **** 		i_q_ref = reference;
 673              	 .loc 1 194 0
 674 0124 0A4B     	 ldr r3,.L38+12
 675 0126 1B68     	 ldr r3,[r3]
 676 0128 134A     	 ldr r2,.L38+52
 677 012a 1360     	 str r3,[r2]
 195:../reference_generator.c **** 		break;
 678              	 .loc 1 195 0
 679 012c 05E0     	 b .L16
 680              	.L34:
 196:../reference_generator.c **** 	case (REF_U):
 197:../reference_generator.c **** 		u_q_ref = reference;
 681              	 .loc 1 197 0
 682 012e 084B     	 ldr r3,.L38+12
 683 0130 1B68     	 ldr r3,[r3]
 684 0132 124A     	 ldr r2,.L38+56
 685 0134 1360     	 str r3,[r2]
 198:../reference_generator.c **** 		break;
 686              	 .loc 1 198 0
 687 0136 00E0     	 b .L16
 688              	.L37:
 199:../reference_generator.c **** 	default:
 200:../reference_generator.c **** 		break;
 689              	 .loc 1 200 0
 690 0138 00BF     	 nop
 691              	.L16:
 201:../reference_generator.c **** 	}
 202:../reference_generator.c **** }
 692              	 .loc 1 202 0
 693 013a BD46     	 mov sp,r7
 694              	.LCFI6:
 695              	 .cfi_def_cfa_register 13
 696              	 
 697 013c 5DF8047B 	 ldr r7,[sp],#4
 698              	.LCFI7:
 699              	 .cfi_restore 7
 700              	 .cfi_def_cfa_offset 0
 701 0140 7047     	 bx lr
 702              	.L39:
 703 0142 00BF     	 .align 2
 704              	.L38:
 705 0144 00000000 	 .word ref_gen_status
 706 0148 00000000 	 .word rise_time
 707 014c 00000000 	 .word interrupt_counter_ref_gen
 708 0150 00000000 	 .word reference
 709 0154 00000000 	 .word rise_increment
 710 0158 00000000 	 .word high_level_time
 711 015c 00000000 	 .word fall_time
 712 0160 00000000 	 .word fall_decrement
 713 0164 00000000 	 .word low_level_time
 714 0168 00000000 	 .word repeat_motion
 715 016c 00000000 	 .word ref_type_select
 716 0170 00000000 	 .word pos_ref
 717 0174 00000000 	 .word spd_ref
 718 0178 00000000 	 .word i_q_ref
 719 017c 00000000 	 .word u_q_ref
 720              	 .cfi_endproc
 721              	.LFE197:
 723              	 .text
 724              	.Letext0:
 725              	 .file 3 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 726              	 .file 4 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 727              	 .file 5 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\math.h"
 728              	 .file 6 "../reference_generator.h"
 729              	 .file 7 "C:/GitHub/Stepper_drive/Libraries/CMSIS/Include/core_cm4.h"
 730              	 .file 8 "../main.h"
 731              	 .file 9 "../pi_regulator.h"
DEFINED SYMBOLS
                            *ABS*:00000000 reference_generator.c
                            *COM*:00000004 CCU8_CC8_CR1_CR1_Value
    {standard input}:25     .bss.interrupt_counter_ref_gen:00000000 interrupt_counter_ref_gen
    {standard input}:22     .bss.interrupt_counter_ref_gen:00000000 $d
    {standard input}:31     .bss.ref_gen_status:00000000 ref_gen_status
    {standard input}:32     .bss.ref_gen_status:00000000 $d
                            *COM*:00000004 high_level
                            *COM*:00000004 high_level_time
                            *COM*:00000004 rise_time
                            *COM*:00000004 rise_increment
                            *COM*:00000004 fall_time
                            *COM*:00000004 fall_decrement
                            *COM*:00000004 low_level
                            *COM*:00000004 low_level_time
    {standard input}:45     .data.repeat_motion:00000000 repeat_motion
    {standard input}:52     .bss.time_rise_input_s:00000000 time_rise_input_s
    {standard input}:49     .bss.time_rise_input_s:00000000 $d
    {standard input}:59     .bss.time_fall_input_s:00000000 time_fall_input_s
    {standard input}:56     .bss.time_fall_input_s:00000000 $d
    {standard input}:66     .bss.time_high_input_s:00000000 time_high_input_s
    {standard input}:63     .bss.time_high_input_s:00000000 $d
    {standard input}:73     .bss.time_low_input_s:00000000 time_low_input_s
    {standard input}:70     .bss.time_low_input_s:00000000 $d
    {standard input}:80     .bss.current_input:00000000 current_input
    {standard input}:77     .bss.current_input:00000000 $d
    {standard input}:87     .bss.voltage_input:00000000 voltage_input
    {standard input}:84     .bss.voltage_input:00000000 $d
    {standard input}:94     .bss.rpm_input:00000000 rpm_input
    {standard input}:91     .bss.rpm_input:00000000 $d
    {standard input}:101    .bss.rotation_input:00000000 rotation_input
    {standard input}:98     .bss.rotation_input:00000000 $d
    {standard input}:108    .bss.reference:00000000 reference
    {standard input}:105    .bss.reference:00000000 $d
    {standard input}:115    .bss.reference_old:00000000 reference_old
    {standard input}:112    .bss.reference_old:00000000 $d
    {standard input}:121    .bss.ref_type_select:00000000 ref_type_select
    {standard input}:122    .bss.ref_type_select:00000000 $d
    {standard input}:124    .text.reference_generator_compute:00000000 $t
    {standard input}:129    .text.reference_generator_compute:00000000 reference_generator_compute
    {standard input}:153    .text.reference_generator_compute:00000014 $d
    {standard input}:157    .text.reference_generator_compute:00000024 $t
    {standard input}:452    .text.reference_generator_compute:000002cc $d
    {standard input}:478    .text.reference_generator:00000000 $t
    {standard input}:483    .text.reference_generator:00000000 reference_generator
    {standard input}:507    .text.reference_generator:00000014 $d
    {standard input}:511    .text.reference_generator:00000024 $t
    {standard input}:651    .text.reference_generator:00000100 $d
    {standard input}:655    .text.reference_generator:00000110 $t
    {standard input}:705    .text.reference_generator:00000144 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
pos_ref
spd_ref
i_q_ref
u_q_ref
