   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "reference_generator.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .comm CCU8_CC8_CR1_CR1_Value,4,4
  20              	 .global interrupt_counter_ref_gen
  21              	 .section .bss.interrupt_counter_ref_gen,"aw",%nobits
  22              	 .align 2
  25              	interrupt_counter_ref_gen:
  26 0000 00000000 	 .space 4
  27              	 .global ref_gen_status
  28              	 .section .bss.ref_gen_status,"aw",%nobits
  31              	ref_gen_status:
  32 0000 00       	 .space 1
  33              	 .comm high_level,4,4
  34              	 .comm high_level_time,4,4
  35              	 .comm rise_time,4,4
  36              	 .comm rise_increment,4,4
  37              	 .comm fall_time,4,4
  38              	 .comm fall_decrement,4,4
  39              	 .comm low_level,4,4
  40              	 .comm low_level_time,4,4
  41              	 .global repeat_motion
  42              	 .section .data.repeat_motion,"aw",%progbits
  45              	repeat_motion:
  46 0000 01       	 .byte 1
  47              	 .global time_rise_input_s
  48              	 .section .bss.time_rise_input_s,"aw",%nobits
  49              	 .align 2
  52              	time_rise_input_s:
  53 0000 00000000 	 .space 4
  54              	 .global time_fall_input_s
  55              	 .section .bss.time_fall_input_s,"aw",%nobits
  56              	 .align 2
  59              	time_fall_input_s:
  60 0000 00000000 	 .space 4
  61              	 .global time_high_input_s
  62              	 .section .bss.time_high_input_s,"aw",%nobits
  63              	 .align 2
  66              	time_high_input_s:
  67 0000 00000000 	 .space 4
  68              	 .global time_low_input_s
  69              	 .section .bss.time_low_input_s,"aw",%nobits
  70              	 .align 2
  73              	time_low_input_s:
  74 0000 00000000 	 .space 4
  75              	 .global current_input
  76              	 .section .bss.current_input,"aw",%nobits
  77              	 .align 2
  80              	current_input:
  81 0000 00000000 	 .space 4
  82              	 .global voltage_input
  83              	 .section .bss.voltage_input,"aw",%nobits
  84              	 .align 2
  87              	voltage_input:
  88 0000 00000000 	 .space 4
  89              	 .global rpm_input
  90              	 .section .bss.rpm_input,"aw",%nobits
  91              	 .align 2
  94              	rpm_input:
  95 0000 00000000 	 .space 4
  96              	 .global rotation_input
  97              	 .section .bss.rotation_input,"aw",%nobits
  98              	 .align 2
 101              	rotation_input:
 102 0000 00000000 	 .space 4
 103              	 .global reference
 104              	 .section .bss.reference,"aw",%nobits
 105              	 .align 2
 108              	reference:
 109 0000 00000000 	 .space 4
 110              	 .global reference_old
 111              	 .section .bss.reference_old,"aw",%nobits
 112              	 .align 2
 115              	reference_old:
 116 0000 00000000 	 .space 4
 117              	 .global ref_type_select
 118              	 .section .bss.ref_type_select,"aw",%nobits
 121              	ref_type_select:
 122 0000 00       	 .space 1
 123              	 .section .text.reference_generator_compute,"ax",%progbits
 124              	 .align 2
 125              	 .global reference_generator_compute
 126              	 .thumb
 127              	 .thumb_func
 129              	reference_generator_compute:
 130              	.LFB196:
 131              	 .file 1 "../reference_generator.c"
   1:../reference_generator.c **** #include <stdint.h>
   2:../reference_generator.c **** #include <stdbool.h>
   3:../reference_generator.c **** #include "reference_generator.h"
   4:../reference_generator.c **** #include "driver_adc.h"
   5:../reference_generator.c **** #include "pi_regulator.h"
   6:../reference_generator.c **** #include "state_machine.h"
   7:../reference_generator.c **** #include "transform.h"
   8:../reference_generator.c **** #include <math.h>
   9:../reference_generator.c **** 
  10:../reference_generator.c **** // For reference Time = [ms] | high_level = motor counts
  11:../reference_generator.c **** uint32_t interrupt_counter_ref_gen = 0;
  12:../reference_generator.c **** 
  13:../reference_generator.c **** status_ref_gen ref_gen_status = 0; // 0 - disabled, 1 - rise, 2 - high, 3 - fall, 4 - low
  14:../reference_generator.c **** 
  15:../reference_generator.c **** int32_t high_level;		 // final reference
  16:../reference_generator.c **** int32_t high_level_time; // time to hold final reference
  17:../reference_generator.c **** 
  18:../reference_generator.c **** int32_t rise_time; // time to get to final reference
  19:../reference_generator.c **** float_t rise_increment;
  20:../reference_generator.c **** 
  21:../reference_generator.c **** int32_t fall_time; // time to get to initial reference
  22:../reference_generator.c **** float_t fall_decrement;
  23:../reference_generator.c **** 
  24:../reference_generator.c **** int32_t low_level;		// initial reference = 0
  25:../reference_generator.c **** int32_t low_level_time; // time to hold initial reference
  26:../reference_generator.c **** 
  27:../reference_generator.c **** uint8_t repeat_motion = 1; // 0 = NO | 1 = YES
  28:../reference_generator.c **** 
  29:../reference_generator.c **** float_t time_rise_input_s = 0;
  30:../reference_generator.c **** float_t time_fall_input_s = 0;
  31:../reference_generator.c **** float_t time_high_input_s = 0;
  32:../reference_generator.c **** float_t time_low_input_s = 0;
  33:../reference_generator.c **** 
  34:../reference_generator.c **** float_t current_input = 0; // 1[A] ~= 820[i.u]
  35:../reference_generator.c **** float_t voltage_input = 0;
  36:../reference_generator.c **** float_t rpm_input = 0;	  // rpm_min = 30 = 1[iu/ms] | use increments of 30 for use of computation
  37:../reference_generator.c **** float_t rotation_input = 0; // number of full rotation | 1[rot] = 2000[iu]
  38:../reference_generator.c **** 
  39:../reference_generator.c **** float_t reference = 0;
  40:../reference_generator.c **** float_t reference_old = 0;
  41:../reference_generator.c **** 
  42:../reference_generator.c **** ref_type ref_type_select = 0;
  43:../reference_generator.c **** 
  44:../reference_generator.c **** void reference_generator_compute(void)
  45:../reference_generator.c **** {
 132              	 .loc 1 45 0
 133              	 .cfi_startproc
 134              	 
 135              	 
 136              	 
 137 0000 80B4     	 push {r7}
 138              	.LCFI0:
 139              	 .cfi_def_cfa_offset 4
 140              	 .cfi_offset 7,-4
 141 0002 00AF     	 add r7,sp,#0
 142              	.LCFI1:
 143              	 .cfi_def_cfa_register 7
  46:../reference_generator.c **** 	// Compute human data inputs into machine outputs
  47:../reference_generator.c **** 	switch (ref_type_select)
 144              	 .loc 1 47 0
 145 0004 A54B     	 ldr r3,.L10
 146 0006 1B78     	 ldrb r3,[r3]
 147 0008 032B     	 cmp r3,#3
 148 000a 00F20F81 	 bhi .L9
 149 000e 01A2     	 adr r2,.L4
 150 0010 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 151              	 .p2align 2
 152              	.L4:
 153 0014 25000000 	 .word .L3+1
 154 0018 A9000000 	 .word .L5+1
 155 001c 2D010000 	 .word .L6+1
 156 0020 A9010000 	 .word .L7+1
 157              	 .p2align 1
 158              	.L3:
  48:../reference_generator.c **** 	{
  49:../reference_generator.c **** 	case (REF_POS):
  50:../reference_generator.c **** 		high_level = rotation_input * ROTATION_IU;
 159              	 .loc 1 50 0
 160 0024 9E4B     	 ldr r3,.L10+4
 161 0026 D3ED007A 	 flds s15,[r3]
 162 002a 9FED9E7A 	 flds s14,.L10+8
 163 002e 67EE877A 	 fmuls s15,s15,s14
 164 0032 FDEEE77A 	 ftosizs s15,s15
 165 0036 17EE902A 	 fmrs r2,s15
 166 003a 9B4B     	 ldr r3,.L10+12
 167 003c 1A60     	 str r2,[r3]
  51:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 168              	 .loc 1 51 0
 169 003e 9B4B     	 ldr r3,.L10+16
 170 0040 D3ED007A 	 flds s15,[r3]
 171 0044 9FED9A7A 	 flds s14,.L10+20
 172 0048 67EE877A 	 fmuls s15,s15,s14
 173 004c FDEEE77A 	 ftosizs s15,s15
 174 0050 17EE902A 	 fmrs r2,s15
 175 0054 974B     	 ldr r3,.L10+24
 176 0056 1A60     	 str r2,[r3]
  52:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 177              	 .loc 1 52 0
 178 0058 974B     	 ldr r3,.L10+28
 179 005a D3ED007A 	 flds s15,[r3]
 180 005e 9FED947A 	 flds s14,.L10+20
 181 0062 67EE877A 	 fmuls s15,s15,s14
 182 0066 FDEEE77A 	 ftosizs s15,s15
 183 006a 17EE902A 	 fmrs r2,s15
 184 006e 934B     	 ldr r3,.L10+32
 185 0070 1A60     	 str r2,[r3]
  53:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 186              	 .loc 1 53 0
 187 0072 934B     	 ldr r3,.L10+36
 188 0074 D3ED007A 	 flds s15,[r3]
 189 0078 9FED8D7A 	 flds s14,.L10+20
 190 007c 67EE877A 	 fmuls s15,s15,s14
 191 0080 FDEEE77A 	 ftosizs s15,s15
 192 0084 17EE902A 	 fmrs r2,s15
 193 0088 8E4B     	 ldr r3,.L10+40
 194 008a 1A60     	 str r2,[r3]
  54:../reference_generator.c **** 		fall_time = time_fall_input_s * SECOND;
 195              	 .loc 1 54 0
 196 008c 8E4B     	 ldr r3,.L10+44
 197 008e D3ED007A 	 flds s15,[r3]
 198 0092 9FED877A 	 flds s14,.L10+20
 199 0096 67EE877A 	 fmuls s15,s15,s14
 200 009a FDEEE77A 	 ftosizs s15,s15
 201 009e 17EE902A 	 fmrs r2,s15
 202 00a2 8A4B     	 ldr r3,.L10+48
 203 00a4 1A60     	 str r2,[r3]
  55:../reference_generator.c **** 		break;
 204              	 .loc 1 55 0
 205 00a6 C2E0     	 b .L8
 206              	.L5:
  56:../reference_generator.c **** 	case (REF_SPD):
  57:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 207              	 .loc 1 57 0
 208 00a8 854B     	 ldr r3,.L10+36
 209 00aa D3ED007A 	 flds s15,[r3]
 210 00ae 9FED807A 	 flds s14,.L10+20
 211 00b2 67EE877A 	 fmuls s15,s15,s14
 212 00b6 FDEEE77A 	 ftosizs s15,s15
 213 00ba 17EE902A 	 fmrs r2,s15
 214 00be 814B     	 ldr r3,.L10+40
 215 00c0 1A60     	 str r2,[r3]
  58:../reference_generator.c **** 		fall_time = time_high_input_s * SECOND;
 216              	 .loc 1 58 0
 217 00c2 7A4B     	 ldr r3,.L10+16
 218 00c4 D3ED007A 	 flds s15,[r3]
 219 00c8 9FED797A 	 flds s14,.L10+20
 220 00cc 67EE877A 	 fmuls s15,s15,s14
 221 00d0 FDEEE77A 	 ftosizs s15,s15
 222 00d4 17EE902A 	 fmrs r2,s15
 223 00d8 7C4B     	 ldr r3,.L10+48
 224 00da 1A60     	 str r2,[r3]
  59:../reference_generator.c **** 		high_level = rpm_input / (MINUTE / ROTATION_IU);
 225              	 .loc 1 59 0
 226 00dc 7C4B     	 ldr r3,.L10+52
 227 00de D3ED007A 	 flds s15,[r3]
 228 00e2 B3EE0E7A 	 fconsts s14,#62
 229 00e6 C7EE877A 	 fdivs s15,s15,s14
 230 00ea FDEEE77A 	 ftosizs s15,s15
 231 00ee 17EE902A 	 fmrs r2,s15
 232 00f2 6D4B     	 ldr r3,.L10+12
 233 00f4 1A60     	 str r2,[r3]
  60:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 234              	 .loc 1 60 0
 235 00f6 6D4B     	 ldr r3,.L10+16
 236 00f8 D3ED007A 	 flds s15,[r3]
 237 00fc 9FED6C7A 	 flds s14,.L10+20
 238 0100 67EE877A 	 fmuls s15,s15,s14
 239 0104 FDEEE77A 	 ftosizs s15,s15
 240 0108 17EE902A 	 fmrs r2,s15
 241 010c 694B     	 ldr r3,.L10+24
 242 010e 1A60     	 str r2,[r3]
  61:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 243              	 .loc 1 61 0
 244 0110 694B     	 ldr r3,.L10+28
 245 0112 D3ED007A 	 flds s15,[r3]
 246 0116 9FED667A 	 flds s14,.L10+20
 247 011a 67EE877A 	 fmuls s15,s15,s14
 248 011e FDEEE77A 	 ftosizs s15,s15
 249 0122 17EE902A 	 fmrs r2,s15
 250 0126 654B     	 ldr r3,.L10+32
 251 0128 1A60     	 str r2,[r3]
  62:../reference_generator.c **** 		break;
 252              	 .loc 1 62 0
 253 012a 80E0     	 b .L8
 254              	.L6:
  63:../reference_generator.c **** 	case (REF_I):
  64:../reference_generator.c **** 		high_level = current_input;
 255              	 .loc 1 64 0
 256 012c 694B     	 ldr r3,.L10+56
 257 012e D3ED007A 	 flds s15,[r3]
 258 0132 FDEEE77A 	 ftosizs s15,s15
 259 0136 17EE902A 	 fmrs r2,s15
 260 013a 5B4B     	 ldr r3,.L10+12
 261 013c 1A60     	 str r2,[r3]
  65:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 262              	 .loc 1 65 0
 263 013e 5B4B     	 ldr r3,.L10+16
 264 0140 D3ED007A 	 flds s15,[r3]
 265 0144 9FED5A7A 	 flds s14,.L10+20
 266 0148 67EE877A 	 fmuls s15,s15,s14
 267 014c FDEEE77A 	 ftosizs s15,s15
 268 0150 17EE902A 	 fmrs r2,s15
 269 0154 574B     	 ldr r3,.L10+24
 270 0156 1A60     	 str r2,[r3]
  66:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 271              	 .loc 1 66 0
 272 0158 574B     	 ldr r3,.L10+28
 273 015a D3ED007A 	 flds s15,[r3]
 274 015e 9FED547A 	 flds s14,.L10+20
 275 0162 67EE877A 	 fmuls s15,s15,s14
 276 0166 FDEEE77A 	 ftosizs s15,s15
 277 016a 17EE902A 	 fmrs r2,s15
 278 016e 534B     	 ldr r3,.L10+32
 279 0170 1A60     	 str r2,[r3]
  67:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 280              	 .loc 1 67 0
 281 0172 534B     	 ldr r3,.L10+36
 282 0174 D3ED007A 	 flds s15,[r3]
 283 0178 9FED4D7A 	 flds s14,.L10+20
 284 017c 67EE877A 	 fmuls s15,s15,s14
 285 0180 FDEEE77A 	 ftosizs s15,s15
 286 0184 17EE902A 	 fmrs r2,s15
 287 0188 4E4B     	 ldr r3,.L10+40
 288 018a 1A60     	 str r2,[r3]
  68:../reference_generator.c **** 		fall_time = time_fall_input_s * SECOND;
 289              	 .loc 1 68 0
 290 018c 4E4B     	 ldr r3,.L10+44
 291 018e D3ED007A 	 flds s15,[r3]
 292 0192 9FED477A 	 flds s14,.L10+20
 293 0196 67EE877A 	 fmuls s15,s15,s14
 294 019a FDEEE77A 	 ftosizs s15,s15
 295 019e 17EE902A 	 fmrs r2,s15
 296 01a2 4A4B     	 ldr r3,.L10+48
 297 01a4 1A60     	 str r2,[r3]
  69:../reference_generator.c **** 		break;
 298              	 .loc 1 69 0
 299 01a6 42E0     	 b .L8
 300              	.L7:
  70:../reference_generator.c **** 	case (REF_U):
  71:../reference_generator.c **** 		high_level = voltage_input;
 301              	 .loc 1 71 0
 302 01a8 4B4B     	 ldr r3,.L10+60
 303 01aa D3ED007A 	 flds s15,[r3]
 304 01ae FDEEE77A 	 ftosizs s15,s15
 305 01b2 17EE902A 	 fmrs r2,s15
 306 01b6 3C4B     	 ldr r3,.L10+12
 307 01b8 1A60     	 str r2,[r3]
  72:../reference_generator.c **** 		high_level_time = time_high_input_s * SECOND;
 308              	 .loc 1 72 0
 309 01ba 3C4B     	 ldr r3,.L10+16
 310 01bc D3ED007A 	 flds s15,[r3]
 311 01c0 9FED3B7A 	 flds s14,.L10+20
 312 01c4 67EE877A 	 fmuls s15,s15,s14
 313 01c8 FDEEE77A 	 ftosizs s15,s15
 314 01cc 17EE902A 	 fmrs r2,s15
 315 01d0 384B     	 ldr r3,.L10+24
 316 01d2 1A60     	 str r2,[r3]
  73:../reference_generator.c **** 		low_level_time = time_low_input_s * SECOND;
 317              	 .loc 1 73 0
 318 01d4 384B     	 ldr r3,.L10+28
 319 01d6 D3ED007A 	 flds s15,[r3]
 320 01da 9FED357A 	 flds s14,.L10+20
 321 01de 67EE877A 	 fmuls s15,s15,s14
 322 01e2 FDEEE77A 	 ftosizs s15,s15
 323 01e6 17EE902A 	 fmrs r2,s15
 324 01ea 344B     	 ldr r3,.L10+32
 325 01ec 1A60     	 str r2,[r3]
  74:../reference_generator.c **** 		rise_time = time_rise_input_s * SECOND;
 326              	 .loc 1 74 0
 327 01ee 344B     	 ldr r3,.L10+36
 328 01f0 D3ED007A 	 flds s15,[r3]
 329 01f4 9FED2E7A 	 flds s14,.L10+20
 330 01f8 67EE877A 	 fmuls s15,s15,s14
 331 01fc FDEEE77A 	 ftosizs s15,s15
 332 0200 17EE902A 	 fmrs r2,s15
 333 0204 2F4B     	 ldr r3,.L10+40
 334 0206 1A60     	 str r2,[r3]
  75:../reference_generator.c **** 		fall_time = time_fall_input_s * SECOND;
 335              	 .loc 1 75 0
 336 0208 2F4B     	 ldr r3,.L10+44
 337 020a D3ED007A 	 flds s15,[r3]
 338 020e 9FED287A 	 flds s14,.L10+20
 339 0212 67EE877A 	 fmuls s15,s15,s14
 340 0216 FDEEE77A 	 ftosizs s15,s15
 341 021a 17EE902A 	 fmrs r2,s15
 342 021e 2B4B     	 ldr r3,.L10+48
 343 0220 1A60     	 str r2,[r3]
  76:../reference_generator.c **** 		u_q_ref = reference;
 344              	 .loc 1 76 0
 345 0222 2E4B     	 ldr r3,.L10+64
 346 0224 1B68     	 ldr r3,[r3]
 347 0226 2E4A     	 ldr r2,.L10+68
 348 0228 1360     	 str r3,[r2]
  77:../reference_generator.c **** 		break;
 349              	 .loc 1 77 0
 350 022a 00E0     	 b .L8
 351              	.L9:
  78:../reference_generator.c **** 	default:
  79:../reference_generator.c **** 		break;
 352              	 .loc 1 79 0
 353 022c 00BF     	 nop
 354              	.L8:
  80:../reference_generator.c **** 	}
  81:../reference_generator.c **** 
  82:../reference_generator.c **** 	rise_increment = (float_t)high_level / rise_time;
 355              	 .loc 1 82 0
 356 022e 1E4B     	 ldr r3,.L10+12
 357 0230 1B68     	 ldr r3,[r3]
 358 0232 07EE903A 	 fmsr s15,r3
 359 0236 B8EEE77A 	 fsitos s14,s15
 360 023a 224B     	 ldr r3,.L10+40
 361 023c 1B68     	 ldr r3,[r3]
 362 023e 07EE903A 	 fmsr s15,r3
 363 0242 F8EEE77A 	 fsitos s15,s15
 364 0246 C7EE277A 	 fdivs s15,s14,s15
 365 024a 264B     	 ldr r3,.L10+72
 366 024c C3ED007A 	 fsts s15,[r3]
  83:../reference_generator.c **** 	fall_decrement = (float_t)high_level / fall_time;
 367              	 .loc 1 83 0
 368 0250 154B     	 ldr r3,.L10+12
 369 0252 1B68     	 ldr r3,[r3]
 370 0254 07EE903A 	 fmsr s15,r3
 371 0258 B8EEE77A 	 fsitos s14,s15
 372 025c 1B4B     	 ldr r3,.L10+48
 373 025e 1B68     	 ldr r3,[r3]
 374 0260 07EE903A 	 fmsr s15,r3
 375 0264 F8EEE77A 	 fsitos s15,s15
 376 0268 C7EE277A 	 fdivs s15,s14,s15
 377 026c 1E4B     	 ldr r3,.L10+76
 378 026e C3ED007A 	 fsts s15,[r3]
  84:../reference_generator.c **** 	reference = 0;
 379              	 .loc 1 84 0
 380 0272 1A4B     	 ldr r3,.L10+64
 381 0274 4FF00002 	 mov r2,#0
 382 0278 1A60     	 str r2,[r3]
  85:../reference_generator.c **** 	reference_old = 0;
 383              	 .loc 1 85 0
 384 027a 1C4B     	 ldr r3,.L10+80
 385 027c 4FF00002 	 mov r2,#0
 386 0280 1A60     	 str r2,[r3]
 387              	.LBB6:
 388              	.LBB7:
 389              	 .file 2 "C:/GitHub/Stepper_drive/Libraries/CMSIS/Include/cmsis_gcc.h"
   1:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /**************************************************************************//**
   2:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @version  V5.1.0
   5:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @date     20. December 2018
   6:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  ******************************************************************************/
   7:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /*
   8:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  10:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  12:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  16:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  18:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  * limitations under the License.
  23:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
  24:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  25:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  28:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* ignore some GCC warnings */
  29:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic push
  30:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  34:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef __has_builtin
  36:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  38:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  39:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __ASM
  41:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __ASM                                  __asm
  42:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  43:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __INLINE
  44:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __INLINE                               inline
  45:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  46:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  49:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif                                           
  52:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  55:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __USED
  56:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  58:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __WEAK
  59:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  61:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED
  62:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  64:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  67:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  70:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  78:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  86:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  94:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 102:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 110:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __ALIGNED
 111:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 113:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __RESTRICT
 114:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 116:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 117:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 118:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   @{
 122:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 123:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 124:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /**
 125:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 129:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** {
 131:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** }
 133:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 134:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 135:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** /**
 136:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 140:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 141:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** {
 142:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 390              	 .loc 2 142 0
 391              	
 392 0282 72B6     	 cpsid i
 393              	
 394              	 .thumb
 395              	.LBE7:
 396              	.LBE6:
  86:../reference_generator.c **** 
  87:../reference_generator.c **** 	__disable_irq();
  88:../reference_generator.c **** 	interrupt_counter_ref_gen = 0;
 397              	 .loc 1 88 0
 398 0284 1A4B     	 ldr r3,.L10+84
 399 0286 0022     	 movs r2,#0
 400 0288 1A60     	 str r2,[r3]
 401              	.LBB8:
 402              	.LBB9:
 131:C:/GitHub/Stepper_drive/Libraries/CMSIS/Include\cmsis_gcc.h **** }
 403              	 .loc 2 131 0
 404              	
 405 028a 62B6     	 cpsie i
 406              	
 407              	 .thumb
 408              	.LBE9:
 409              	.LBE8:
  89:../reference_generator.c **** 	__enable_irq();
  90:../reference_generator.c **** 	ref_gen_status = STATUS_1_RISE;
 410              	 .loc 1 90 0
 411 028c 194B     	 ldr r3,.L10+88
 412 028e 0122     	 movs r2,#1
 413 0290 1A70     	 strb r2,[r3]
  91:../reference_generator.c **** }
 414              	 .loc 1 91 0
 415 0292 BD46     	 mov sp,r7
 416              	.LCFI2:
 417              	 .cfi_def_cfa_register 13
 418              	 
 419 0294 5DF8047B 	 ldr r7,[sp],#4
 420              	.LCFI3:
 421              	 .cfi_restore 7
 422              	 .cfi_def_cfa_offset 0
 423 0298 7047     	 bx lr
 424              	.L11:
 425 029a 00BF     	 .align 2
 426              	.L10:
 427 029c 00000000 	 .word ref_type_select
 428 02a0 00000000 	 .word rotation_input
 429 02a4 0000FA44 	 .word 1157234688
 430 02a8 00000000 	 .word high_level
 431 02ac 00000000 	 .word time_high_input_s
 432 02b0 00007A44 	 .word 1148846080
 433 02b4 00000000 	 .word high_level_time
 434 02b8 00000000 	 .word time_low_input_s
 435 02bc 00000000 	 .word low_level_time
 436 02c0 00000000 	 .word time_rise_input_s
 437 02c4 00000000 	 .word rise_time
 438 02c8 00000000 	 .word time_fall_input_s
 439 02cc 00000000 	 .word fall_time
 440 02d0 00000000 	 .word rpm_input
 441 02d4 00000000 	 .word current_input
 442 02d8 00000000 	 .word voltage_input
 443 02dc 00000000 	 .word reference
 444 02e0 00000000 	 .word u_q_ref
 445 02e4 00000000 	 .word rise_increment
 446 02e8 00000000 	 .word fall_decrement
 447 02ec 00000000 	 .word reference_old
 448 02f0 00000000 	 .word interrupt_counter_ref_gen
 449 02f4 00000000 	 .word ref_gen_status
 450              	 .cfi_endproc
 451              	.LFE196:
 453              	 .section .text.reference_generator,"ax",%progbits
 454              	 .align 2
 455              	 .global reference_generator
 456              	 .thumb
 457              	 .thumb_func
 459              	reference_generator:
 460              	.LFB197:
  92:../reference_generator.c **** 
  93:../reference_generator.c **** void reference_generator(void)
  94:../reference_generator.c **** {
 461              	 .loc 1 94 0
 462              	 .cfi_startproc
 463              	 
 464              	 
 465              	 
 466 0000 80B4     	 push {r7}
 467              	.LCFI4:
 468              	 .cfi_def_cfa_offset 4
 469              	 .cfi_offset 7,-4
 470 0002 00AF     	 add r7,sp,#0
 471              	.LCFI5:
 472              	 .cfi_def_cfa_register 7
  95:../reference_generator.c **** 	switch (ref_gen_status)
 473              	 .loc 1 95 0
 474 0004 4F4B     	 ldr r3,.L34
 475 0006 1B78     	 ldrb r3,[r3]
 476 0008 013B     	 subs r3,r3,#1
 477 000a 032B     	 cmp r3,#3
 478 000c 70D8     	 bhi .L32
 479 000e 01A2     	 adr r2,.L15
 480 0010 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 481              	 .p2align 2
 482              	.L15:
 483 0014 25000000 	 .word .L14+1
 484 0018 57000000 	 .word .L16+1
 485 001c 75000000 	 .word .L17+1
 486 0020 A7000000 	 .word .L18+1
 487              	 .p2align 1
 488              	.L14:
  96:../reference_generator.c **** 	{
  97:../reference_generator.c **** 	case (STATUS_1_RISE):
  98:../reference_generator.c **** 		if (interrupt_counter_ref_gen >= rise_time)
 489              	 .loc 1 98 0
 490 0024 484B     	 ldr r3,.L34+4
 491 0026 1B68     	 ldr r3,[r3]
 492 0028 1A46     	 mov r2,r3
 493 002a 484B     	 ldr r3,.L34+8
 494 002c 1B68     	 ldr r3,[r3]
 495 002e 9A42     	 cmp r2,r3
 496 0030 05D8     	 bhi .L19
  99:../reference_generator.c **** 		{
 100:../reference_generator.c **** 			ref_gen_status = STATUS_2_HIGH_LEVEL;
 497              	 .loc 1 100 0
 498 0032 444B     	 ldr r3,.L34
 499 0034 0222     	 movs r2,#2
 500 0036 1A70     	 strb r2,[r3]
 101:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 501              	 .loc 1 101 0
 502 0038 444B     	 ldr r3,.L34+8
 503 003a 0022     	 movs r2,#0
 504 003c 1A60     	 str r2,[r3]
 505              	.L19:
 102:../reference_generator.c **** 		}
 103:../reference_generator.c **** 		reference += rise_increment;
 506              	 .loc 1 103 0
 507 003e 444B     	 ldr r3,.L34+12
 508 0040 93ED007A 	 flds s14,[r3]
 509 0044 434B     	 ldr r3,.L34+16
 510 0046 D3ED007A 	 flds s15,[r3]
 511 004a 77EE277A 	 fadds s15,s14,s15
 512 004e 404B     	 ldr r3,.L34+12
 513 0050 C3ED007A 	 fsts s15,[r3]
 104:../reference_generator.c **** 
 105:../reference_generator.c **** 		break;
 514              	 .loc 1 105 0
 515 0054 4DE0     	 b .L20
 516              	.L16:
 106:../reference_generator.c **** 
 107:../reference_generator.c **** 	case (STATUS_2_HIGH_LEVEL):
 108:../reference_generator.c **** 		if (interrupt_counter_ref_gen >= high_level_time)
 517              	 .loc 1 108 0
 518 0056 404B     	 ldr r3,.L34+20
 519 0058 1B68     	 ldr r3,[r3]
 520 005a 1A46     	 mov r2,r3
 521 005c 3B4B     	 ldr r3,.L34+8
 522 005e 1B68     	 ldr r3,[r3]
 523 0060 9A42     	 cmp r2,r3
 524 0062 06D8     	 bhi .L21
 109:../reference_generator.c **** 		{
 110:../reference_generator.c **** 			ref_gen_status = STATUS_3_FALL;
 525              	 .loc 1 110 0
 526 0064 374B     	 ldr r3,.L34
 527 0066 0322     	 movs r2,#3
 528 0068 1A70     	 strb r2,[r3]
 111:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 529              	 .loc 1 111 0
 530 006a 384B     	 ldr r3,.L34+8
 531 006c 0022     	 movs r2,#0
 532 006e 1A60     	 str r2,[r3]
 112:../reference_generator.c **** 		}
 113:../reference_generator.c **** 		break;
 533              	 .loc 1 113 0
 534 0070 3FE0     	 b .L20
 535              	.L21:
 536 0072 3EE0     	 b .L20
 537              	.L17:
 114:../reference_generator.c **** 
 115:../reference_generator.c **** 	case (STATUS_3_FALL):
 116:../reference_generator.c **** 	{
 117:../reference_generator.c **** 		if (interrupt_counter_ref_gen >= fall_time)
 538              	 .loc 1 117 0
 539 0074 394B     	 ldr r3,.L34+24
 540 0076 1B68     	 ldr r3,[r3]
 541 0078 1A46     	 mov r2,r3
 542 007a 344B     	 ldr r3,.L34+8
 543 007c 1B68     	 ldr r3,[r3]
 544 007e 9A42     	 cmp r2,r3
 545 0080 05D8     	 bhi .L22
 118:../reference_generator.c **** 		{
 119:../reference_generator.c **** 			ref_gen_status = STATUS_4_LOW_LEVEL;
 546              	 .loc 1 119 0
 547 0082 304B     	 ldr r3,.L34
 548 0084 0422     	 movs r2,#4
 549 0086 1A70     	 strb r2,[r3]
 120:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 550              	 .loc 1 120 0
 551 0088 304B     	 ldr r3,.L34+8
 552 008a 0022     	 movs r2,#0
 553 008c 1A60     	 str r2,[r3]
 554              	.L22:
 121:../reference_generator.c **** 		}
 122:../reference_generator.c **** 		reference -= fall_decrement;
 555              	 .loc 1 122 0
 556 008e 304B     	 ldr r3,.L34+12
 557 0090 93ED007A 	 flds s14,[r3]
 558 0094 324B     	 ldr r3,.L34+28
 559 0096 D3ED007A 	 flds s15,[r3]
 560 009a 77EE677A 	 fsubs s15,s14,s15
 561 009e 2C4B     	 ldr r3,.L34+12
 562 00a0 C3ED007A 	 fsts s15,[r3]
 123:../reference_generator.c **** 	}
 124:../reference_generator.c **** 	break;
 563              	 .loc 1 124 0
 564 00a4 25E0     	 b .L20
 565              	.L18:
 125:../reference_generator.c **** 
 126:../reference_generator.c **** 	case (STATUS_4_LOW_LEVEL):
 127:../reference_generator.c **** 		if ((interrupt_counter_ref_gen >= low_level_time) && (repeat_motion == 0))
 566              	 .loc 1 127 0
 567 00a6 2F4B     	 ldr r3,.L34+32
 568 00a8 1B68     	 ldr r3,[r3]
 569 00aa 1A46     	 mov r2,r3
 570 00ac 274B     	 ldr r3,.L34+8
 571 00ae 1B68     	 ldr r3,[r3]
 572 00b0 9A42     	 cmp r2,r3
 573 00b2 0AD8     	 bhi .L23
 574              	 .loc 1 127 0 is_stmt 0 discriminator 1
 575 00b4 2C4B     	 ldr r3,.L34+36
 576 00b6 1B78     	 ldrb r3,[r3]
 577 00b8 002B     	 cmp r3,#0
 578 00ba 06D1     	 bne .L23
 128:../reference_generator.c **** 		{
 129:../reference_generator.c **** 			ref_gen_status = STATUS_0_DISABLED;
 579              	 .loc 1 129 0 is_stmt 1
 580 00bc 214B     	 ldr r3,.L34
 581 00be 0022     	 movs r2,#0
 582 00c0 1A70     	 strb r2,[r3]
 130:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 583              	 .loc 1 130 0
 584 00c2 224B     	 ldr r3,.L34+8
 585 00c4 0022     	 movs r2,#0
 586 00c6 1A60     	 str r2,[r3]
 587 00c8 11E0     	 b .L24
 588              	.L23:
 131:../reference_generator.c **** 		}
 132:../reference_generator.c **** 		else if ((interrupt_counter_ref_gen >= low_level_time) && (repeat_motion == 1))
 589              	 .loc 1 132 0
 590 00ca 264B     	 ldr r3,.L34+32
 591 00cc 1B68     	 ldr r3,[r3]
 592 00ce 1A46     	 mov r2,r3
 593 00d0 1E4B     	 ldr r3,.L34+8
 594 00d2 1B68     	 ldr r3,[r3]
 595 00d4 9A42     	 cmp r2,r3
 596 00d6 0AD8     	 bhi .L24
 597              	 .loc 1 132 0 is_stmt 0 discriminator 1
 598 00d8 234B     	 ldr r3,.L34+36
 599 00da 1B78     	 ldrb r3,[r3]
 600 00dc 012B     	 cmp r3,#1
 601 00de 06D1     	 bne .L24
 133:../reference_generator.c **** 		{
 134:../reference_generator.c **** 			ref_gen_status = STATUS_1_RISE;
 602              	 .loc 1 134 0 is_stmt 1
 603 00e0 184B     	 ldr r3,.L34
 604 00e2 0122     	 movs r2,#1
 605 00e4 1A70     	 strb r2,[r3]
 135:../reference_generator.c **** 			interrupt_counter_ref_gen = 0;
 606              	 .loc 1 135 0
 607 00e6 194B     	 ldr r3,.L34+8
 608 00e8 0022     	 movs r2,#0
 609 00ea 1A60     	 str r2,[r3]
 136:../reference_generator.c **** 		}
 137:../reference_generator.c **** 		break;
 610              	 .loc 1 137 0
 611 00ec 01E0     	 b .L20
 612              	.L24:
 613 00ee 00E0     	 b .L20
 614              	.L32:
 138:../reference_generator.c **** 
 139:../reference_generator.c **** 	default:
 140:../reference_generator.c **** 		break;
 615              	 .loc 1 140 0
 616 00f0 00BF     	 nop
 617              	.L20:
 141:../reference_generator.c **** 	}
 142:../reference_generator.c **** 
 143:../reference_generator.c **** 	switch (ref_type_select)
 618              	 .loc 1 143 0
 619 00f2 1E4B     	 ldr r3,.L34+40
 620 00f4 1B78     	 ldrb r3,[r3]
 621 00f6 032B     	 cmp r3,#3
 622 00f8 1ED8     	 bhi .L33
 623 00fa 01A2     	 adr r2,.L27
 624 00fc 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 625              	 .p2align 2
 626              	.L27:
 627 0100 11010000 	 .word .L26+1
 628 0104 1B010000 	 .word .L28+1
 629 0108 25010000 	 .word .L29+1
 630 010c 2F010000 	 .word .L30+1
 631              	 .p2align 1
 632              	.L26:
 144:../reference_generator.c **** 	{
 145:../reference_generator.c **** 	case (REF_POS):
 146:../reference_generator.c **** 		pos_ref = reference;
 633              	 .loc 1 146 0
 634 0110 0F4B     	 ldr r3,.L34+12
 635 0112 1B68     	 ldr r3,[r3]
 636 0114 164A     	 ldr r2,.L34+44
 637 0116 1360     	 str r3,[r2]
 147:../reference_generator.c **** 		break;
 638              	 .loc 1 147 0
 639 0118 0FE0     	 b .L12
 640              	.L28:
 148:../reference_generator.c **** 	case (REF_SPD):
 149:../reference_generator.c **** 		spd_ref = reference;
 641              	 .loc 1 149 0
 642 011a 0D4B     	 ldr r3,.L34+12
 643 011c 1B68     	 ldr r3,[r3]
 644 011e 154A     	 ldr r2,.L34+48
 645 0120 1360     	 str r3,[r2]
 150:../reference_generator.c **** 		break;
 646              	 .loc 1 150 0
 647 0122 0AE0     	 b .L12
 648              	.L29:
 151:../reference_generator.c **** 	case (REF_I):
 152:../reference_generator.c **** 		i_q_ref = reference;
 649              	 .loc 1 152 0
 650 0124 0A4B     	 ldr r3,.L34+12
 651 0126 1B68     	 ldr r3,[r3]
 652 0128 134A     	 ldr r2,.L34+52
 653 012a 1360     	 str r3,[r2]
 153:../reference_generator.c **** 		break;
 654              	 .loc 1 153 0
 655 012c 05E0     	 b .L12
 656              	.L30:
 154:../reference_generator.c **** 	case (REF_U):
 155:../reference_generator.c **** 		u_q_ref = reference;
 657              	 .loc 1 155 0
 658 012e 084B     	 ldr r3,.L34+12
 659 0130 1B68     	 ldr r3,[r3]
 660 0132 124A     	 ldr r2,.L34+56
 661 0134 1360     	 str r3,[r2]
 156:../reference_generator.c **** 		break;
 662              	 .loc 1 156 0
 663 0136 00E0     	 b .L12
 664              	.L33:
 157:../reference_generator.c **** 	default:
 158:../reference_generator.c **** 		break;
 665              	 .loc 1 158 0
 666 0138 00BF     	 nop
 667              	.L12:
 159:../reference_generator.c **** 	}
 160:../reference_generator.c **** }
 668              	 .loc 1 160 0
 669 013a BD46     	 mov sp,r7
 670              	.LCFI6:
 671              	 .cfi_def_cfa_register 13
 672              	 
 673 013c 5DF8047B 	 ldr r7,[sp],#4
 674              	.LCFI7:
 675              	 .cfi_restore 7
 676              	 .cfi_def_cfa_offset 0
 677 0140 7047     	 bx lr
 678              	.L35:
 679 0142 00BF     	 .align 2
 680              	.L34:
 681 0144 00000000 	 .word ref_gen_status
 682 0148 00000000 	 .word rise_time
 683 014c 00000000 	 .word interrupt_counter_ref_gen
 684 0150 00000000 	 .word reference
 685 0154 00000000 	 .word rise_increment
 686 0158 00000000 	 .word high_level_time
 687 015c 00000000 	 .word fall_time
 688 0160 00000000 	 .word fall_decrement
 689 0164 00000000 	 .word low_level_time
 690 0168 00000000 	 .word repeat_motion
 691 016c 00000000 	 .word ref_type_select
 692 0170 00000000 	 .word pos_ref
 693 0174 00000000 	 .word spd_ref
 694 0178 00000000 	 .word i_q_ref
 695 017c 00000000 	 .word u_q_ref
 696              	 .cfi_endproc
 697              	.LFE197:
 699              	 .text
 700              	.Letext0:
 701              	 .file 3 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 702              	 .file 4 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 703              	 .file 5 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\math.h"
 704              	 .file 6 "../reference_generator.h"
 705              	 .file 7 "C:/GitHub/Stepper_drive/Libraries/CMSIS/Include/core_cm4.h"
 706              	 .file 8 "../main.h"
 707              	 .file 9 "../pi_regulator.h"
DEFINED SYMBOLS
                            *ABS*:00000000 reference_generator.c
                            *COM*:00000004 CCU8_CC8_CR1_CR1_Value
    {standard input}:25     .bss.interrupt_counter_ref_gen:00000000 interrupt_counter_ref_gen
    {standard input}:22     .bss.interrupt_counter_ref_gen:00000000 $d
    {standard input}:31     .bss.ref_gen_status:00000000 ref_gen_status
    {standard input}:32     .bss.ref_gen_status:00000000 $d
                            *COM*:00000004 high_level
                            *COM*:00000004 high_level_time
                            *COM*:00000004 rise_time
                            *COM*:00000004 rise_increment
                            *COM*:00000004 fall_time
                            *COM*:00000004 fall_decrement
                            *COM*:00000004 low_level
                            *COM*:00000004 low_level_time
    {standard input}:45     .data.repeat_motion:00000000 repeat_motion
    {standard input}:52     .bss.time_rise_input_s:00000000 time_rise_input_s
    {standard input}:49     .bss.time_rise_input_s:00000000 $d
    {standard input}:59     .bss.time_fall_input_s:00000000 time_fall_input_s
    {standard input}:56     .bss.time_fall_input_s:00000000 $d
    {standard input}:66     .bss.time_high_input_s:00000000 time_high_input_s
    {standard input}:63     .bss.time_high_input_s:00000000 $d
    {standard input}:73     .bss.time_low_input_s:00000000 time_low_input_s
    {standard input}:70     .bss.time_low_input_s:00000000 $d
    {standard input}:80     .bss.current_input:00000000 current_input
    {standard input}:77     .bss.current_input:00000000 $d
    {standard input}:87     .bss.voltage_input:00000000 voltage_input
    {standard input}:84     .bss.voltage_input:00000000 $d
    {standard input}:94     .bss.rpm_input:00000000 rpm_input
    {standard input}:91     .bss.rpm_input:00000000 $d
    {standard input}:101    .bss.rotation_input:00000000 rotation_input
    {standard input}:98     .bss.rotation_input:00000000 $d
    {standard input}:108    .bss.reference:00000000 reference
    {standard input}:105    .bss.reference:00000000 $d
    {standard input}:115    .bss.reference_old:00000000 reference_old
    {standard input}:112    .bss.reference_old:00000000 $d
    {standard input}:121    .bss.ref_type_select:00000000 ref_type_select
    {standard input}:122    .bss.ref_type_select:00000000 $d
    {standard input}:124    .text.reference_generator_compute:00000000 $t
    {standard input}:129    .text.reference_generator_compute:00000000 reference_generator_compute
    {standard input}:153    .text.reference_generator_compute:00000014 $d
    {standard input}:157    .text.reference_generator_compute:00000024 $t
    {standard input}:427    .text.reference_generator_compute:0000029c $d
    {standard input}:454    .text.reference_generator:00000000 $t
    {standard input}:459    .text.reference_generator:00000000 reference_generator
    {standard input}:483    .text.reference_generator:00000014 $d
    {standard input}:487    .text.reference_generator:00000024 $t
    {standard input}:627    .text.reference_generator:00000100 $d
    {standard input}:631    .text.reference_generator:00000110 $t
    {standard input}:681    .text.reference_generator:00000144 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
u_q_ref
pos_ref
spd_ref
i_q_ref
