   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "reference_generator.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .comm CCU8_CC8_CR1_CR1_Value,4,4
  20              	 .comm theta_fast,4,4
  21              	 .global interrupt_counter_ref_gen
  22              	 .section .bss.interrupt_counter_ref_gen,"aw",%nobits
  23              	 .align 2
  26              	interrupt_counter_ref_gen:
  27 0000 00000000 	 .space 4
  28              	 .global ref_gen_status
  29              	 .section .bss.ref_gen_status,"aw",%nobits
  32              	ref_gen_status:
  33 0000 00       	 .space 1
  34              	 .global high_level
  35              	 .section .data.high_level,"aw",%progbits
  36              	 .align 2
  39              	high_level:
  40 0000 B80B0000 	 .word 3000
  41              	 .global high_level_time
  42              	 .section .data.high_level_time,"aw",%progbits
  43              	 .align 2
  46              	high_level_time:
  47 0000 E8030000 	 .word 1000
  48              	 .global rise_time
  49              	 .section .data.rise_time,"aw",%progbits
  50              	 .align 2
  53              	rise_time:
  54 0000 0A000000 	 .word 10
  55              	 .comm rise_increment,4,4
  56              	 .global fall_time
  57              	 .section .data.fall_time,"aw",%progbits
  58              	 .align 2
  61              	fall_time:
  62 0000 0A000000 	 .word 10
  63              	 .comm fall_decrement,4,4
  64              	 .global low_level
  65              	 .section .bss.low_level,"aw",%nobits
  66              	 .align 2
  69              	low_level:
  70 0000 00000000 	 .space 4
  71              	 .global low_level_time
  72              	 .section .data.low_level_time,"aw",%progbits
  73              	 .align 2
  76              	low_level_time:
  77 0000 E8030000 	 .word 1000
  78              	 .global repeat_motion
  79              	 .section .data.repeat_motion,"aw",%progbits
  82              	repeat_motion:
  83 0000 01       	 .byte 1
  84              	 .global reference
  85              	 .section .bss.reference,"aw",%nobits
  86              	 .align 2
  89              	reference:
  90 0000 00000000 	 .space 4
  91              	 .global reference_old
  92              	 .section .bss.reference_old,"aw",%nobits
  93              	 .align 2
  96              	reference_old:
  97 0000 00000000 	 .space 4
  98              	 .global ref_type_select
  99              	 .section .bss.ref_type_select,"aw",%nobits
 102              	ref_type_select:
 103 0000 00       	 .space 1
 104              	 .section .text.reference_generator_compute,"ax",%progbits
 105              	 .align 2
 106              	 .global reference_generator_compute
 107              	 .thumb
 108              	 .thumb_func
 110              	reference_generator_compute:
 111              	.LFB196:
 112              	 .file 1 "../reference_generator.c"
   1:../reference_generator.c **** #include <stdint.h>
   2:../reference_generator.c **** #include <stdbool.h>
   3:../reference_generator.c **** #include "reference_generator.h"
   4:../reference_generator.c **** #include "driver_adc.h"
   5:../reference_generator.c **** #include "pi_regulator.h"
   6:../reference_generator.c **** #include "state_machine.h"
   7:../reference_generator.c **** #include "transform.h"
   8:../reference_generator.c **** 
   9:../reference_generator.c **** //For reference Time = [ms] | high_level = motor counts
  10:../reference_generator.c **** uint32_t interrupt_counter_ref_gen = 0;
  11:../reference_generator.c **** 
  12:../reference_generator.c **** status_ref_gen ref_gen_status = 0;					//0 - disabled, 1 - rise, 2 - high, 3 - fall, 4 - low
  13:../reference_generator.c **** 
  14:../reference_generator.c **** int32_t high_level = 3000;							//final reference
  15:../reference_generator.c **** int32_t high_level_time = 1000;						//time to hold final reference
  16:../reference_generator.c **** 
  17:../reference_generator.c **** int32_t rise_time = 10;								//time to get to final reference
  18:../reference_generator.c **** int32_t rise_increment;
  19:../reference_generator.c **** 
  20:../reference_generator.c **** int32_t fall_time = 10;								//time to get to initial reference
  21:../reference_generator.c **** int32_t fall_decrement;
  22:../reference_generator.c **** 
  23:../reference_generator.c **** int32_t low_level = 0;								//initial reference = 0
  24:../reference_generator.c **** int32_t low_level_time = 1000;						//time to hold initial reference
  25:../reference_generator.c **** 
  26:../reference_generator.c **** uint8_t repeat_motion = 1;							// 0 = NO | 1 = YES
  27:../reference_generator.c **** 
  28:../reference_generator.c **** float reference = 0;
  29:../reference_generator.c **** float reference_old = 0;
  30:../reference_generator.c **** 
  31:../reference_generator.c **** ref_type ref_type_select = 0;
  32:../reference_generator.c **** 
  33:../reference_generator.c **** 
  34:../reference_generator.c **** void reference_generator_compute (void)
  35:../reference_generator.c **** {
 113              	 .loc 1 35 0
 114              	 .cfi_startproc
 115              	 
 116              	 
 117              	 
 118 0000 80B4     	 push {r7}
 119              	.LCFI0:
 120              	 .cfi_def_cfa_offset 4
 121              	 .cfi_offset 7,-4
 122 0002 00AF     	 add r7,sp,#0
 123              	.LCFI1:
 124              	 .cfi_def_cfa_register 7
  36:../reference_generator.c **** 
  37:../reference_generator.c **** 	rise_increment = high_level/rise_time;
 125              	 .loc 1 37 0
 126 0004 114B     	 ldr r3,.L2
 127 0006 1A68     	 ldr r2,[r3]
 128 0008 114B     	 ldr r3,.L2+4
 129 000a 1B68     	 ldr r3,[r3]
 130 000c 92FBF3F3 	 sdiv r3,r2,r3
 131 0010 104A     	 ldr r2,.L2+8
 132 0012 1360     	 str r3,[r2]
  38:../reference_generator.c **** 	fall_decrement = high_level/fall_time;
 133              	 .loc 1 38 0
 134 0014 0D4B     	 ldr r3,.L2
 135 0016 1A68     	 ldr r2,[r3]
 136 0018 0F4B     	 ldr r3,.L2+12
 137 001a 1B68     	 ldr r3,[r3]
 138 001c 92FBF3F3 	 sdiv r3,r2,r3
 139 0020 0E4A     	 ldr r2,.L2+16
 140 0022 1360     	 str r3,[r2]
  39:../reference_generator.c **** 	reference = 0;
 141              	 .loc 1 39 0
 142 0024 0E4B     	 ldr r3,.L2+20
 143 0026 4FF00002 	 mov r2,#0
 144 002a 1A60     	 str r2,[r3]
  40:../reference_generator.c **** 	reference_old = 0;
 145              	 .loc 1 40 0
 146 002c 0D4B     	 ldr r3,.L2+24
 147 002e 4FF00002 	 mov r2,#0
 148 0032 1A60     	 str r2,[r3]
 149              	.LBB6:
 150              	.LBB7:
 151              	 .file 2 "C:/CODE/Licenta/Libraries/CMSIS/Include/cmsis_gcc.h"
   1:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /**************************************************************************//**
   2:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @version  V5.1.0
   5:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * @date     20. December 2018
   6:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  ******************************************************************************/
   7:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /*
   8:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  10:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  12:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  16:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  *
  18:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  * limitations under the License.
  23:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
  24:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  25:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  28:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /* ignore some GCC warnings */
  29:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic push
  30:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  34:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef __has_builtin
  36:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  38:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
  39:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __ASM
  41:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __ASM                                  __asm
  42:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  43:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __INLINE
  44:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __INLINE                               inline
  45:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  46:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  49:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif                                           
  52:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  55:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __USED
  56:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  58:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __WEAK
  59:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  61:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED
  62:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  64:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  67:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  70:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  78:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  86:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
  94:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 102:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 110:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __ALIGNED
 111:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 113:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #ifndef   __RESTRICT
 114:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** #endif
 116:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 117:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 118:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   @{
 122:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 123:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 124:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /**
 125:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 129:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** {
 131:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** }
 133:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 134:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** 
 135:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** /**
 136:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 137:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****  */
 140:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 141:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** {
 142:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 152              	 .loc 2 142 0
 153              	
 154 0034 72B6     	 cpsid i
 155              	
 156              	 .thumb
 157              	.LBE7:
 158              	.LBE6:
  41:../reference_generator.c **** 	//************************************* Move it to drive_commands
  42:../reference_generator.c **** 	__disable_irq();
  43:../reference_generator.c **** 	interrupt_counter_ref_gen = 0;
 159              	 .loc 1 43 0
 160 0036 0C4B     	 ldr r3,.L2+28
 161 0038 0022     	 movs r2,#0
 162 003a 1A60     	 str r2,[r3]
 163              	.LBB8:
 164              	.LBB9:
 131:C:/CODE/Licenta/Libraries/CMSIS/Include\cmsis_gcc.h **** }
 165              	 .loc 2 131 0
 166              	
 167 003c 62B6     	 cpsie i
 168              	
 169              	 .thumb
 170              	.LBE9:
 171              	.LBE8:
  44:../reference_generator.c **** 	__enable_irq();
  45:../reference_generator.c **** 	ref_gen_status = STATUS_1_RISE;
 172              	 .loc 1 45 0
 173 003e 0B4B     	 ldr r3,.L2+32
 174 0040 0122     	 movs r2,#1
 175 0042 1A70     	 strb r2,[r3]
  46:../reference_generator.c **** 	//*************************************
  47:../reference_generator.c **** }
 176              	 .loc 1 47 0
 177 0044 BD46     	 mov sp,r7
 178              	.LCFI2:
 179              	 .cfi_def_cfa_register 13
 180              	 
 181 0046 5DF8047B 	 ldr r7,[sp],#4
 182              	.LCFI3:
 183              	 .cfi_restore 7
 184              	 .cfi_def_cfa_offset 0
 185 004a 7047     	 bx lr
 186              	.L3:
 187              	 .align 2
 188              	.L2:
 189 004c 00000000 	 .word high_level
 190 0050 00000000 	 .word rise_time
 191 0054 00000000 	 .word rise_increment
 192 0058 00000000 	 .word fall_time
 193 005c 00000000 	 .word fall_decrement
 194 0060 00000000 	 .word reference
 195 0064 00000000 	 .word reference_old
 196 0068 00000000 	 .word interrupt_counter_ref_gen
 197 006c 00000000 	 .word ref_gen_status
 198              	 .cfi_endproc
 199              	.LFE196:
 201              	 .section .text.reference_generator,"ax",%progbits
 202              	 .align 2
 203              	 .global reference_generator
 204              	 .thumb
 205              	 .thumb_func
 207              	reference_generator:
 208              	.LFB197:
  48:../reference_generator.c **** 
  49:../reference_generator.c **** void reference_generator (void)
  50:../reference_generator.c **** {
 209              	 .loc 1 50 0
 210              	 .cfi_startproc
 211              	 
 212              	 
 213              	 
 214 0000 80B4     	 push {r7}
 215              	.LCFI4:
 216              	 .cfi_def_cfa_offset 4
 217              	 .cfi_offset 7,-4
 218 0002 00AF     	 add r7,sp,#0
 219              	.LCFI5:
 220              	 .cfi_def_cfa_register 7
  51:../reference_generator.c **** 	switch(ref_gen_status)
 221              	 .loc 1 51 0
 222 0004 574B     	 ldr r3,.L26
 223 0006 1B78     	 ldrb r3,[r3]
 224 0008 013B     	 subs r3,r3,#1
 225 000a 032B     	 cmp r3,#3
 226 000c 76D8     	 bhi .L24
 227 000e 01A2     	 adr r2,.L7
 228 0010 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 229              	 .p2align 2
 230              	.L7:
 231 0014 25000000 	 .word .L6+1
 232 0018 5D000000 	 .word .L8+1
 233 001c 7B000000 	 .word .L9+1
 234 0020 B3000000 	 .word .L10+1
 235              	 .p2align 1
 236              	.L6:
  52:../reference_generator.c **** 	{
  53:../reference_generator.c **** 	case (STATUS_1_RISE):
  54:../reference_generator.c **** 			if (interrupt_counter_ref_gen >= rise_time)
 237              	 .loc 1 54 0
 238 0024 504B     	 ldr r3,.L26+4
 239 0026 1B68     	 ldr r3,[r3]
 240 0028 1A46     	 mov r2,r3
 241 002a 504B     	 ldr r3,.L26+8
 242 002c 1B68     	 ldr r3,[r3]
 243 002e 9A42     	 cmp r2,r3
 244 0030 05D8     	 bhi .L11
  55:../reference_generator.c **** 			{
  56:../reference_generator.c **** 				ref_gen_status = STATUS_2_HIGH_LEVEL;
 245              	 .loc 1 56 0
 246 0032 4C4B     	 ldr r3,.L26
 247 0034 0222     	 movs r2,#2
 248 0036 1A70     	 strb r2,[r3]
  57:../reference_generator.c **** 				interrupt_counter_ref_gen = 0;
 249              	 .loc 1 57 0
 250 0038 4C4B     	 ldr r3,.L26+8
 251 003a 0022     	 movs r2,#0
 252 003c 1A60     	 str r2,[r3]
 253              	.L11:
  58:../reference_generator.c **** 			}
  59:../reference_generator.c **** 				reference += rise_increment;
 254              	 .loc 1 59 0
 255 003e 4C4B     	 ldr r3,.L26+12
 256 0040 1B68     	 ldr r3,[r3]
 257 0042 07EE903A 	 fmsr s15,r3
 258 0046 B8EEE77A 	 fsitos s14,s15
 259 004a 4A4B     	 ldr r3,.L26+16
 260 004c D3ED007A 	 flds s15,[r3]
 261 0050 77EE277A 	 fadds s15,s14,s15
 262 0054 474B     	 ldr r3,.L26+16
 263 0056 C3ED007A 	 fsts s15,[r3]
  60:../reference_generator.c **** 
  61:../reference_generator.c **** 			break;
 264              	 .loc 1 61 0
 265 005a 50E0     	 b .L12
 266              	.L8:
  62:../reference_generator.c **** 
  63:../reference_generator.c **** 	case (STATUS_2_HIGH_LEVEL):
  64:../reference_generator.c **** 			if (interrupt_counter_ref_gen >= high_level_time)
 267              	 .loc 1 64 0
 268 005c 464B     	 ldr r3,.L26+20
 269 005e 1B68     	 ldr r3,[r3]
 270 0060 1A46     	 mov r2,r3
 271 0062 424B     	 ldr r3,.L26+8
 272 0064 1B68     	 ldr r3,[r3]
 273 0066 9A42     	 cmp r2,r3
 274 0068 06D8     	 bhi .L13
  65:../reference_generator.c **** 			{
  66:../reference_generator.c **** 				ref_gen_status = STATUS_3_FALL;
 275              	 .loc 1 66 0
 276 006a 3E4B     	 ldr r3,.L26
 277 006c 0322     	 movs r2,#3
 278 006e 1A70     	 strb r2,[r3]
  67:../reference_generator.c **** 				interrupt_counter_ref_gen = 0;
 279              	 .loc 1 67 0
 280 0070 3E4B     	 ldr r3,.L26+8
 281 0072 0022     	 movs r2,#0
 282 0074 1A60     	 str r2,[r3]
  68:../reference_generator.c **** 			}
  69:../reference_generator.c **** 			break;
 283              	 .loc 1 69 0
 284 0076 42E0     	 b .L12
 285              	.L13:
 286 0078 41E0     	 b .L12
 287              	.L9:
  70:../reference_generator.c **** 
  71:../reference_generator.c **** 	case (STATUS_3_FALL):
  72:../reference_generator.c **** 			if (interrupt_counter_ref_gen >= fall_time)
 288              	 .loc 1 72 0
 289 007a 404B     	 ldr r3,.L26+24
 290 007c 1B68     	 ldr r3,[r3]
 291 007e 1A46     	 mov r2,r3
 292 0080 3A4B     	 ldr r3,.L26+8
 293 0082 1B68     	 ldr r3,[r3]
 294 0084 9A42     	 cmp r2,r3
 295 0086 05D8     	 bhi .L14
  73:../reference_generator.c **** 			{
  74:../reference_generator.c **** 				ref_gen_status = STATUS_4_LOW_LEVEL;
 296              	 .loc 1 74 0
 297 0088 364B     	 ldr r3,.L26
 298 008a 0422     	 movs r2,#4
 299 008c 1A70     	 strb r2,[r3]
  75:../reference_generator.c **** 				interrupt_counter_ref_gen = 0;
 300              	 .loc 1 75 0
 301 008e 374B     	 ldr r3,.L26+8
 302 0090 0022     	 movs r2,#0
 303 0092 1A60     	 str r2,[r3]
 304              	.L14:
  76:../reference_generator.c **** 			}
  77:../reference_generator.c **** 				reference -= fall_decrement;
 305              	 .loc 1 77 0
 306 0094 374B     	 ldr r3,.L26+16
 307 0096 93ED007A 	 flds s14,[r3]
 308 009a 394B     	 ldr r3,.L26+28
 309 009c 1B68     	 ldr r3,[r3]
 310 009e 07EE903A 	 fmsr s15,r3
 311 00a2 F8EEE77A 	 fsitos s15,s15
 312 00a6 77EE677A 	 fsubs s15,s14,s15
 313 00aa 324B     	 ldr r3,.L26+16
 314 00ac C3ED007A 	 fsts s15,[r3]
  78:../reference_generator.c **** 
  79:../reference_generator.c **** 			break;
 315              	 .loc 1 79 0
 316 00b0 25E0     	 b .L12
 317              	.L10:
  80:../reference_generator.c **** 
  81:../reference_generator.c **** 	case (STATUS_4_LOW_LEVEL):
  82:../reference_generator.c **** 			if ((interrupt_counter_ref_gen >= low_level_time) && (repeat_motion == 0))
 318              	 .loc 1 82 0
 319 00b2 344B     	 ldr r3,.L26+32
 320 00b4 1B68     	 ldr r3,[r3]
 321 00b6 1A46     	 mov r2,r3
 322 00b8 2C4B     	 ldr r3,.L26+8
 323 00ba 1B68     	 ldr r3,[r3]
 324 00bc 9A42     	 cmp r2,r3
 325 00be 0AD8     	 bhi .L15
 326              	 .loc 1 82 0 is_stmt 0 discriminator 1
 327 00c0 314B     	 ldr r3,.L26+36
 328 00c2 1B78     	 ldrb r3,[r3]
 329 00c4 002B     	 cmp r3,#0
 330 00c6 06D1     	 bne .L15
  83:../reference_generator.c **** 			{
  84:../reference_generator.c **** 				ref_gen_status = STATUS_0_DISABLED;
 331              	 .loc 1 84 0 is_stmt 1
 332 00c8 264B     	 ldr r3,.L26
 333 00ca 0022     	 movs r2,#0
 334 00cc 1A70     	 strb r2,[r3]
  85:../reference_generator.c **** 				interrupt_counter_ref_gen = 0;
 335              	 .loc 1 85 0
 336 00ce 274B     	 ldr r3,.L26+8
 337 00d0 0022     	 movs r2,#0
 338 00d2 1A60     	 str r2,[r3]
 339 00d4 11E0     	 b .L16
 340              	.L15:
  86:../reference_generator.c **** 			}
  87:../reference_generator.c **** 			else if ((interrupt_counter_ref_gen >= low_level_time) && (repeat_motion == 1))
 341              	 .loc 1 87 0
 342 00d6 2B4B     	 ldr r3,.L26+32
 343 00d8 1B68     	 ldr r3,[r3]
 344 00da 1A46     	 mov r2,r3
 345 00dc 234B     	 ldr r3,.L26+8
 346 00de 1B68     	 ldr r3,[r3]
 347 00e0 9A42     	 cmp r2,r3
 348 00e2 0AD8     	 bhi .L16
 349              	 .loc 1 87 0 is_stmt 0 discriminator 1
 350 00e4 284B     	 ldr r3,.L26+36
 351 00e6 1B78     	 ldrb r3,[r3]
 352 00e8 012B     	 cmp r3,#1
 353 00ea 06D1     	 bne .L16
  88:../reference_generator.c **** 			{
  89:../reference_generator.c **** 				ref_gen_status = STATUS_1_RISE;
 354              	 .loc 1 89 0 is_stmt 1
 355 00ec 1D4B     	 ldr r3,.L26
 356 00ee 0122     	 movs r2,#1
 357 00f0 1A70     	 strb r2,[r3]
  90:../reference_generator.c **** 				interrupt_counter_ref_gen = 0;
 358              	 .loc 1 90 0
 359 00f2 1E4B     	 ldr r3,.L26+8
 360 00f4 0022     	 movs r2,#0
 361 00f6 1A60     	 str r2,[r3]
  91:../reference_generator.c **** 			}
  92:../reference_generator.c **** 			break;
 362              	 .loc 1 92 0
 363 00f8 01E0     	 b .L12
 364              	.L16:
 365 00fa 00E0     	 b .L12
 366              	.L24:
  93:../reference_generator.c **** 
  94:../reference_generator.c **** 	default:
  95:../reference_generator.c **** 		break;
 367              	 .loc 1 95 0
 368 00fc 00BF     	 nop
 369              	.L12:
  96:../reference_generator.c **** 	}
  97:../reference_generator.c **** 
  98:../reference_generator.c **** 	switch (ref_type_select)
 370              	 .loc 1 98 0
 371 00fe 234B     	 ldr r3,.L26+40
 372 0100 1B78     	 ldrb r3,[r3]
 373 0102 032B     	 cmp r3,#3
 374 0104 29D8     	 bhi .L25
 375 0106 01A2     	 adr r2,.L19
 376 0108 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 377              	 .p2align 2
 378              	.L19:
 379 010c 1D010000 	 .word .L18+1
 380 0110 27010000 	 .word .L20+1
 381 0114 47010000 	 .word .L21+1
 382 0118 51010000 	 .word .L22+1
 383              	 .p2align 1
 384              	.L18:
  99:../reference_generator.c **** 	{
 100:../reference_generator.c **** 	case(REF_POS):
 101:../reference_generator.c **** 			pos_ref = reference;
 385              	 .loc 1 101 0
 386 011c 154B     	 ldr r3,.L26+16
 387 011e 1B68     	 ldr r3,[r3]
 388 0120 1B4A     	 ldr r2,.L26+44
 389 0122 1360     	 str r3,[r2]
 102:../reference_generator.c **** 			break;
 390              	 .loc 1 102 0
 391 0124 1AE0     	 b .L4
 392              	.L20:
 103:../reference_generator.c **** 	case(REF_SPD):
 104:../reference_generator.c **** 			spd_ref = reference - reference_old;
 393              	 .loc 1 104 0
 394 0126 134B     	 ldr r3,.L26+16
 395 0128 93ED007A 	 flds s14,[r3]
 396 012c 194B     	 ldr r3,.L26+48
 397 012e D3ED007A 	 flds s15,[r3]
 398 0132 77EE677A 	 fsubs s15,s14,s15
 399 0136 184B     	 ldr r3,.L26+52
 400 0138 C3ED007A 	 fsts s15,[r3]
 105:../reference_generator.c **** 			reference_old = reference;
 401              	 .loc 1 105 0
 402 013c 0D4B     	 ldr r3,.L26+16
 403 013e 1B68     	 ldr r3,[r3]
 404 0140 144A     	 ldr r2,.L26+48
 405 0142 1360     	 str r3,[r2]
 106:../reference_generator.c **** 			break;
 406              	 .loc 1 106 0
 407 0144 0AE0     	 b .L4
 408              	.L21:
 107:../reference_generator.c **** 	case(REF_I):
 108:../reference_generator.c **** 			i_q_ref = reference;
 409              	 .loc 1 108 0
 410 0146 0B4B     	 ldr r3,.L26+16
 411 0148 1B68     	 ldr r3,[r3]
 412 014a 144A     	 ldr r2,.L26+56
 413 014c 1360     	 str r3,[r2]
 109:../reference_generator.c **** 			break;
 414              	 .loc 1 109 0
 415 014e 05E0     	 b .L4
 416              	.L22:
 110:../reference_generator.c **** 	case(REF_U):
 111:../reference_generator.c **** 			u_q_ref = reference;
 417              	 .loc 1 111 0
 418 0150 084B     	 ldr r3,.L26+16
 419 0152 1B68     	 ldr r3,[r3]
 420 0154 124A     	 ldr r2,.L26+60
 421 0156 1360     	 str r3,[r2]
 112:../reference_generator.c **** 			break;
 422              	 .loc 1 112 0
 423 0158 00E0     	 b .L4
 424              	.L25:
 113:../reference_generator.c **** 	default:
 114:../reference_generator.c **** 		break;
 425              	 .loc 1 114 0
 426 015a 00BF     	 nop
 427              	.L4:
 115:../reference_generator.c **** 	}
 116:../reference_generator.c **** 
 117:../reference_generator.c **** }
 428              	 .loc 1 117 0
 429 015c BD46     	 mov sp,r7
 430              	.LCFI6:
 431              	 .cfi_def_cfa_register 13
 432              	 
 433 015e 5DF8047B 	 ldr r7,[sp],#4
 434              	.LCFI7:
 435              	 .cfi_restore 7
 436              	 .cfi_def_cfa_offset 0
 437 0162 7047     	 bx lr
 438              	.L27:
 439              	 .align 2
 440              	.L26:
 441 0164 00000000 	 .word ref_gen_status
 442 0168 00000000 	 .word rise_time
 443 016c 00000000 	 .word interrupt_counter_ref_gen
 444 0170 00000000 	 .word rise_increment
 445 0174 00000000 	 .word reference
 446 0178 00000000 	 .word high_level_time
 447 017c 00000000 	 .word fall_time
 448 0180 00000000 	 .word fall_decrement
 449 0184 00000000 	 .word low_level_time
 450 0188 00000000 	 .word repeat_motion
 451 018c 00000000 	 .word ref_type_select
 452 0190 00000000 	 .word pos_ref
 453 0194 00000000 	 .word reference_old
 454 0198 00000000 	 .word spd_ref
 455 019c 00000000 	 .word i_q_ref
 456 01a0 00000000 	 .word u_q_ref
 457              	 .cfi_endproc
 458              	.LFE197:
 460              	 .text
 461              	.Letext0:
 462              	 .file 3 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 463              	 .file 4 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 464              	 .file 5 "../reference_generator.h"
 465              	 .file 6 "C:/CODE/Licenta/Libraries/CMSIS/Include/core_cm4.h"
 466              	 .file 7 "../main.h"
 467              	 .file 8 "../pi_regulator.h"
 468              	 .file 9 "../transform.h"
DEFINED SYMBOLS
                            *ABS*:00000000 reference_generator.c
                            *COM*:00000004 CCU8_CC8_CR1_CR1_Value
                            *COM*:00000004 theta_fast
    {standard input}:26     .bss.interrupt_counter_ref_gen:00000000 interrupt_counter_ref_gen
    {standard input}:23     .bss.interrupt_counter_ref_gen:00000000 $d
    {standard input}:32     .bss.ref_gen_status:00000000 ref_gen_status
    {standard input}:33     .bss.ref_gen_status:00000000 $d
    {standard input}:39     .data.high_level:00000000 high_level
    {standard input}:36     .data.high_level:00000000 $d
    {standard input}:46     .data.high_level_time:00000000 high_level_time
    {standard input}:43     .data.high_level_time:00000000 $d
    {standard input}:53     .data.rise_time:00000000 rise_time
    {standard input}:50     .data.rise_time:00000000 $d
                            *COM*:00000004 rise_increment
    {standard input}:61     .data.fall_time:00000000 fall_time
    {standard input}:58     .data.fall_time:00000000 $d
                            *COM*:00000004 fall_decrement
    {standard input}:69     .bss.low_level:00000000 low_level
    {standard input}:66     .bss.low_level:00000000 $d
    {standard input}:76     .data.low_level_time:00000000 low_level_time
    {standard input}:73     .data.low_level_time:00000000 $d
    {standard input}:82     .data.repeat_motion:00000000 repeat_motion
    {standard input}:89     .bss.reference:00000000 reference
    {standard input}:86     .bss.reference:00000000 $d
    {standard input}:96     .bss.reference_old:00000000 reference_old
    {standard input}:93     .bss.reference_old:00000000 $d
    {standard input}:102    .bss.ref_type_select:00000000 ref_type_select
    {standard input}:103    .bss.ref_type_select:00000000 $d
    {standard input}:105    .text.reference_generator_compute:00000000 $t
    {standard input}:110    .text.reference_generator_compute:00000000 reference_generator_compute
    {standard input}:189    .text.reference_generator_compute:0000004c $d
    {standard input}:202    .text.reference_generator:00000000 $t
    {standard input}:207    .text.reference_generator:00000000 reference_generator
    {standard input}:231    .text.reference_generator:00000014 $d
    {standard input}:235    .text.reference_generator:00000024 $t
    {standard input}:379    .text.reference_generator:0000010c $d
    {standard input}:383    .text.reference_generator:0000011c $t
    {standard input}:441    .text.reference_generator:00000164 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
pos_ref
spd_ref
i_q_ref
u_q_ref
