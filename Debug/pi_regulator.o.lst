   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "pi_regulator.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .comm CCU8_CC8_CR1_CR1_Value,4,4
  20              	 .comm theta_fast,4,4
  21              	 .global k_p_i
  22              	 .section .data.k_p_i,"aw",%progbits
  23              	 .align 2
  26              	k_p_i:
  27 0000 9A99193F 	 .word 1058642330
  28              	 .global k_i_i
  29              	 .section .data.k_i_i,"aw",%progbits
  30              	 .align 2
  33              	k_i_i:
  34 0000 0AD7233C 	 .word 1008981770
  35              	 .global k_p_spd
  36              	 .section .data.k_p_spd,"aw",%progbits
  37              	 .align 2
  40              	k_p_spd:
  41 0000 0000C843 	 .word 1137180672
  42              	 .global k_i_spd
  43              	 .section .data.k_i_spd,"aw",%progbits
  44              	 .align 2
  47              	k_i_spd:
  48 0000 0000C842 	 .word 1120403456
  49              	 .global k_p_pos
  50              	 .section .data.k_p_pos,"aw",%progbits
  51              	 .align 2
  54              	k_p_pos:
  55 0000 CDCC4C3D 	 .word 1028443341
  56              	 .global k_i_pos
  57              	 .section .data.k_i_pos,"aw",%progbits
  58              	 .align 2
  61              	k_i_pos:
  62 0000 6F12833A 	 .word 981668463
  63              	 .global k_p_pos_pid
  64              	 .section .data.k_p_pos_pid,"aw",%progbits
  65              	 .align 2
  68              	k_p_pos_pid:
  69 0000 0000803F 	 .word 1065353216
  70              	 .global k_i_pos_pid
  71              	 .section .bss.k_i_pos_pid,"aw",%nobits
  72              	 .align 2
  75              	k_i_pos_pid:
  76 0000 00000000 	 .space 4
  77              	 .global k_d_pos_pid
  78              	 .section .bss.k_d_pos_pid,"aw",%nobits
  79              	 .align 2
  82              	k_d_pos_pid:
  83 0000 00000000 	 .space 4
  84              	 .global error_i_q
  85              	 .section .bss.error_i_q,"aw",%nobits
  86              	 .align 2
  89              	error_i_q:
  90 0000 00000000 	 .space 4
  91              	 .global error_i_d
  92              	 .section .bss.error_i_d,"aw",%nobits
  93              	 .align 2
  96              	error_i_d:
  97 0000 00000000 	 .space 4
  98              	 .global error_spd
  99              	 .section .bss.error_spd,"aw",%nobits
 100              	 .align 2
 103              	error_spd:
 104 0000 00000000 	 .space 4
 105              	 .global error_pos
 106              	 .section .bss.error_pos,"aw",%nobits
 107              	 .align 2
 110              	error_pos:
 111 0000 00000000 	 .space 4
 112              	 .global error_pos_old
 113              	 .section .bss.error_pos_old,"aw",%nobits
 114              	 .align 2
 117              	error_pos_old:
 118 0000 00000000 	 .space 4
 119              	 .global i_q_ref
 120              	 .section .bss.i_q_ref,"aw",%nobits
 121              	 .align 2
 124              	i_q_ref:
 125 0000 00000000 	 .space 4
 126              	 .global i_d_ref
 127              	 .section .bss.i_d_ref,"aw",%nobits
 128              	 .align 2
 131              	i_d_ref:
 132 0000 00000000 	 .space 4
 133              	 .global pos_ref
 134              	 .section .bss.pos_ref,"aw",%nobits
 135              	 .align 2
 138              	pos_ref:
 139 0000 00000000 	 .space 4
 140              	 .global spd_ref
 141              	 .section .bss.spd_ref,"aw",%nobits
 142              	 .align 2
 145              	spd_ref:
 146 0000 00000000 	 .space 4
 147              	 .global u_q_ref
 148              	 .section .bss.u_q_ref,"aw",%nobits
 149              	 .align 2
 152              	u_q_ref:
 153 0000 00000000 	 .space 4
 154              	 .comm u_d_ref,4,4
 155              	 .global p_part_i_q
 156              	 .section .bss.p_part_i_q,"aw",%nobits
 157              	 .align 2
 160              	p_part_i_q:
 161 0000 00000000 	 .space 4
 162              	 .global p_part_i_d
 163              	 .section .bss.p_part_i_d,"aw",%nobits
 164              	 .align 2
 167              	p_part_i_d:
 168 0000 00000000 	 .space 4
 169              	 .global p_part_spd
 170              	 .section .bss.p_part_spd,"aw",%nobits
 171              	 .align 2
 174              	p_part_spd:
 175 0000 00000000 	 .space 4
 176              	 .global p_part_pos
 177              	 .section .bss.p_part_pos,"aw",%nobits
 178              	 .align 2
 181              	p_part_pos:
 182 0000 00000000 	 .space 4
 183              	 .global i_part_i_q
 184              	 .section .bss.i_part_i_q,"aw",%nobits
 185              	 .align 2
 188              	i_part_i_q:
 189 0000 00000000 	 .space 4
 190              	 .global i_part_i_d
 191              	 .section .bss.i_part_i_d,"aw",%nobits
 192              	 .align 2
 195              	i_part_i_d:
 196 0000 00000000 	 .space 4
 197              	 .global i_part_spd
 198              	 .section .bss.i_part_spd,"aw",%nobits
 199              	 .align 2
 202              	i_part_spd:
 203 0000 00000000 	 .space 4
 204              	 .global i_part_pos
 205              	 .section .bss.i_part_pos,"aw",%nobits
 206              	 .align 2
 209              	i_part_pos:
 210 0000 00000000 	 .space 4
 211              	 .global d_part_pos
 212              	 .section .bss.d_part_pos,"aw",%nobits
 213              	 .align 2
 216              	d_part_pos:
 217 0000 00000000 	 .space 4
 218              	 .global sat_out_currents
 219              	 .section .data.sat_out_currents,"aw",%progbits
 220              	 .align 2
 223              	sat_out_currents:
 224 0000 983A0000 	 .word 15000
 225              	 .global sat_out_spd
 226              	 .section .data.sat_out_spd,"aw",%progbits
 227              	 .align 2
 230              	sat_out_spd:
 231 0000 A00F0000 	 .word 4000
 232              	 .global sat_out_pos
 233              	 .section .data.sat_out_pos,"aw",%progbits
 234              	 .align 2
 237              	sat_out_pos:
 238 0000 32000000 	 .word 50
 239              	 .global sat_out_pos_I
 240              	 .section .data.sat_out_pos_I,"aw",%progbits
 241              	 .align 2
 244              	sat_out_pos_I:
 245 0000 A00F0000 	 .word 4000
 246              	 .comm sat_i_part_currents,4,4
 247              	 .comm sat_i_part_spd,4,4
 248              	 .comm sat_i_part_pos,4,4
 249              	 .comm sat_i_part_pos_I,4,4
 250              	 .section .text.pi_regulator_i_q,"ax",%progbits
 251              	 .align 2
 252              	 .global pi_regulator_i_q
 253              	 .thumb
 254              	 .thumb_func
 256              	pi_regulator_i_q:
 257              	.LFB196:
 258              	 .file 1 "../pi_regulator.c"
   1:../pi_regulator.c **** #include <stdint.h>
   2:../pi_regulator.c **** #include <stdbool.h>
   3:../pi_regulator.c **** #include "pi_regulator.h"
   4:../pi_regulator.c **** #include "transform.h"
   5:../pi_regulator.c **** #include  "driver_adc.h"
   6:../pi_regulator.c **** 
   7:../pi_regulator.c **** float k_p_i= 0.6, k_i_i = 0.01;
   8:../pi_regulator.c **** float k_p_spd = 400, k_i_spd =100;
   9:../pi_regulator.c **** float k_p_pos = 0.05, k_i_pos = 0.001;
  10:../pi_regulator.c **** float k_p_pos_pid = 1, k_i_pos_pid = 0, k_d_pos_pid = 0;
  11:../pi_regulator.c **** float error_i_q = 0, error_i_d = 0, error_spd = 0, error_pos = 0, error_pos_old = 0;
  12:../pi_regulator.c **** float i_q_ref = 0, i_d_ref = 0, pos_ref = 0, spd_ref = 0, u_q_ref = 0, u_d_ref;
  13:../pi_regulator.c **** float p_part_i_q = 0, p_part_i_d = 0, p_part_spd = 0, p_part_pos = 0;
  14:../pi_regulator.c **** float i_part_i_q = 0, i_part_i_d = 0, i_part_spd = 0, i_part_pos = 0;
  15:../pi_regulator.c **** float d_part_pos = 0;
  16:../pi_regulator.c **** 
  17:../pi_regulator.c **** int32_t sat_out_currents = 15000;					//-40[A] & 40[A]
  18:../pi_regulator.c **** int32_t sat_out_spd = 4000;							//-983010[rpm] & 983010[rpm]
  19:../pi_regulator.c **** int32_t sat_out_pos = 50;							//-32bit[iu]	+32bit[iu]
  20:../pi_regulator.c **** int32_t sat_out_pos_I = 4000;
  21:../pi_regulator.c **** 
  22:../pi_regulator.c **** //10% from sat_out
  23:../pi_regulator.c **** int32_t sat_i_part_currents;
  24:../pi_regulator.c **** int32_t sat_i_part_spd;
  25:../pi_regulator.c **** int32_t sat_i_part_pos;
  26:../pi_regulator.c **** int32_t sat_i_part_pos_I;
  27:../pi_regulator.c **** 
  28:../pi_regulator.c **** void pi_regulator_i_q (void)						//i_q -> u_q_ref
  29:../pi_regulator.c **** {
 259              	 .loc 1 29 0
 260              	 .cfi_startproc
 261              	 
 262              	 
 263              	 
 264 0000 80B4     	 push {r7}
 265              	.LCFI0:
 266              	 .cfi_def_cfa_offset 4
 267              	 .cfi_offset 7,-4
 268 0002 00AF     	 add r7,sp,#0
 269              	.LCFI1:
 270              	 .cfi_def_cfa_register 7
  30:../pi_regulator.c **** 	sat_i_part_currents = sat_out_currents/10;
 271              	 .loc 1 30 0
 272 0004 684B     	 ldr r3,.L23
 273 0006 1B68     	 ldr r3,[r3]
 274 0008 684A     	 ldr r2,.L23+4
 275 000a 82FB0312 	 smull r1,r2,r2,r3
 276 000e 9210     	 asrs r2,r2,#2
 277 0010 DB17     	 asrs r3,r3,#31
 278 0012 D31A     	 subs r3,r2,r3
 279 0014 664A     	 ldr r2,.L23+8
 280 0016 1360     	 str r3,[r2]
  31:../pi_regulator.c **** 	error_i_q = i_q_ref - i_q;
 281              	 .loc 1 31 0
 282 0018 664B     	 ldr r3,.L23+12
 283 001a 93ED007A 	 flds s14,[r3]
 284 001e 664B     	 ldr r3,.L23+16
 285 0020 D3ED007A 	 flds s15,[r3]
 286 0024 77EE677A 	 fsubs s15,s14,s15
 287 0028 644B     	 ldr r3,.L23+20
 288 002a C3ED007A 	 fsts s15,[r3]
  32:../pi_regulator.c **** 
  33:../pi_regulator.c **** 	//Proportional part computation
  34:../pi_regulator.c **** 	p_part_i_q = error_i_q*k_p_i;
 289              	 .loc 1 34 0
 290 002e 634B     	 ldr r3,.L23+20
 291 0030 93ED007A 	 flds s14,[r3]
 292 0034 624B     	 ldr r3,.L23+24
 293 0036 D3ED007A 	 flds s15,[r3]
 294 003a 67EE277A 	 fmuls s15,s14,s15
 295 003e 614B     	 ldr r3,.L23+28
 296 0040 C3ED007A 	 fsts s15,[r3]
  35:../pi_regulator.c **** 	if (p_part_i_q > sat_out_currents)
 297              	 .loc 1 35 0
 298 0044 584B     	 ldr r3,.L23
 299 0046 1B68     	 ldr r3,[r3]
 300 0048 07EE903A 	 fmsr s15,r3
 301 004c B8EEE77A 	 fsitos s14,s15
 302 0050 5C4B     	 ldr r3,.L23+28
 303 0052 D3ED007A 	 flds s15,[r3]
 304 0056 B4EEE77A 	 fcmpes s14,s15
 305 005a F1EE10FA 	 fmstat
 306 005e 09D5     	 bpl .L20
  36:../pi_regulator.c **** 	{
  37:../pi_regulator.c **** 		p_part_i_q = sat_out_currents;
 307              	 .loc 1 37 0
 308 0060 514B     	 ldr r3,.L23
 309 0062 1B68     	 ldr r3,[r3]
 310 0064 07EE903A 	 fmsr s15,r3
 311 0068 F8EEE77A 	 fsitos s15,s15
 312 006c 554B     	 ldr r3,.L23+28
 313 006e C3ED007A 	 fsts s15,[r3]
 314 0072 18E0     	 b .L4
 315              	.L20:
  38:../pi_regulator.c **** 	}
  39:../pi_regulator.c **** 	else if(p_part_i_q < -sat_out_currents)
 316              	 .loc 1 39 0
 317 0074 4C4B     	 ldr r3,.L23
 318 0076 1B68     	 ldr r3,[r3]
 319 0078 5B42     	 negs r3,r3
 320 007a 07EE903A 	 fmsr s15,r3
 321 007e B8EEE77A 	 fsitos s14,s15
 322 0082 504B     	 ldr r3,.L23+28
 323 0084 D3ED007A 	 flds s15,[r3]
 324 0088 B4EEE77A 	 fcmpes s14,s15
 325 008c F1EE10FA 	 fmstat
 326 0090 09DD     	 ble .L4
  40:../pi_regulator.c **** 	{
  41:../pi_regulator.c **** 		p_part_i_q = -sat_out_currents;
 327              	 .loc 1 41 0
 328 0092 454B     	 ldr r3,.L23
 329 0094 1B68     	 ldr r3,[r3]
 330 0096 5B42     	 negs r3,r3
 331 0098 07EE903A 	 fmsr s15,r3
 332 009c F8EEE77A 	 fsitos s15,s15
 333 00a0 484B     	 ldr r3,.L23+28
 334 00a2 C3ED007A 	 fsts s15,[r3]
 335              	.L4:
  42:../pi_regulator.c **** 	}
  43:../pi_regulator.c **** 
  44:../pi_regulator.c **** 	//Integral part computation
  45:../pi_regulator.c **** 	i_part_i_q += error_i_q*k_i_i;
 336              	 .loc 1 45 0
 337 00a6 454B     	 ldr r3,.L23+20
 338 00a8 93ED007A 	 flds s14,[r3]
 339 00ac 464B     	 ldr r3,.L23+32
 340 00ae D3ED007A 	 flds s15,[r3]
 341 00b2 27EE277A 	 fmuls s14,s14,s15
 342 00b6 454B     	 ldr r3,.L23+36
 343 00b8 D3ED007A 	 flds s15,[r3]
 344 00bc 77EE277A 	 fadds s15,s14,s15
 345 00c0 424B     	 ldr r3,.L23+36
 346 00c2 C3ED007A 	 fsts s15,[r3]
  46:../pi_regulator.c **** 	if (i_part_i_q > sat_i_part_currents)
 347              	 .loc 1 46 0
 348 00c6 3A4B     	 ldr r3,.L23+8
 349 00c8 1B68     	 ldr r3,[r3]
 350 00ca 07EE903A 	 fmsr s15,r3
 351 00ce B8EEE77A 	 fsitos s14,s15
 352 00d2 3E4B     	 ldr r3,.L23+36
 353 00d4 D3ED007A 	 flds s15,[r3]
 354 00d8 B4EEE77A 	 fcmpes s14,s15
 355 00dc F1EE10FA 	 fmstat
 356 00e0 09D5     	 bpl .L21
  47:../pi_regulator.c **** 	{
  48:../pi_regulator.c **** 		i_part_i_q = sat_i_part_currents;
 357              	 .loc 1 48 0
 358 00e2 334B     	 ldr r3,.L23+8
 359 00e4 1B68     	 ldr r3,[r3]
 360 00e6 07EE903A 	 fmsr s15,r3
 361 00ea F8EEE77A 	 fsitos s15,s15
 362 00ee 374B     	 ldr r3,.L23+36
 363 00f0 C3ED007A 	 fsts s15,[r3]
 364 00f4 18E0     	 b .L8
 365              	.L21:
  49:../pi_regulator.c **** 	}
  50:../pi_regulator.c **** 	else if(i_part_i_q < -sat_i_part_currents)
 366              	 .loc 1 50 0
 367 00f6 2E4B     	 ldr r3,.L23+8
 368 00f8 1B68     	 ldr r3,[r3]
 369 00fa 5B42     	 negs r3,r3
 370 00fc 07EE903A 	 fmsr s15,r3
 371 0100 B8EEE77A 	 fsitos s14,s15
 372 0104 314B     	 ldr r3,.L23+36
 373 0106 D3ED007A 	 flds s15,[r3]
 374 010a B4EEE77A 	 fcmpes s14,s15
 375 010e F1EE10FA 	 fmstat
 376 0112 09DD     	 ble .L8
  51:../pi_regulator.c **** 	{
  52:../pi_regulator.c **** 		i_part_i_q = -sat_i_part_currents;
 377              	 .loc 1 52 0
 378 0114 264B     	 ldr r3,.L23+8
 379 0116 1B68     	 ldr r3,[r3]
 380 0118 5B42     	 negs r3,r3
 381 011a 07EE903A 	 fmsr s15,r3
 382 011e F8EEE77A 	 fsitos s15,s15
 383 0122 2A4B     	 ldr r3,.L23+36
 384 0124 C3ED007A 	 fsts s15,[r3]
 385              	.L8:
  53:../pi_regulator.c **** 	}
  54:../pi_regulator.c **** 
  55:../pi_regulator.c **** 	//Output
  56:../pi_regulator.c **** 	u_q_ref = p_part_i_q + i_part_i_q;
 386              	 .loc 1 56 0
 387 0128 264B     	 ldr r3,.L23+28
 388 012a 93ED007A 	 flds s14,[r3]
 389 012e 274B     	 ldr r3,.L23+36
 390 0130 D3ED007A 	 flds s15,[r3]
 391 0134 77EE277A 	 fadds s15,s14,s15
 392 0138 254B     	 ldr r3,.L23+40
 393 013a C3ED007A 	 fsts s15,[r3]
  57:../pi_regulator.c **** 
  58:../pi_regulator.c **** 	if (u_q_ref > sat_out_currents)
 394              	 .loc 1 58 0
 395 013e 1A4B     	 ldr r3,.L23
 396 0140 1B68     	 ldr r3,[r3]
 397 0142 07EE903A 	 fmsr s15,r3
 398 0146 B8EEE77A 	 fsitos s14,s15
 399 014a 214B     	 ldr r3,.L23+40
 400 014c D3ED007A 	 flds s15,[r3]
 401 0150 B4EEE77A 	 fcmpes s14,s15
 402 0154 F1EE10FA 	 fmstat
 403 0158 09D5     	 bpl .L22
  59:../pi_regulator.c **** 	{
  60:../pi_regulator.c **** 		u_q_ref = sat_out_currents;
 404              	 .loc 1 60 0
 405 015a 134B     	 ldr r3,.L23
 406 015c 1B68     	 ldr r3,[r3]
 407 015e 07EE903A 	 fmsr s15,r3
 408 0162 F8EEE77A 	 fsitos s15,s15
 409 0166 1A4B     	 ldr r3,.L23+40
 410 0168 C3ED007A 	 fsts s15,[r3]
 411 016c 18E0     	 b .L1
 412              	.L22:
  61:../pi_regulator.c **** 	}
  62:../pi_regulator.c **** 	else if(u_q_ref < -sat_out_currents)
 413              	 .loc 1 62 0
 414 016e 0E4B     	 ldr r3,.L23
 415 0170 1B68     	 ldr r3,[r3]
 416 0172 5B42     	 negs r3,r3
 417 0174 07EE903A 	 fmsr s15,r3
 418 0178 B8EEE77A 	 fsitos s14,s15
 419 017c 144B     	 ldr r3,.L23+40
 420 017e D3ED007A 	 flds s15,[r3]
 421 0182 B4EEE77A 	 fcmpes s14,s15
 422 0186 F1EE10FA 	 fmstat
 423 018a 09DD     	 ble .L1
  63:../pi_regulator.c **** 	{
  64:../pi_regulator.c **** 		u_q_ref = -sat_out_currents;
 424              	 .loc 1 64 0
 425 018c 064B     	 ldr r3,.L23
 426 018e 1B68     	 ldr r3,[r3]
 427 0190 5B42     	 negs r3,r3
 428 0192 07EE903A 	 fmsr s15,r3
 429 0196 F8EEE77A 	 fsitos s15,s15
 430 019a 0D4B     	 ldr r3,.L23+40
 431 019c C3ED007A 	 fsts s15,[r3]
 432              	.L1:
  65:../pi_regulator.c **** 	}
  66:../pi_regulator.c **** 
  67:../pi_regulator.c **** }
 433              	 .loc 1 67 0
 434 01a0 BD46     	 mov sp,r7
 435              	.LCFI2:
 436              	 .cfi_def_cfa_register 13
 437              	 
 438 01a2 5DF8047B 	 ldr r7,[sp],#4
 439              	.LCFI3:
 440              	 .cfi_restore 7
 441              	 .cfi_def_cfa_offset 0
 442 01a6 7047     	 bx lr
 443              	.L24:
 444              	 .align 2
 445              	.L23:
 446 01a8 00000000 	 .word sat_out_currents
 447 01ac 67666666 	 .word 1717986919
 448 01b0 00000000 	 .word sat_i_part_currents
 449 01b4 00000000 	 .word i_q_ref
 450 01b8 00000000 	 .word i_q
 451 01bc 00000000 	 .word error_i_q
 452 01c0 00000000 	 .word k_p_i
 453 01c4 00000000 	 .word p_part_i_q
 454 01c8 00000000 	 .word k_i_i
 455 01cc 00000000 	 .word i_part_i_q
 456 01d0 00000000 	 .word u_q_ref
 457              	 .cfi_endproc
 458              	.LFE196:
 460              	 .section .text.pi_regulator_i_d,"ax",%progbits
 461              	 .align 2
 462              	 .global pi_regulator_i_d
 463              	 .thumb
 464              	 .thumb_func
 466              	pi_regulator_i_d:
 467              	.LFB197:
  68:../pi_regulator.c **** 
  69:../pi_regulator.c **** void pi_regulator_i_d (void)					//i_d -> u_d_ref
  70:../pi_regulator.c **** {
 468              	 .loc 1 70 0
 469              	 .cfi_startproc
 470              	 
 471              	 
 472              	 
 473 0000 80B4     	 push {r7}
 474              	.LCFI4:
 475              	 .cfi_def_cfa_offset 4
 476              	 .cfi_offset 7,-4
 477 0002 00AF     	 add r7,sp,#0
 478              	.LCFI5:
 479              	 .cfi_def_cfa_register 7
  71:../pi_regulator.c **** 	sat_i_part_currents = sat_out_currents/10;
 480              	 .loc 1 71 0
 481 0004 684B     	 ldr r3,.L47
 482 0006 1B68     	 ldr r3,[r3]
 483 0008 684A     	 ldr r2,.L47+4
 484 000a 82FB0312 	 smull r1,r2,r2,r3
 485 000e 9210     	 asrs r2,r2,#2
 486 0010 DB17     	 asrs r3,r3,#31
 487 0012 D31A     	 subs r3,r2,r3
 488 0014 664A     	 ldr r2,.L47+8
 489 0016 1360     	 str r3,[r2]
  72:../pi_regulator.c **** 	error_i_d = i_d_ref - i_d;
 490              	 .loc 1 72 0
 491 0018 664B     	 ldr r3,.L47+12
 492 001a 93ED007A 	 flds s14,[r3]
 493 001e 664B     	 ldr r3,.L47+16
 494 0020 D3ED007A 	 flds s15,[r3]
 495 0024 77EE677A 	 fsubs s15,s14,s15
 496 0028 644B     	 ldr r3,.L47+20
 497 002a C3ED007A 	 fsts s15,[r3]
  73:../pi_regulator.c **** 
  74:../pi_regulator.c **** 	//Proportional part computation
  75:../pi_regulator.c **** 	p_part_i_d = error_i_d*k_p_i;
 498              	 .loc 1 75 0
 499 002e 634B     	 ldr r3,.L47+20
 500 0030 93ED007A 	 flds s14,[r3]
 501 0034 624B     	 ldr r3,.L47+24
 502 0036 D3ED007A 	 flds s15,[r3]
 503 003a 67EE277A 	 fmuls s15,s14,s15
 504 003e 614B     	 ldr r3,.L47+28
 505 0040 C3ED007A 	 fsts s15,[r3]
  76:../pi_regulator.c **** 	if (p_part_i_d > sat_out_currents)
 506              	 .loc 1 76 0
 507 0044 584B     	 ldr r3,.L47
 508 0046 1B68     	 ldr r3,[r3]
 509 0048 07EE903A 	 fmsr s15,r3
 510 004c B8EEE77A 	 fsitos s14,s15
 511 0050 5C4B     	 ldr r3,.L47+28
 512 0052 D3ED007A 	 flds s15,[r3]
 513 0056 B4EEE77A 	 fcmpes s14,s15
 514 005a F1EE10FA 	 fmstat
 515 005e 09D5     	 bpl .L44
  77:../pi_regulator.c **** 	{
  78:../pi_regulator.c **** 		p_part_i_d = sat_out_currents;
 516              	 .loc 1 78 0
 517 0060 514B     	 ldr r3,.L47
 518 0062 1B68     	 ldr r3,[r3]
 519 0064 07EE903A 	 fmsr s15,r3
 520 0068 F8EEE77A 	 fsitos s15,s15
 521 006c 554B     	 ldr r3,.L47+28
 522 006e C3ED007A 	 fsts s15,[r3]
 523 0072 18E0     	 b .L28
 524              	.L44:
  79:../pi_regulator.c **** 	}
  80:../pi_regulator.c **** 	else if(p_part_i_d < -sat_out_currents)
 525              	 .loc 1 80 0
 526 0074 4C4B     	 ldr r3,.L47
 527 0076 1B68     	 ldr r3,[r3]
 528 0078 5B42     	 negs r3,r3
 529 007a 07EE903A 	 fmsr s15,r3
 530 007e B8EEE77A 	 fsitos s14,s15
 531 0082 504B     	 ldr r3,.L47+28
 532 0084 D3ED007A 	 flds s15,[r3]
 533 0088 B4EEE77A 	 fcmpes s14,s15
 534 008c F1EE10FA 	 fmstat
 535 0090 09DD     	 ble .L28
  81:../pi_regulator.c **** 	{
  82:../pi_regulator.c **** 		p_part_i_d = -sat_out_currents;
 536              	 .loc 1 82 0
 537 0092 454B     	 ldr r3,.L47
 538 0094 1B68     	 ldr r3,[r3]
 539 0096 5B42     	 negs r3,r3
 540 0098 07EE903A 	 fmsr s15,r3
 541 009c F8EEE77A 	 fsitos s15,s15
 542 00a0 484B     	 ldr r3,.L47+28
 543 00a2 C3ED007A 	 fsts s15,[r3]
 544              	.L28:
  83:../pi_regulator.c **** 	}
  84:../pi_regulator.c **** 
  85:../pi_regulator.c **** 	//Integral part computation
  86:../pi_regulator.c **** 	i_part_i_d += error_i_d*k_i_i;
 545              	 .loc 1 86 0
 546 00a6 454B     	 ldr r3,.L47+20
 547 00a8 93ED007A 	 flds s14,[r3]
 548 00ac 464B     	 ldr r3,.L47+32
 549 00ae D3ED007A 	 flds s15,[r3]
 550 00b2 27EE277A 	 fmuls s14,s14,s15
 551 00b6 454B     	 ldr r3,.L47+36
 552 00b8 D3ED007A 	 flds s15,[r3]
 553 00bc 77EE277A 	 fadds s15,s14,s15
 554 00c0 424B     	 ldr r3,.L47+36
 555 00c2 C3ED007A 	 fsts s15,[r3]
  87:../pi_regulator.c **** 	if (i_part_i_d > sat_i_part_currents)
 556              	 .loc 1 87 0
 557 00c6 3A4B     	 ldr r3,.L47+8
 558 00c8 1B68     	 ldr r3,[r3]
 559 00ca 07EE903A 	 fmsr s15,r3
 560 00ce B8EEE77A 	 fsitos s14,s15
 561 00d2 3E4B     	 ldr r3,.L47+36
 562 00d4 D3ED007A 	 flds s15,[r3]
 563 00d8 B4EEE77A 	 fcmpes s14,s15
 564 00dc F1EE10FA 	 fmstat
 565 00e0 09D5     	 bpl .L45
  88:../pi_regulator.c **** 	{
  89:../pi_regulator.c **** 		i_part_i_d = sat_i_part_currents;
 566              	 .loc 1 89 0
 567 00e2 334B     	 ldr r3,.L47+8
 568 00e4 1B68     	 ldr r3,[r3]
 569 00e6 07EE903A 	 fmsr s15,r3
 570 00ea F8EEE77A 	 fsitos s15,s15
 571 00ee 374B     	 ldr r3,.L47+36
 572 00f0 C3ED007A 	 fsts s15,[r3]
 573 00f4 18E0     	 b .L32
 574              	.L45:
  90:../pi_regulator.c **** 	}
  91:../pi_regulator.c **** 	else if(i_part_i_d < -sat_i_part_currents)
 575              	 .loc 1 91 0
 576 00f6 2E4B     	 ldr r3,.L47+8
 577 00f8 1B68     	 ldr r3,[r3]
 578 00fa 5B42     	 negs r3,r3
 579 00fc 07EE903A 	 fmsr s15,r3
 580 0100 B8EEE77A 	 fsitos s14,s15
 581 0104 314B     	 ldr r3,.L47+36
 582 0106 D3ED007A 	 flds s15,[r3]
 583 010a B4EEE77A 	 fcmpes s14,s15
 584 010e F1EE10FA 	 fmstat
 585 0112 09DD     	 ble .L32
  92:../pi_regulator.c **** 	{
  93:../pi_regulator.c **** 		i_part_i_d = -sat_i_part_currents;
 586              	 .loc 1 93 0
 587 0114 264B     	 ldr r3,.L47+8
 588 0116 1B68     	 ldr r3,[r3]
 589 0118 5B42     	 negs r3,r3
 590 011a 07EE903A 	 fmsr s15,r3
 591 011e F8EEE77A 	 fsitos s15,s15
 592 0122 2A4B     	 ldr r3,.L47+36
 593 0124 C3ED007A 	 fsts s15,[r3]
 594              	.L32:
  94:../pi_regulator.c **** 	}
  95:../pi_regulator.c **** 
  96:../pi_regulator.c **** 	//Output
  97:../pi_regulator.c **** 	u_d_ref = p_part_i_d + i_part_i_d;
 595              	 .loc 1 97 0
 596 0128 264B     	 ldr r3,.L47+28
 597 012a 93ED007A 	 flds s14,[r3]
 598 012e 274B     	 ldr r3,.L47+36
 599 0130 D3ED007A 	 flds s15,[r3]
 600 0134 77EE277A 	 fadds s15,s14,s15
 601 0138 254B     	 ldr r3,.L47+40
 602 013a C3ED007A 	 fsts s15,[r3]
  98:../pi_regulator.c **** 
  99:../pi_regulator.c **** 	if (u_d_ref > sat_out_currents)
 603              	 .loc 1 99 0
 604 013e 1A4B     	 ldr r3,.L47
 605 0140 1B68     	 ldr r3,[r3]
 606 0142 07EE903A 	 fmsr s15,r3
 607 0146 B8EEE77A 	 fsitos s14,s15
 608 014a 214B     	 ldr r3,.L47+40
 609 014c D3ED007A 	 flds s15,[r3]
 610 0150 B4EEE77A 	 fcmpes s14,s15
 611 0154 F1EE10FA 	 fmstat
 612 0158 09D5     	 bpl .L46
 100:../pi_regulator.c **** 	{
 101:../pi_regulator.c **** 		u_d_ref = sat_out_currents;
 613              	 .loc 1 101 0
 614 015a 134B     	 ldr r3,.L47
 615 015c 1B68     	 ldr r3,[r3]
 616 015e 07EE903A 	 fmsr s15,r3
 617 0162 F8EEE77A 	 fsitos s15,s15
 618 0166 1A4B     	 ldr r3,.L47+40
 619 0168 C3ED007A 	 fsts s15,[r3]
 620 016c 18E0     	 b .L25
 621              	.L46:
 102:../pi_regulator.c **** 	}
 103:../pi_regulator.c **** 	else if(u_d_ref < -sat_out_currents)
 622              	 .loc 1 103 0
 623 016e 0E4B     	 ldr r3,.L47
 624 0170 1B68     	 ldr r3,[r3]
 625 0172 5B42     	 negs r3,r3
 626 0174 07EE903A 	 fmsr s15,r3
 627 0178 B8EEE77A 	 fsitos s14,s15
 628 017c 144B     	 ldr r3,.L47+40
 629 017e D3ED007A 	 flds s15,[r3]
 630 0182 B4EEE77A 	 fcmpes s14,s15
 631 0186 F1EE10FA 	 fmstat
 632 018a 09DD     	 ble .L25
 104:../pi_regulator.c **** 	{
 105:../pi_regulator.c **** 		u_d_ref = -sat_out_currents;
 633              	 .loc 1 105 0
 634 018c 064B     	 ldr r3,.L47
 635 018e 1B68     	 ldr r3,[r3]
 636 0190 5B42     	 negs r3,r3
 637 0192 07EE903A 	 fmsr s15,r3
 638 0196 F8EEE77A 	 fsitos s15,s15
 639 019a 0D4B     	 ldr r3,.L47+40
 640 019c C3ED007A 	 fsts s15,[r3]
 641              	.L25:
 106:../pi_regulator.c **** 	}
 107:../pi_regulator.c **** 
 108:../pi_regulator.c **** }
 642              	 .loc 1 108 0
 643 01a0 BD46     	 mov sp,r7
 644              	.LCFI6:
 645              	 .cfi_def_cfa_register 13
 646              	 
 647 01a2 5DF8047B 	 ldr r7,[sp],#4
 648              	.LCFI7:
 649              	 .cfi_restore 7
 650              	 .cfi_def_cfa_offset 0
 651 01a6 7047     	 bx lr
 652              	.L48:
 653              	 .align 2
 654              	.L47:
 655 01a8 00000000 	 .word sat_out_currents
 656 01ac 67666666 	 .word 1717986919
 657 01b0 00000000 	 .word sat_i_part_currents
 658 01b4 00000000 	 .word i_d_ref
 659 01b8 00000000 	 .word i_d
 660 01bc 00000000 	 .word error_i_d
 661 01c0 00000000 	 .word k_p_i
 662 01c4 00000000 	 .word p_part_i_d
 663 01c8 00000000 	 .word k_i_i
 664 01cc 00000000 	 .word i_part_i_d
 665 01d0 00000000 	 .word u_d_ref
 666              	 .cfi_endproc
 667              	.LFE197:
 669              	 .section .text.pi_regulator_speed,"ax",%progbits
 670              	 .align 2
 671              	 .global pi_regulator_speed
 672              	 .thumb
 673              	 .thumb_func
 675              	pi_regulator_speed:
 676              	.LFB198:
 109:../pi_regulator.c **** 
 110:../pi_regulator.c **** void pi_regulator_speed (void)			//motor_spd -> i_q_ref
 111:../pi_regulator.c **** {
 677              	 .loc 1 111 0
 678              	 .cfi_startproc
 679              	 
 680              	 
 681              	 
 682 0000 80B4     	 push {r7}
 683              	.LCFI8:
 684              	 .cfi_def_cfa_offset 4
 685              	 .cfi_offset 7,-4
 686 0002 00AF     	 add r7,sp,#0
 687              	.LCFI9:
 688              	 .cfi_def_cfa_register 7
 112:../pi_regulator.c **** 	sat_i_part_spd = sat_out_spd/10;
 689              	 .loc 1 112 0
 690 0004 6A4B     	 ldr r3,.L71
 691 0006 1B68     	 ldr r3,[r3]
 692 0008 6A4A     	 ldr r2,.L71+4
 693 000a 82FB0312 	 smull r1,r2,r2,r3
 694 000e 9210     	 asrs r2,r2,#2
 695 0010 DB17     	 asrs r3,r3,#31
 696 0012 D31A     	 subs r3,r2,r3
 697 0014 684A     	 ldr r2,.L71+8
 698 0016 1360     	 str r3,[r2]
 113:../pi_regulator.c **** 	error_spd = spd_ref - motor_spd;
 699              	 .loc 1 113 0
 700 0018 684B     	 ldr r3,.L71+12
 701 001a 93ED007A 	 flds s14,[r3]
 702 001e 684B     	 ldr r3,.L71+16
 703 0020 1B68     	 ldr r3,[r3]
 704 0022 07EE903A 	 fmsr s15,r3
 705 0026 F8EEE77A 	 fsitos s15,s15
 706 002a 77EE677A 	 fsubs s15,s14,s15
 707 002e 654B     	 ldr r3,.L71+20
 708 0030 C3ED007A 	 fsts s15,[r3]
 114:../pi_regulator.c **** 
 115:../pi_regulator.c **** 	//Proportional part computation
 116:../pi_regulator.c **** 	p_part_spd = error_spd*k_p_spd;
 709              	 .loc 1 116 0
 710 0034 634B     	 ldr r3,.L71+20
 711 0036 93ED007A 	 flds s14,[r3]
 712 003a 634B     	 ldr r3,.L71+24
 713 003c D3ED007A 	 flds s15,[r3]
 714 0040 67EE277A 	 fmuls s15,s14,s15
 715 0044 614B     	 ldr r3,.L71+28
 716 0046 C3ED007A 	 fsts s15,[r3]
 117:../pi_regulator.c **** 	if (p_part_spd > sat_out_spd)
 717              	 .loc 1 117 0
 718 004a 594B     	 ldr r3,.L71
 719 004c 1B68     	 ldr r3,[r3]
 720 004e 07EE903A 	 fmsr s15,r3
 721 0052 B8EEE77A 	 fsitos s14,s15
 722 0056 5D4B     	 ldr r3,.L71+28
 723 0058 D3ED007A 	 flds s15,[r3]
 724 005c B4EEE77A 	 fcmpes s14,s15
 725 0060 F1EE10FA 	 fmstat
 726 0064 09D5     	 bpl .L68
 118:../pi_regulator.c **** 	{
 119:../pi_regulator.c **** 		p_part_spd = sat_out_spd;
 727              	 .loc 1 119 0
 728 0066 524B     	 ldr r3,.L71
 729 0068 1B68     	 ldr r3,[r3]
 730 006a 07EE903A 	 fmsr s15,r3
 731 006e F8EEE77A 	 fsitos s15,s15
 732 0072 564B     	 ldr r3,.L71+28
 733 0074 C3ED007A 	 fsts s15,[r3]
 734 0078 18E0     	 b .L52
 735              	.L68:
 120:../pi_regulator.c **** 	}
 121:../pi_regulator.c **** 	else if(p_part_spd < -sat_out_spd)
 736              	 .loc 1 121 0
 737 007a 4D4B     	 ldr r3,.L71
 738 007c 1B68     	 ldr r3,[r3]
 739 007e 5B42     	 negs r3,r3
 740 0080 07EE903A 	 fmsr s15,r3
 741 0084 B8EEE77A 	 fsitos s14,s15
 742 0088 504B     	 ldr r3,.L71+28
 743 008a D3ED007A 	 flds s15,[r3]
 744 008e B4EEE77A 	 fcmpes s14,s15
 745 0092 F1EE10FA 	 fmstat
 746 0096 09DD     	 ble .L52
 122:../pi_regulator.c **** 	{
 123:../pi_regulator.c **** 		p_part_spd = -sat_out_spd;
 747              	 .loc 1 123 0
 748 0098 454B     	 ldr r3,.L71
 749 009a 1B68     	 ldr r3,[r3]
 750 009c 5B42     	 negs r3,r3
 751 009e 07EE903A 	 fmsr s15,r3
 752 00a2 F8EEE77A 	 fsitos s15,s15
 753 00a6 494B     	 ldr r3,.L71+28
 754 00a8 C3ED007A 	 fsts s15,[r3]
 755              	.L52:
 124:../pi_regulator.c **** 	}
 125:../pi_regulator.c **** 
 126:../pi_regulator.c **** 	//Integral part computation
 127:../pi_regulator.c **** 	i_part_spd += error_spd*k_i_spd;
 756              	 .loc 1 127 0
 757 00ac 454B     	 ldr r3,.L71+20
 758 00ae 93ED007A 	 flds s14,[r3]
 759 00b2 474B     	 ldr r3,.L71+32
 760 00b4 D3ED007A 	 flds s15,[r3]
 761 00b8 27EE277A 	 fmuls s14,s14,s15
 762 00bc 454B     	 ldr r3,.L71+36
 763 00be D3ED007A 	 flds s15,[r3]
 764 00c2 77EE277A 	 fadds s15,s14,s15
 765 00c6 434B     	 ldr r3,.L71+36
 766 00c8 C3ED007A 	 fsts s15,[r3]
 128:../pi_regulator.c **** 	if (i_part_spd > sat_i_part_spd)
 767              	 .loc 1 128 0
 768 00cc 3A4B     	 ldr r3,.L71+8
 769 00ce 1B68     	 ldr r3,[r3]
 770 00d0 07EE903A 	 fmsr s15,r3
 771 00d4 B8EEE77A 	 fsitos s14,s15
 772 00d8 3E4B     	 ldr r3,.L71+36
 773 00da D3ED007A 	 flds s15,[r3]
 774 00de B4EEE77A 	 fcmpes s14,s15
 775 00e2 F1EE10FA 	 fmstat
 776 00e6 09D5     	 bpl .L69
 129:../pi_regulator.c **** 	{
 130:../pi_regulator.c **** 		i_part_spd = sat_i_part_spd;
 777              	 .loc 1 130 0
 778 00e8 334B     	 ldr r3,.L71+8
 779 00ea 1B68     	 ldr r3,[r3]
 780 00ec 07EE903A 	 fmsr s15,r3
 781 00f0 F8EEE77A 	 fsitos s15,s15
 782 00f4 374B     	 ldr r3,.L71+36
 783 00f6 C3ED007A 	 fsts s15,[r3]
 784 00fa 18E0     	 b .L56
 785              	.L69:
 131:../pi_regulator.c **** 	}
 132:../pi_regulator.c **** 	else if(i_part_spd < -sat_i_part_spd)
 786              	 .loc 1 132 0
 787 00fc 2E4B     	 ldr r3,.L71+8
 788 00fe 1B68     	 ldr r3,[r3]
 789 0100 5B42     	 negs r3,r3
 790 0102 07EE903A 	 fmsr s15,r3
 791 0106 B8EEE77A 	 fsitos s14,s15
 792 010a 324B     	 ldr r3,.L71+36
 793 010c D3ED007A 	 flds s15,[r3]
 794 0110 B4EEE77A 	 fcmpes s14,s15
 795 0114 F1EE10FA 	 fmstat
 796 0118 09DD     	 ble .L56
 133:../pi_regulator.c **** 	{
 134:../pi_regulator.c **** 		i_part_spd = -sat_i_part_spd;
 797              	 .loc 1 134 0
 798 011a 274B     	 ldr r3,.L71+8
 799 011c 1B68     	 ldr r3,[r3]
 800 011e 5B42     	 negs r3,r3
 801 0120 07EE903A 	 fmsr s15,r3
 802 0124 F8EEE77A 	 fsitos s15,s15
 803 0128 2A4B     	 ldr r3,.L71+36
 804 012a C3ED007A 	 fsts s15,[r3]
 805              	.L56:
 135:../pi_regulator.c **** 	}
 136:../pi_regulator.c **** 
 137:../pi_regulator.c **** 	//Output
 138:../pi_regulator.c **** 	i_q_ref = p_part_spd + i_part_spd;
 806              	 .loc 1 138 0
 807 012e 274B     	 ldr r3,.L71+28
 808 0130 93ED007A 	 flds s14,[r3]
 809 0134 274B     	 ldr r3,.L71+36
 810 0136 D3ED007A 	 flds s15,[r3]
 811 013a 77EE277A 	 fadds s15,s14,s15
 812 013e 264B     	 ldr r3,.L71+40
 813 0140 C3ED007A 	 fsts s15,[r3]
 139:../pi_regulator.c **** 
 140:../pi_regulator.c **** 	if (i_q_ref > sat_out_spd)
 814              	 .loc 1 140 0
 815 0144 1A4B     	 ldr r3,.L71
 816 0146 1B68     	 ldr r3,[r3]
 817 0148 07EE903A 	 fmsr s15,r3
 818 014c B8EEE77A 	 fsitos s14,s15
 819 0150 214B     	 ldr r3,.L71+40
 820 0152 D3ED007A 	 flds s15,[r3]
 821 0156 B4EEE77A 	 fcmpes s14,s15
 822 015a F1EE10FA 	 fmstat
 823 015e 09D5     	 bpl .L70
 141:../pi_regulator.c **** 	{
 142:../pi_regulator.c **** 		i_q_ref = sat_out_spd;
 824              	 .loc 1 142 0
 825 0160 134B     	 ldr r3,.L71
 826 0162 1B68     	 ldr r3,[r3]
 827 0164 07EE903A 	 fmsr s15,r3
 828 0168 F8EEE77A 	 fsitos s15,s15
 829 016c 1A4B     	 ldr r3,.L71+40
 830 016e C3ED007A 	 fsts s15,[r3]
 831 0172 18E0     	 b .L49
 832              	.L70:
 143:../pi_regulator.c **** 	}
 144:../pi_regulator.c **** 	else if(u_q_ref < -sat_out_spd)
 833              	 .loc 1 144 0
 834 0174 0E4B     	 ldr r3,.L71
 835 0176 1B68     	 ldr r3,[r3]
 836 0178 5B42     	 negs r3,r3
 837 017a 07EE903A 	 fmsr s15,r3
 838 017e B8EEE77A 	 fsitos s14,s15
 839 0182 164B     	 ldr r3,.L71+44
 840 0184 D3ED007A 	 flds s15,[r3]
 841 0188 B4EEE77A 	 fcmpes s14,s15
 842 018c F1EE10FA 	 fmstat
 843 0190 09DD     	 ble .L49
 145:../pi_regulator.c **** 	{
 146:../pi_regulator.c **** 		i_q_ref = -sat_out_spd;
 844              	 .loc 1 146 0
 845 0192 074B     	 ldr r3,.L71
 846 0194 1B68     	 ldr r3,[r3]
 847 0196 5B42     	 negs r3,r3
 848 0198 07EE903A 	 fmsr s15,r3
 849 019c F8EEE77A 	 fsitos s15,s15
 850 01a0 0D4B     	 ldr r3,.L71+40
 851 01a2 C3ED007A 	 fsts s15,[r3]
 852              	.L49:
 147:../pi_regulator.c **** 	}
 148:../pi_regulator.c **** 
 149:../pi_regulator.c **** }
 853              	 .loc 1 149 0
 854 01a6 BD46     	 mov sp,r7
 855              	.LCFI10:
 856              	 .cfi_def_cfa_register 13
 857              	 
 858 01a8 5DF8047B 	 ldr r7,[sp],#4
 859              	.LCFI11:
 860              	 .cfi_restore 7
 861              	 .cfi_def_cfa_offset 0
 862 01ac 7047     	 bx lr
 863              	.L72:
 864 01ae 00BF     	 .align 2
 865              	.L71:
 866 01b0 00000000 	 .word sat_out_spd
 867 01b4 67666666 	 .word 1717986919
 868 01b8 00000000 	 .word sat_i_part_spd
 869 01bc 00000000 	 .word spd_ref
 870 01c0 00000000 	 .word motor_spd
 871 01c4 00000000 	 .word error_spd
 872 01c8 00000000 	 .word k_p_spd
 873 01cc 00000000 	 .word p_part_spd
 874 01d0 00000000 	 .word k_i_spd
 875 01d4 00000000 	 .word i_part_spd
 876 01d8 00000000 	 .word i_q_ref
 877 01dc 00000000 	 .word u_q_ref
 878              	 .cfi_endproc
 879              	.LFE198:
 881              	 .section .text.pi_regulator_pos,"ax",%progbits
 882              	 .align 2
 883              	 .global pi_regulator_pos
 884              	 .thumb
 885              	 .thumb_func
 887              	pi_regulator_pos:
 888              	.LFB199:
 150:../pi_regulator.c **** void pi_regulator_pos (void)				//mechanical_position_fast -> spd_ref
 151:../pi_regulator.c **** {
 889              	 .loc 1 151 0
 890              	 .cfi_startproc
 891              	 
 892              	 
 893              	 
 894 0000 80B4     	 push {r7}
 895              	.LCFI12:
 896              	 .cfi_def_cfa_offset 4
 897              	 .cfi_offset 7,-4
 898 0002 00AF     	 add r7,sp,#0
 899              	.LCFI13:
 900              	 .cfi_def_cfa_register 7
 152:../pi_regulator.c **** 	sat_i_part_pos = sat_out_pos/10;
 901              	 .loc 1 152 0
 902 0004 6A4B     	 ldr r3,.L95
 903 0006 1B68     	 ldr r3,[r3]
 904 0008 6A4A     	 ldr r2,.L95+4
 905 000a 82FB0312 	 smull r1,r2,r2,r3
 906 000e 9210     	 asrs r2,r2,#2
 907 0010 DB17     	 asrs r3,r3,#31
 908 0012 D31A     	 subs r3,r2,r3
 909 0014 684A     	 ldr r2,.L95+8
 910 0016 1360     	 str r3,[r2]
 153:../pi_regulator.c **** 	error_pos = pos_ref - mechanical_position_fast;
 911              	 .loc 1 153 0
 912 0018 684B     	 ldr r3,.L95+12
 913 001a 93ED007A 	 flds s14,[r3]
 914 001e 684B     	 ldr r3,.L95+16
 915 0020 1B68     	 ldr r3,[r3]
 916 0022 07EE903A 	 fmsr s15,r3
 917 0026 F8EEE77A 	 fsitos s15,s15
 918 002a 77EE677A 	 fsubs s15,s14,s15
 919 002e 654B     	 ldr r3,.L95+20
 920 0030 C3ED007A 	 fsts s15,[r3]
 154:../pi_regulator.c **** 
 155:../pi_regulator.c **** 	//Proportional part computation
 156:../pi_regulator.c **** 	p_part_pos = error_pos*k_p_pos;
 921              	 .loc 1 156 0
 922 0034 634B     	 ldr r3,.L95+20
 923 0036 93ED007A 	 flds s14,[r3]
 924 003a 634B     	 ldr r3,.L95+24
 925 003c D3ED007A 	 flds s15,[r3]
 926 0040 67EE277A 	 fmuls s15,s14,s15
 927 0044 614B     	 ldr r3,.L95+28
 928 0046 C3ED007A 	 fsts s15,[r3]
 157:../pi_regulator.c **** 	if (p_part_pos > sat_out_pos)
 929              	 .loc 1 157 0
 930 004a 594B     	 ldr r3,.L95
 931 004c 1B68     	 ldr r3,[r3]
 932 004e 07EE903A 	 fmsr s15,r3
 933 0052 B8EEE77A 	 fsitos s14,s15
 934 0056 5D4B     	 ldr r3,.L95+28
 935 0058 D3ED007A 	 flds s15,[r3]
 936 005c B4EEE77A 	 fcmpes s14,s15
 937 0060 F1EE10FA 	 fmstat
 938 0064 09D5     	 bpl .L92
 158:../pi_regulator.c **** 	{
 159:../pi_regulator.c **** 		p_part_pos = sat_out_pos;
 939              	 .loc 1 159 0
 940 0066 524B     	 ldr r3,.L95
 941 0068 1B68     	 ldr r3,[r3]
 942 006a 07EE903A 	 fmsr s15,r3
 943 006e F8EEE77A 	 fsitos s15,s15
 944 0072 564B     	 ldr r3,.L95+28
 945 0074 C3ED007A 	 fsts s15,[r3]
 946 0078 18E0     	 b .L76
 947              	.L92:
 160:../pi_regulator.c **** 	}
 161:../pi_regulator.c **** 	else if(p_part_pos < -sat_out_pos)
 948              	 .loc 1 161 0
 949 007a 4D4B     	 ldr r3,.L95
 950 007c 1B68     	 ldr r3,[r3]
 951 007e 5B42     	 negs r3,r3
 952 0080 07EE903A 	 fmsr s15,r3
 953 0084 B8EEE77A 	 fsitos s14,s15
 954 0088 504B     	 ldr r3,.L95+28
 955 008a D3ED007A 	 flds s15,[r3]
 956 008e B4EEE77A 	 fcmpes s14,s15
 957 0092 F1EE10FA 	 fmstat
 958 0096 09DD     	 ble .L76
 162:../pi_regulator.c **** 	{
 163:../pi_regulator.c **** 		p_part_pos = -sat_out_pos;
 959              	 .loc 1 163 0
 960 0098 454B     	 ldr r3,.L95
 961 009a 1B68     	 ldr r3,[r3]
 962 009c 5B42     	 negs r3,r3
 963 009e 07EE903A 	 fmsr s15,r3
 964 00a2 F8EEE77A 	 fsitos s15,s15
 965 00a6 494B     	 ldr r3,.L95+28
 966 00a8 C3ED007A 	 fsts s15,[r3]
 967              	.L76:
 164:../pi_regulator.c **** 	}
 165:../pi_regulator.c **** 
 166:../pi_regulator.c **** 	//Integral part computation
 167:../pi_regulator.c **** 	i_part_pos += error_pos*k_i_pos;
 968              	 .loc 1 167 0
 969 00ac 454B     	 ldr r3,.L95+20
 970 00ae 93ED007A 	 flds s14,[r3]
 971 00b2 474B     	 ldr r3,.L95+32
 972 00b4 D3ED007A 	 flds s15,[r3]
 973 00b8 27EE277A 	 fmuls s14,s14,s15
 974 00bc 454B     	 ldr r3,.L95+36
 975 00be D3ED007A 	 flds s15,[r3]
 976 00c2 77EE277A 	 fadds s15,s14,s15
 977 00c6 434B     	 ldr r3,.L95+36
 978 00c8 C3ED007A 	 fsts s15,[r3]
 168:../pi_regulator.c **** 	if (i_part_pos > sat_i_part_pos)
 979              	 .loc 1 168 0
 980 00cc 3A4B     	 ldr r3,.L95+8
 981 00ce 1B68     	 ldr r3,[r3]
 982 00d0 07EE903A 	 fmsr s15,r3
 983 00d4 B8EEE77A 	 fsitos s14,s15
 984 00d8 3E4B     	 ldr r3,.L95+36
 985 00da D3ED007A 	 flds s15,[r3]
 986 00de B4EEE77A 	 fcmpes s14,s15
 987 00e2 F1EE10FA 	 fmstat
 988 00e6 09D5     	 bpl .L93
 169:../pi_regulator.c **** 	{
 170:../pi_regulator.c **** 		i_part_pos = sat_i_part_pos;
 989              	 .loc 1 170 0
 990 00e8 334B     	 ldr r3,.L95+8
 991 00ea 1B68     	 ldr r3,[r3]
 992 00ec 07EE903A 	 fmsr s15,r3
 993 00f0 F8EEE77A 	 fsitos s15,s15
 994 00f4 374B     	 ldr r3,.L95+36
 995 00f6 C3ED007A 	 fsts s15,[r3]
 996 00fa 18E0     	 b .L80
 997              	.L93:
 171:../pi_regulator.c **** 	}
 172:../pi_regulator.c **** 	else if(i_part_pos < -sat_i_part_pos)
 998              	 .loc 1 172 0
 999 00fc 2E4B     	 ldr r3,.L95+8
 1000 00fe 1B68     	 ldr r3,[r3]
 1001 0100 5B42     	 negs r3,r3
 1002 0102 07EE903A 	 fmsr s15,r3
 1003 0106 B8EEE77A 	 fsitos s14,s15
 1004 010a 324B     	 ldr r3,.L95+36
 1005 010c D3ED007A 	 flds s15,[r3]
 1006 0110 B4EEE77A 	 fcmpes s14,s15
 1007 0114 F1EE10FA 	 fmstat
 1008 0118 09DD     	 ble .L80
 173:../pi_regulator.c **** 	{
 174:../pi_regulator.c **** 		i_part_pos = -sat_i_part_pos;
 1009              	 .loc 1 174 0
 1010 011a 274B     	 ldr r3,.L95+8
 1011 011c 1B68     	 ldr r3,[r3]
 1012 011e 5B42     	 negs r3,r3
 1013 0120 07EE903A 	 fmsr s15,r3
 1014 0124 F8EEE77A 	 fsitos s15,s15
 1015 0128 2A4B     	 ldr r3,.L95+36
 1016 012a C3ED007A 	 fsts s15,[r3]
 1017              	.L80:
 175:../pi_regulator.c **** 	}
 176:../pi_regulator.c **** 
 177:../pi_regulator.c **** 	//Output
 178:../pi_regulator.c **** 	spd_ref = p_part_pos + i_part_pos;
 1018              	 .loc 1 178 0
 1019 012e 274B     	 ldr r3,.L95+28
 1020 0130 93ED007A 	 flds s14,[r3]
 1021 0134 274B     	 ldr r3,.L95+36
 1022 0136 D3ED007A 	 flds s15,[r3]
 1023 013a 77EE277A 	 fadds s15,s14,s15
 1024 013e 264B     	 ldr r3,.L95+40
 1025 0140 C3ED007A 	 fsts s15,[r3]
 179:../pi_regulator.c **** 
 180:../pi_regulator.c **** 	if (spd_ref > sat_out_pos)
 1026              	 .loc 1 180 0
 1027 0144 1A4B     	 ldr r3,.L95
 1028 0146 1B68     	 ldr r3,[r3]
 1029 0148 07EE903A 	 fmsr s15,r3
 1030 014c B8EEE77A 	 fsitos s14,s15
 1031 0150 214B     	 ldr r3,.L95+40
 1032 0152 D3ED007A 	 flds s15,[r3]
 1033 0156 B4EEE77A 	 fcmpes s14,s15
 1034 015a F1EE10FA 	 fmstat
 1035 015e 09D5     	 bpl .L94
 181:../pi_regulator.c **** 	{
 182:../pi_regulator.c **** 		spd_ref = sat_out_pos;
 1036              	 .loc 1 182 0
 1037 0160 134B     	 ldr r3,.L95
 1038 0162 1B68     	 ldr r3,[r3]
 1039 0164 07EE903A 	 fmsr s15,r3
 1040 0168 F8EEE77A 	 fsitos s15,s15
 1041 016c 1A4B     	 ldr r3,.L95+40
 1042 016e C3ED007A 	 fsts s15,[r3]
 1043 0172 18E0     	 b .L73
 1044              	.L94:
 183:../pi_regulator.c **** 	}
 184:../pi_regulator.c **** 	else if(spd_ref < -sat_out_pos)
 1045              	 .loc 1 184 0
 1046 0174 0E4B     	 ldr r3,.L95
 1047 0176 1B68     	 ldr r3,[r3]
 1048 0178 5B42     	 negs r3,r3
 1049 017a 07EE903A 	 fmsr s15,r3
 1050 017e B8EEE77A 	 fsitos s14,s15
 1051 0182 154B     	 ldr r3,.L95+40
 1052 0184 D3ED007A 	 flds s15,[r3]
 1053 0188 B4EEE77A 	 fcmpes s14,s15
 1054 018c F1EE10FA 	 fmstat
 1055 0190 09DD     	 ble .L73
 185:../pi_regulator.c **** 	{
 186:../pi_regulator.c **** 		spd_ref = -sat_out_pos;
 1056              	 .loc 1 186 0
 1057 0192 074B     	 ldr r3,.L95
 1058 0194 1B68     	 ldr r3,[r3]
 1059 0196 5B42     	 negs r3,r3
 1060 0198 07EE903A 	 fmsr s15,r3
 1061 019c F8EEE77A 	 fsitos s15,s15
 1062 01a0 0D4B     	 ldr r3,.L95+40
 1063 01a2 C3ED007A 	 fsts s15,[r3]
 1064              	.L73:
 187:../pi_regulator.c **** 	}
 188:../pi_regulator.c **** 
 189:../pi_regulator.c **** }
 1065              	 .loc 1 189 0
 1066 01a6 BD46     	 mov sp,r7
 1067              	.LCFI14:
 1068              	 .cfi_def_cfa_register 13
 1069              	 
 1070 01a8 5DF8047B 	 ldr r7,[sp],#4
 1071              	.LCFI15:
 1072              	 .cfi_restore 7
 1073              	 .cfi_def_cfa_offset 0
 1074 01ac 7047     	 bx lr
 1075              	.L96:
 1076 01ae 00BF     	 .align 2
 1077              	.L95:
 1078 01b0 00000000 	 .word sat_out_pos
 1079 01b4 67666666 	 .word 1717986919
 1080 01b8 00000000 	 .word sat_i_part_pos
 1081 01bc 00000000 	 .word pos_ref
 1082 01c0 00000000 	 .word mechanical_position_fast
 1083 01c4 00000000 	 .word error_pos
 1084 01c8 00000000 	 .word k_p_pos
 1085 01cc 00000000 	 .word p_part_pos
 1086 01d0 00000000 	 .word k_i_pos
 1087 01d4 00000000 	 .word i_part_pos
 1088 01d8 00000000 	 .word spd_ref
 1089              	 .cfi_endproc
 1090              	.LFE199:
 1092              	 .section .text.pid_regulator_pos,"ax",%progbits
 1093              	 .align 2
 1094              	 .global pid_regulator_pos
 1095              	 .thumb
 1096              	 .thumb_func
 1098              	pid_regulator_pos:
 1099              	.LFB200:
 190:../pi_regulator.c **** void pid_regulator_pos (void)				//mechanical_position_fast -> spd_ref
 191:../pi_regulator.c **** {
 1100              	 .loc 1 191 0
 1101              	 .cfi_startproc
 1102              	 
 1103              	 
 1104              	 
 1105 0000 80B4     	 push {r7}
 1106              	.LCFI16:
 1107              	 .cfi_def_cfa_offset 4
 1108              	 .cfi_offset 7,-4
 1109 0002 00AF     	 add r7,sp,#0
 1110              	.LCFI17:
 1111              	 .cfi_def_cfa_register 7
 192:../pi_regulator.c **** 	sat_i_part_pos_I = sat_out_pos_I/10;
 1112              	 .loc 1 192 0
 1113 0004 8F4B     	 ldr r3,.L126
 1114 0006 1B68     	 ldr r3,[r3]
 1115 0008 8F4A     	 ldr r2,.L126+4
 1116 000a 82FB0312 	 smull r1,r2,r2,r3
 1117 000e 9210     	 asrs r2,r2,#2
 1118 0010 DB17     	 asrs r3,r3,#31
 1119 0012 D31A     	 subs r3,r2,r3
 1120 0014 8D4A     	 ldr r2,.L126+8
 1121 0016 1360     	 str r3,[r2]
 193:../pi_regulator.c **** 	error_pos = pos_ref - mechanical_position_fast;
 1122              	 .loc 1 193 0
 1123 0018 8D4B     	 ldr r3,.L126+12
 1124 001a 93ED007A 	 flds s14,[r3]
 1125 001e 8D4B     	 ldr r3,.L126+16
 1126 0020 1B68     	 ldr r3,[r3]
 1127 0022 07EE903A 	 fmsr s15,r3
 1128 0026 F8EEE77A 	 fsitos s15,s15
 1129 002a 77EE677A 	 fsubs s15,s14,s15
 1130 002e 8A4B     	 ldr r3,.L126+20
 1131 0030 C3ED007A 	 fsts s15,[r3]
 194:../pi_regulator.c **** 
 195:../pi_regulator.c **** 	//Proportional part computation
 196:../pi_regulator.c **** 	p_part_pos = error_pos*k_p_pos_pid;
 1132              	 .loc 1 196 0
 1133 0034 884B     	 ldr r3,.L126+20
 1134 0036 93ED007A 	 flds s14,[r3]
 1135 003a 884B     	 ldr r3,.L126+24
 1136 003c D3ED007A 	 flds s15,[r3]
 1137 0040 67EE277A 	 fmuls s15,s14,s15
 1138 0044 864B     	 ldr r3,.L126+28
 1139 0046 C3ED007A 	 fsts s15,[r3]
 197:../pi_regulator.c **** 	if (p_part_pos > sat_out_pos_I)
 1140              	 .loc 1 197 0
 1141 004a 7E4B     	 ldr r3,.L126
 1142 004c 1B68     	 ldr r3,[r3]
 1143 004e 07EE903A 	 fmsr s15,r3
 1144 0052 B8EEE77A 	 fsitos s14,s15
 1145 0056 824B     	 ldr r3,.L126+28
 1146 0058 D3ED007A 	 flds s15,[r3]
 1147 005c B4EEE77A 	 fcmpes s14,s15
 1148 0060 F1EE10FA 	 fmstat
 1149 0064 09D5     	 bpl .L122
 198:../pi_regulator.c **** 	{
 199:../pi_regulator.c **** 		p_part_pos = sat_out_pos_I;
 1150              	 .loc 1 199 0
 1151 0066 774B     	 ldr r3,.L126
 1152 0068 1B68     	 ldr r3,[r3]
 1153 006a 07EE903A 	 fmsr s15,r3
 1154 006e F8EEE77A 	 fsitos s15,s15
 1155 0072 7B4B     	 ldr r3,.L126+28
 1156 0074 C3ED007A 	 fsts s15,[r3]
 1157 0078 18E0     	 b .L100
 1158              	.L122:
 200:../pi_regulator.c **** 	}
 201:../pi_regulator.c **** 	else if(p_part_pos < -sat_out_pos_I)
 1159              	 .loc 1 201 0
 1160 007a 724B     	 ldr r3,.L126
 1161 007c 1B68     	 ldr r3,[r3]
 1162 007e 5B42     	 negs r3,r3
 1163 0080 07EE903A 	 fmsr s15,r3
 1164 0084 B8EEE77A 	 fsitos s14,s15
 1165 0088 754B     	 ldr r3,.L126+28
 1166 008a D3ED007A 	 flds s15,[r3]
 1167 008e B4EEE77A 	 fcmpes s14,s15
 1168 0092 F1EE10FA 	 fmstat
 1169 0096 09DD     	 ble .L100
 202:../pi_regulator.c **** 	{
 203:../pi_regulator.c **** 		p_part_pos = -sat_out_pos_I;
 1170              	 .loc 1 203 0
 1171 0098 6A4B     	 ldr r3,.L126
 1172 009a 1B68     	 ldr r3,[r3]
 1173 009c 5B42     	 negs r3,r3
 1174 009e 07EE903A 	 fmsr s15,r3
 1175 00a2 F8EEE77A 	 fsitos s15,s15
 1176 00a6 6E4B     	 ldr r3,.L126+28
 1177 00a8 C3ED007A 	 fsts s15,[r3]
 1178              	.L100:
 204:../pi_regulator.c **** 	}
 205:../pi_regulator.c **** 
 206:../pi_regulator.c **** 	//Integral part computation
 207:../pi_regulator.c **** 	i_part_pos += error_pos*k_i_pos_pid;
 1179              	 .loc 1 207 0
 1180 00ac 6A4B     	 ldr r3,.L126+20
 1181 00ae 93ED007A 	 flds s14,[r3]
 1182 00b2 6C4B     	 ldr r3,.L126+32
 1183 00b4 D3ED007A 	 flds s15,[r3]
 1184 00b8 27EE277A 	 fmuls s14,s14,s15
 1185 00bc 6A4B     	 ldr r3,.L126+36
 1186 00be D3ED007A 	 flds s15,[r3]
 1187 00c2 77EE277A 	 fadds s15,s14,s15
 1188 00c6 684B     	 ldr r3,.L126+36
 1189 00c8 C3ED007A 	 fsts s15,[r3]
 208:../pi_regulator.c **** 	if (i_part_pos > sat_i_part_pos_I)
 1190              	 .loc 1 208 0
 1191 00cc 5F4B     	 ldr r3,.L126+8
 1192 00ce 1B68     	 ldr r3,[r3]
 1193 00d0 07EE903A 	 fmsr s15,r3
 1194 00d4 B8EEE77A 	 fsitos s14,s15
 1195 00d8 634B     	 ldr r3,.L126+36
 1196 00da D3ED007A 	 flds s15,[r3]
 1197 00de B4EEE77A 	 fcmpes s14,s15
 1198 00e2 F1EE10FA 	 fmstat
 1199 00e6 09D5     	 bpl .L123
 209:../pi_regulator.c **** 	{
 210:../pi_regulator.c **** 		i_part_pos = sat_i_part_pos_I;
 1200              	 .loc 1 210 0
 1201 00e8 584B     	 ldr r3,.L126+8
 1202 00ea 1B68     	 ldr r3,[r3]
 1203 00ec 07EE903A 	 fmsr s15,r3
 1204 00f0 F8EEE77A 	 fsitos s15,s15
 1205 00f4 5C4B     	 ldr r3,.L126+36
 1206 00f6 C3ED007A 	 fsts s15,[r3]
 1207 00fa 18E0     	 b .L104
 1208              	.L123:
 211:../pi_regulator.c **** 	}
 212:../pi_regulator.c **** 	else if(i_part_pos < -sat_i_part_pos_I)
 1209              	 .loc 1 212 0
 1210 00fc 534B     	 ldr r3,.L126+8
 1211 00fe 1B68     	 ldr r3,[r3]
 1212 0100 5B42     	 negs r3,r3
 1213 0102 07EE903A 	 fmsr s15,r3
 1214 0106 B8EEE77A 	 fsitos s14,s15
 1215 010a 574B     	 ldr r3,.L126+36
 1216 010c D3ED007A 	 flds s15,[r3]
 1217 0110 B4EEE77A 	 fcmpes s14,s15
 1218 0114 F1EE10FA 	 fmstat
 1219 0118 09DD     	 ble .L104
 213:../pi_regulator.c **** 	{
 214:../pi_regulator.c **** 		i_part_pos = -sat_i_part_pos_I;
 1220              	 .loc 1 214 0
 1221 011a 4C4B     	 ldr r3,.L126+8
 1222 011c 1B68     	 ldr r3,[r3]
 1223 011e 5B42     	 negs r3,r3
 1224 0120 07EE903A 	 fmsr s15,r3
 1225 0124 F8EEE77A 	 fsitos s15,s15
 1226 0128 4F4B     	 ldr r3,.L126+36
 1227 012a C3ED007A 	 fsts s15,[r3]
 1228              	.L104:
 215:../pi_regulator.c **** 	}
 216:../pi_regulator.c **** 
 217:../pi_regulator.c **** 	d_part_pos = (error_pos - error_pos_old) * k_d_pos_pid;
 1229              	 .loc 1 217 0
 1230 012e 4A4B     	 ldr r3,.L126+20
 1231 0130 93ED007A 	 flds s14,[r3]
 1232 0134 4D4B     	 ldr r3,.L126+40
 1233 0136 D3ED007A 	 flds s15,[r3]
 1234 013a 37EE677A 	 fsubs s14,s14,s15
 1235 013e 4C4B     	 ldr r3,.L126+44
 1236 0140 D3ED007A 	 flds s15,[r3]
 1237 0144 67EE277A 	 fmuls s15,s14,s15
 1238 0148 4A4B     	 ldr r3,.L126+48
 1239 014a C3ED007A 	 fsts s15,[r3]
 218:../pi_regulator.c **** 	error_pos_old = error_pos;
 1240              	 .loc 1 218 0
 1241 014e 424B     	 ldr r3,.L126+20
 1242 0150 1B68     	 ldr r3,[r3]
 1243 0152 464A     	 ldr r2,.L126+40
 1244 0154 1360     	 str r3,[r2]
 219:../pi_regulator.c **** 	if (d_part_pos > sat_out_pos_I)
 1245              	 .loc 1 219 0
 1246 0156 3B4B     	 ldr r3,.L126
 1247 0158 1B68     	 ldr r3,[r3]
 1248 015a 07EE903A 	 fmsr s15,r3
 1249 015e B8EEE77A 	 fsitos s14,s15
 1250 0162 444B     	 ldr r3,.L126+48
 1251 0164 D3ED007A 	 flds s15,[r3]
 1252 0168 B4EEE77A 	 fcmpes s14,s15
 1253 016c F1EE10FA 	 fmstat
 1254 0170 09D5     	 bpl .L124
 220:../pi_regulator.c **** 	{
 221:../pi_regulator.c **** 		d_part_pos = sat_out_pos_I;
 1255              	 .loc 1 221 0
 1256 0172 344B     	 ldr r3,.L126
 1257 0174 1B68     	 ldr r3,[r3]
 1258 0176 07EE903A 	 fmsr s15,r3
 1259 017a F8EEE77A 	 fsitos s15,s15
 1260 017e 3D4B     	 ldr r3,.L126+48
 1261 0180 C3ED007A 	 fsts s15,[r3]
 1262 0184 18E0     	 b .L108
 1263              	.L124:
 222:../pi_regulator.c **** 	}
 223:../pi_regulator.c **** 	else if(d_part_pos < -sat_out_pos_I)
 1264              	 .loc 1 223 0
 1265 0186 2F4B     	 ldr r3,.L126
 1266 0188 1B68     	 ldr r3,[r3]
 1267 018a 5B42     	 negs r3,r3
 1268 018c 07EE903A 	 fmsr s15,r3
 1269 0190 B8EEE77A 	 fsitos s14,s15
 1270 0194 374B     	 ldr r3,.L126+48
 1271 0196 D3ED007A 	 flds s15,[r3]
 1272 019a B4EEE77A 	 fcmpes s14,s15
 1273 019e F1EE10FA 	 fmstat
 1274 01a2 09DD     	 ble .L108
 224:../pi_regulator.c **** 	{
 225:../pi_regulator.c **** 		d_part_pos = -sat_out_pos_I;
 1275              	 .loc 1 225 0
 1276 01a4 274B     	 ldr r3,.L126
 1277 01a6 1B68     	 ldr r3,[r3]
 1278 01a8 5B42     	 negs r3,r3
 1279 01aa 07EE903A 	 fmsr s15,r3
 1280 01ae F8EEE77A 	 fsitos s15,s15
 1281 01b2 304B     	 ldr r3,.L126+48
 1282 01b4 C3ED007A 	 fsts s15,[r3]
 1283              	.L108:
 226:../pi_regulator.c **** 	}
 227:../pi_regulator.c **** 
 228:../pi_regulator.c **** 	//Output
 229:../pi_regulator.c **** 	i_q_ref = p_part_pos + i_part_pos + d_part_pos;
 1284              	 .loc 1 229 0
 1285 01b8 294B     	 ldr r3,.L126+28
 1286 01ba 93ED007A 	 flds s14,[r3]
 1287 01be 2A4B     	 ldr r3,.L126+36
 1288 01c0 D3ED007A 	 flds s15,[r3]
 1289 01c4 37EE277A 	 fadds s14,s14,s15
 1290 01c8 2A4B     	 ldr r3,.L126+48
 1291 01ca D3ED007A 	 flds s15,[r3]
 1292 01ce 77EE277A 	 fadds s15,s14,s15
 1293 01d2 294B     	 ldr r3,.L126+52
 1294 01d4 C3ED007A 	 fsts s15,[r3]
 230:../pi_regulator.c **** 
 231:../pi_regulator.c **** 	if (i_q_ref > sat_out_pos_I)
 1295              	 .loc 1 231 0
 1296 01d8 1A4B     	 ldr r3,.L126
 1297 01da 1B68     	 ldr r3,[r3]
 1298 01dc 07EE903A 	 fmsr s15,r3
 1299 01e0 B8EEE77A 	 fsitos s14,s15
 1300 01e4 244B     	 ldr r3,.L126+52
 1301 01e6 D3ED007A 	 flds s15,[r3]
 1302 01ea B4EEE77A 	 fcmpes s14,s15
 1303 01ee F1EE10FA 	 fmstat
 1304 01f2 09D5     	 bpl .L125
 232:../pi_regulator.c **** 	{
 233:../pi_regulator.c **** 		i_q_ref = sat_out_pos_I;
 1305              	 .loc 1 233 0
 1306 01f4 134B     	 ldr r3,.L126
 1307 01f6 1B68     	 ldr r3,[r3]
 1308 01f8 07EE903A 	 fmsr s15,r3
 1309 01fc F8EEE77A 	 fsitos s15,s15
 1310 0200 1D4B     	 ldr r3,.L126+52
 1311 0202 C3ED007A 	 fsts s15,[r3]
 1312 0206 18E0     	 b .L97
 1313              	.L125:
 234:../pi_regulator.c **** 	}
 235:../pi_regulator.c **** 	else if(i_q_ref < -sat_out_pos_I)
 1314              	 .loc 1 235 0
 1315 0208 0E4B     	 ldr r3,.L126
 1316 020a 1B68     	 ldr r3,[r3]
 1317 020c 5B42     	 negs r3,r3
 1318 020e 07EE903A 	 fmsr s15,r3
 1319 0212 B8EEE77A 	 fsitos s14,s15
 1320 0216 184B     	 ldr r3,.L126+52
 1321 0218 D3ED007A 	 flds s15,[r3]
 1322 021c B4EEE77A 	 fcmpes s14,s15
 1323 0220 F1EE10FA 	 fmstat
 1324 0224 09DD     	 ble .L97
 236:../pi_regulator.c **** 	{
 237:../pi_regulator.c **** 		i_q_ref = -sat_out_pos_I;
 1325              	 .loc 1 237 0
 1326 0226 074B     	 ldr r3,.L126
 1327 0228 1B68     	 ldr r3,[r3]
 1328 022a 5B42     	 negs r3,r3
 1329 022c 07EE903A 	 fmsr s15,r3
 1330 0230 F8EEE77A 	 fsitos s15,s15
 1331 0234 104B     	 ldr r3,.L126+52
 1332 0236 C3ED007A 	 fsts s15,[r3]
 1333              	.L97:
 238:../pi_regulator.c **** 	}
 239:../pi_regulator.c **** 
 240:../pi_regulator.c **** }
 1334              	 .loc 1 240 0
 1335 023a BD46     	 mov sp,r7
 1336              	.LCFI18:
 1337              	 .cfi_def_cfa_register 13
 1338              	 
 1339 023c 5DF8047B 	 ldr r7,[sp],#4
 1340              	.LCFI19:
 1341              	 .cfi_restore 7
 1342              	 .cfi_def_cfa_offset 0
 1343 0240 7047     	 bx lr
 1344              	.L127:
 1345 0242 00BF     	 .align 2
 1346              	.L126:
 1347 0244 00000000 	 .word sat_out_pos_I
 1348 0248 67666666 	 .word 1717986919
 1349 024c 00000000 	 .word sat_i_part_pos_I
 1350 0250 00000000 	 .word pos_ref
 1351 0254 00000000 	 .word mechanical_position_fast
 1352 0258 00000000 	 .word error_pos
 1353 025c 00000000 	 .word k_p_pos_pid
 1354 0260 00000000 	 .word p_part_pos
 1355 0264 00000000 	 .word k_i_pos_pid
 1356 0268 00000000 	 .word i_part_pos
 1357 026c 00000000 	 .word error_pos_old
 1358 0270 00000000 	 .word k_d_pos_pid
 1359 0274 00000000 	 .word d_part_pos
 1360 0278 00000000 	 .word i_q_ref
 1361              	 .cfi_endproc
 1362              	.LFE200:
 1364              	 .text
 1365              	.Letext0:
 1366              	 .file 2 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 1367              	 .file 3 "c:\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 1368              	 .file 4 "C:/CODE/Licenta/Libraries/CMSIS/Include/core_cm4.h"
 1369              	 .file 5 "../main.h"
 1370              	 .file 6 "../motor_data_update.h"
 1371              	 .file 7 "../transform.h"
DEFINED SYMBOLS
                            *ABS*:00000000 pi_regulator.c
                            *COM*:00000004 CCU8_CC8_CR1_CR1_Value
                            *COM*:00000004 theta_fast
    {standard input}:26     .data.k_p_i:00000000 k_p_i
    {standard input}:23     .data.k_p_i:00000000 $d
    {standard input}:33     .data.k_i_i:00000000 k_i_i
    {standard input}:30     .data.k_i_i:00000000 $d
    {standard input}:40     .data.k_p_spd:00000000 k_p_spd
    {standard input}:37     .data.k_p_spd:00000000 $d
    {standard input}:47     .data.k_i_spd:00000000 k_i_spd
    {standard input}:44     .data.k_i_spd:00000000 $d
    {standard input}:54     .data.k_p_pos:00000000 k_p_pos
    {standard input}:51     .data.k_p_pos:00000000 $d
    {standard input}:61     .data.k_i_pos:00000000 k_i_pos
    {standard input}:58     .data.k_i_pos:00000000 $d
    {standard input}:68     .data.k_p_pos_pid:00000000 k_p_pos_pid
    {standard input}:65     .data.k_p_pos_pid:00000000 $d
    {standard input}:75     .bss.k_i_pos_pid:00000000 k_i_pos_pid
    {standard input}:72     .bss.k_i_pos_pid:00000000 $d
    {standard input}:82     .bss.k_d_pos_pid:00000000 k_d_pos_pid
    {standard input}:79     .bss.k_d_pos_pid:00000000 $d
    {standard input}:89     .bss.error_i_q:00000000 error_i_q
    {standard input}:86     .bss.error_i_q:00000000 $d
    {standard input}:96     .bss.error_i_d:00000000 error_i_d
    {standard input}:93     .bss.error_i_d:00000000 $d
    {standard input}:103    .bss.error_spd:00000000 error_spd
    {standard input}:100    .bss.error_spd:00000000 $d
    {standard input}:110    .bss.error_pos:00000000 error_pos
    {standard input}:107    .bss.error_pos:00000000 $d
    {standard input}:117    .bss.error_pos_old:00000000 error_pos_old
    {standard input}:114    .bss.error_pos_old:00000000 $d
    {standard input}:124    .bss.i_q_ref:00000000 i_q_ref
    {standard input}:121    .bss.i_q_ref:00000000 $d
    {standard input}:131    .bss.i_d_ref:00000000 i_d_ref
    {standard input}:128    .bss.i_d_ref:00000000 $d
    {standard input}:138    .bss.pos_ref:00000000 pos_ref
    {standard input}:135    .bss.pos_ref:00000000 $d
    {standard input}:145    .bss.spd_ref:00000000 spd_ref
    {standard input}:142    .bss.spd_ref:00000000 $d
    {standard input}:152    .bss.u_q_ref:00000000 u_q_ref
    {standard input}:149    .bss.u_q_ref:00000000 $d
                            *COM*:00000004 u_d_ref
    {standard input}:160    .bss.p_part_i_q:00000000 p_part_i_q
    {standard input}:157    .bss.p_part_i_q:00000000 $d
    {standard input}:167    .bss.p_part_i_d:00000000 p_part_i_d
    {standard input}:164    .bss.p_part_i_d:00000000 $d
    {standard input}:174    .bss.p_part_spd:00000000 p_part_spd
    {standard input}:171    .bss.p_part_spd:00000000 $d
    {standard input}:181    .bss.p_part_pos:00000000 p_part_pos
    {standard input}:178    .bss.p_part_pos:00000000 $d
    {standard input}:188    .bss.i_part_i_q:00000000 i_part_i_q
    {standard input}:185    .bss.i_part_i_q:00000000 $d
    {standard input}:195    .bss.i_part_i_d:00000000 i_part_i_d
    {standard input}:192    .bss.i_part_i_d:00000000 $d
    {standard input}:202    .bss.i_part_spd:00000000 i_part_spd
    {standard input}:199    .bss.i_part_spd:00000000 $d
    {standard input}:209    .bss.i_part_pos:00000000 i_part_pos
    {standard input}:206    .bss.i_part_pos:00000000 $d
    {standard input}:216    .bss.d_part_pos:00000000 d_part_pos
    {standard input}:213    .bss.d_part_pos:00000000 $d
    {standard input}:223    .data.sat_out_currents:00000000 sat_out_currents
    {standard input}:220    .data.sat_out_currents:00000000 $d
    {standard input}:230    .data.sat_out_spd:00000000 sat_out_spd
    {standard input}:227    .data.sat_out_spd:00000000 $d
    {standard input}:237    .data.sat_out_pos:00000000 sat_out_pos
    {standard input}:234    .data.sat_out_pos:00000000 $d
    {standard input}:244    .data.sat_out_pos_I:00000000 sat_out_pos_I
    {standard input}:241    .data.sat_out_pos_I:00000000 $d
                            *COM*:00000004 sat_i_part_currents
                            *COM*:00000004 sat_i_part_spd
                            *COM*:00000004 sat_i_part_pos
                            *COM*:00000004 sat_i_part_pos_I
    {standard input}:251    .text.pi_regulator_i_q:00000000 $t
    {standard input}:256    .text.pi_regulator_i_q:00000000 pi_regulator_i_q
    {standard input}:446    .text.pi_regulator_i_q:000001a8 $d
    {standard input}:461    .text.pi_regulator_i_d:00000000 $t
    {standard input}:466    .text.pi_regulator_i_d:00000000 pi_regulator_i_d
    {standard input}:655    .text.pi_regulator_i_d:000001a8 $d
    {standard input}:670    .text.pi_regulator_speed:00000000 $t
    {standard input}:675    .text.pi_regulator_speed:00000000 pi_regulator_speed
    {standard input}:866    .text.pi_regulator_speed:000001b0 $d
    {standard input}:882    .text.pi_regulator_pos:00000000 $t
    {standard input}:887    .text.pi_regulator_pos:00000000 pi_regulator_pos
    {standard input}:1078   .text.pi_regulator_pos:000001b0 $d
    {standard input}:1093   .text.pid_regulator_pos:00000000 $t
    {standard input}:1098   .text.pid_regulator_pos:00000000 pid_regulator_pos
    {standard input}:1347   .text.pid_regulator_pos:00000244 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
i_q
i_d
motor_spd
mechanical_position_fast
